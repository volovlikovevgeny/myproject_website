!function(r){function e(e){for(var t,c,l=e[0],n=e[1],a=e[2],h=0,d=[];h<l.length;h++)c=l[h],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t]);for(u&&u(e);d.length;)d.shift()();return i.push.apply(i,a||[]),s()}function s(){for(var r,e=0;e<i.length;e++){for(var s=i[e],t=!0,l=1;l<s.length;l++){var n=s[l];0!==o[n]&&(t=!1)}t&&(i.splice(e--,1),r=c(c.s=s[0]))}return r}var t={},o={"web/groups_list":0},i=[];function c(e){if(t[e])return t[e].exports;var s=t[e]={i:e,l:!1,exports:{}};return r[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=r,c.c=t,c.d=function(r,e,s){c.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:s})},c.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},c.t=function(r,e){if(1&e&&(r=c(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var t in r)c.d(s,t,function(e){return r[e]}.bind(null,t));return s},c.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return c.d(e,"a",e),e},c.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},c.p="/js/cmodules/";var l=window.webpackJsonp=window.webpackJsonp||[],n=l.push.bind(l);l.push=e,l=l.slice();for(var a=0;a<l.length;a++)e(l[a]);var u=n;i.push([175,"common"]),s()}({175:function(r,e,s){r.exports=s("wbdc")},wbdc:function(r,e,s){"use strict";s.r(e);s("Vd3H"),s("OG14"),s("Oyvg"),s("pIFo");var t=s("v+DW"),o=s("EasH"),i=s("4+be"),c=s("XzvV"),l={rand:function(){return Math.floor(1e4*Math.random())},toggleFave:function(r,e,s,o){var i=parseInt(r.getAttribute("data-value"))?1:0;ajax.post("fave.php",{act:i?"a_delete_group":"a_add_group",gid:e,hash:s},{onDone:s=>{val(r,s),r.setAttribute("data-value",1-i),this.updateGroupField(e,12,1-i)},showProgress:t.lockActionsMenuItem.pbind(r),hideProgress:t.unlockActionsMenuItem.pbind(r)}),cancelEvent(o)},toggleSubscription:function(r,e,s,o){var i=parseInt(r.getAttribute("data-value"))?1:0;ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:i?0:1,oid:-e,hash:s},{onDone:s=>{val(r,s),r.setAttribute("data-value",1-i),this.updateGroupField(e,13,1-i)},showProgress:t.lockActionsMenuItem.pbind(r),hideProgress:t.unlockActionsMenuItem.pbind(r)}),cancelEvent(o)},subscribe:function(r,e,s,c){var l=hasClass(r,"flat_button");if(!(l&&Object(t.isButtonLocked)(r)||Object(t.actionsMenuItemLocked)(r))){var n=l?hasClass(r,"secondary"):!cur.scrollList.deleted[e];!function c(a){ajax.post("al_groups.php",{act:n?"list_leave":"list_enter",gid:e,hash:s,confirm:a},{showProgress:(l?t.lockButton:t.lockActionsMenuItem).pbind(r),hideProgress:(l?t.unlockButton:t.unlockActionsMenuItem).pbind(r),onDone:function(s,t,a){if(t){var u=Object(o.showFastBox)(Object(i.getLang)("global_warning"),t,Object(i.getLang)("group_leave_group"),(function(){u.hide(),c(1)}),Object(i.getLang)("global_cancel"));return!0}if(val(r,s),cur.scrollList.deleted[e]=n,l)toggleClass(r,"secondary",!n);else{var h=domClosest("_gl_row",r);toggleClass(h,"deleted",n),a&&addClass(h,"closed")}},onFail:function(r){setTimeout(Object(o.showFastBox)(Object(i.getLang)("global_error"),r).hide,3e3)}})}()}},updateGroupField:function(r,e,s){cur.scrollList&&cur.scrollList.lists&&each(cur.scrollList.lists,(function(){if(this&&this.length)for(var t=0,o=this.length;t<o;++t)if(this[t][2]==r){this[t][e]=s;break}}))},enter:function(r,e,s,c,l){if(cur.invSwitching)return setTimeout(()=>this.enter(r,e,s,c,l),100),!1;var n,a,u=cur.scrollList.tab;"button"!=r.tagName.toLowerCase()?(r.backhtml||(r.backhtml=r.innerHTML),n=function(){var e=getSize(r)[0];r.innerHTML='<span class="progress_inline"></span>',setStyle(domFC(r),{width:e})},a=function(){r.innerHTML=r.backhtml}):(n=t.lockButton.pbind(r),a=t.unlockButton.pbind(r));var h=this.rand(),d=this.rand();cur.scrollList[h]=d,cur.invSwitching=!0,ajax.post("/al_groups.php",{act:"enter",gid:e,hash:s,context:"2"+(c?"_"+c:"")},{onDone:(r,s)=>{if(cur.invSwitching=!1,cur.scrollList&&cur.scrollList[h]==d){var t=cur.scrollList.lists[u],o=l?5:1;if("unsure"==c?o=l?5:3:"decline"==c?o=l?-3:-1:"undecided"==c&&(o=4),t&&"loading"!=t&&"update"!=t)for(var i=0,n=t.length;i<n;++i)t[i][2]==e&&(t[i][1]=o);else cur.scrollList.processed[u][e]=o;if(r&&cur.scrollList.lists.groups){var a=cur.scrollList.lists.groups;if("join"!=c&&"unsure"!=c&&c){if("undecided"==c)for(var p in a)a[p][2]==r[2]&&(a.splice(p,1),cur.scrollList.counts.groups--)}else a.unshift(r),cur.scrollList.counts.groups++;this.updateIndexer(a),this.showMore(!0)}TopNotifier&&!TopNotifier.shown()&&TopNotifier.invalidate();var g=ge("gl_inv"+e),f=g&&geByClass1("group_row_status",g);g&&(f.basehtml=f.innerHTML,f.innerHTML=s)}},onFail:function(r){if(r)return setTimeout(Object(o.showFastBox)(Object(i.getLang)("global_error"),r).hide,3e3),!0},showProgress:n,hideProgress:a})},leave:function(r,e,s,o){if(cur.invSwitching)return setTimeout(()=>this.leave(r,e,s,o),100),!1;if(!r.firstChild||"progress_inline"!=r.firstChild.className){var i,c,l=this.rand(),n=this.rand(),a=cur.scrollList.tab;cur.scrollList[l]=n,"button"!=r.tagName.toLowerCase()?(r.backhtml||(r.backhtml=r.innerHTML),i=function(){var e=getSize(r)[0];r.innerHTML='<span class="progress_inline"></span>',setStyle(domFC(r),{width:e})},c=function(){r.innerHTML=r.backhtml}):(i=t.lockButton.pbind(r),c=t.unlockButton.pbind(r)),cur.invSwitching=!0,ajax.post("/al_groups.php",{act:"leave",gid:e,hash:s,context:2},{onDone:function(r,s){if(cur.invSwitching=!1,cur.scrollList&&cur.scrollList[l]==n){var t=cur.scrollList.lists[a];if(t&&"loading"!=t&&"update"!=t)for(var o=0,i=t.length;o<i;++o)t[o][2]==e&&(t[o][1]=-1);else cur.scrollList.processed[a][e]=-1;TopNotifier&&!TopNotifier.shown()&&TopNotifier.invalidate();var c=ge("gl_inv"+e),u=c&&geByClass1("group_row_status",c);c&&(u.basehtml=u.innerHTML,u.innerHTML=s)}},showProgress:i,hideProgress:c})}},spam:function(r,e,s){if(!domFC(r)||"progress_inline"!=domFC(r)){var t=this.rand(),o=this.rand(),i=cur.scrollList.tab;cur.scrollList[t]=o,ajax.post("/al_groups.php",{act:"spam",gid:e,hash:s,context:1},{onDone:function(r){if(cur.scrollList&&cur.scrollList[t]==o){var s=cur.scrollList.lists[i];if(s&&"loading"!=s&&"update"!=s)for(var c=0,l=s.length;c<l;++c)s[c][2]==e&&(s[c][1]=-2);else cur.scrollList.processed[i][e]=-2;var n=ge("gl_inv"+e),a=n&&geByClass1("group_row_status",n);n&&(a.innerHTML=r)}},showProgress:function(){r.oldhtml=r.innerHTML;var e=getSize(r)[0];r.innerHTML='<span class="progress_inline"></span>',setStyle(domFC(r),{width:e})},hideProgress:function(){r.innerHTML=r.oldhtml}})}},cancel:function(r,e,s){if(!domFC(r)||"progress_inline"!=domFC(r).className){var t=this.rand(),o=this.rand(),i=cur.scrollList.tab;cur.scrollList[t]=o,ajax.post("/al_groups.php",{act:"cancel",gid:e,hash:s,context:1},{onDone:()=>{if(cur.scrollList&&cur.scrollList[t]==o){var r=cur.scrollList.lists[i];if(r&&"loading"!=r&&"update"!=r){for(var s in r)r[s][2]==e&&(r.splice(s,1),cur.scrollList.counts.groups--);this.updateIndexer(r),this.showMore(!0)}else cur.scrollList.processed[i][e]=0;var c=ge("gl_inv"+e),l=c&&geByClass1("group_row_status",c);c&&l&&l.basehtml&&(l.innerHTML=l.basehtml)}},showProgress:function(){r.oldhtml=r.innerHTML;var e=getSize(r)[0];r.innerHTML='<span class="progress_inline"></span>',setStyle(domFC(r),{width:e})},hideProgress:function(){r.innerHTML=r.oldhtml}})}},updateIndexer:function(r){cur.scrollList.cache.groups={all:[]};var e=cur.scrollList.cache.groups;for(var s in r)r.hasOwnProperty(s)&&e.all.push(s);cur.scrollList.index.groups=new vkIndexer(e.all,(function(e){return r[e][0]}))},rejectAll:function(r,e){Object(o.showFastBox)(Object(i.getLang)("global_warning"),Object(i.getLang)("groups_sure_reject_all"),Object(i.getLang)("groups_reject_all_inv"),(function(r){ajax.post("/al_groups.php",{act:"reject_all",hash:e},{showProgress:t.lockButton.pbind(r),hideProgress:t.unlockButton.pbind(r)})}),Object(i.getLang)("global_cancel"))},scrollCheck:function(){if(!browser.mobile&&cur.scrollList){var r=ge("ui_"+cur.scrollList.tab+"_load_more"),e=ge("ui_search_load_more");if(isVisible(r)||(r=e,isVisible(r))){var s=document.documentElement,t=window.innerHeight||s.clientHeight||bodyNode.clientHeight,o=scrollGetY();(o+t>r.offsetTop||cur.searchOffset&&o+2*t>r.offsetTop)&&this.showMore()}}},initScroll:function(){this.destroyScroll(),this._scrollCheck=()=>this.scrollCheck(),addEvent(window,"scroll",this._scrollCheck),addEvent(window,"resize",this._scrollCheck)},destroyScroll:function(){removeEvent(window,"scroll",this._scrollCheck),removeEvent(window,"resize",this._scrollCheck)},locNav:function(r,e,s){var t=r.tab,o=t||("events"==s.act?"future":"groups");if(delete r.tab,isEmpty(r)&&void 0!==t)return hide("groups_list_tab_"+cur.scrollList.tab),this.updateSummary(cur.scrollList.counts[cur.scrollList.tab]),cur.scrollList.tab=o,cur.scrollList.summary=geByClass1("ui_tab_count",ge("groups_"+o+"_tab")),show("groups_list_tab_"+o),checkPageBlocks(),nav.setLoc(s),window.uiSearch&&uiSearch.reset(cur.scrollList.query,!0),elfocus(cur.scrollList.query),this.updateSummary(cur.scrollList.counts[o]),cur.scrollList.offset=ge("groups_list_"+o).childNodes.length,this.showMore(!0),window.uiTabs&&uiTabs.hideProgress(ge("groups_"+o+"_tab")),!1},init:function(r){extend(cur,{module:"groups_list",_back:{text:Object(i.getLang)("groups_back_to_list"),show:[()=>this.initScroll,elfocus.pbind("groups_list_search")],hide:[()=>this.destroyScroll]},scrollList:{tab:r.tab,url:"al_groups.php",params:{act:"get_list",mid:r.mid},prefix:"groups_list_",query:ge("groups_list_search"),queryCont:gpeByClass("_wrap",ge("groups_list_search")),queryWrap:ge("group_u_search_input_wrap"),summary:geByClass1("ui_tab_count",ge("groups_"+(r.tab||"groups")+"_tab")),searchSummary:ge("groups_search_summary"),invites:ge("groups_invites_wrap"),invitesPreload:ge("groups_invites_preload"),invitesMoreLnk:ge("ui_invites_load_more"),searchWrap:ge("groups_list_search_wrap"),searchCont:ge("groups_list_search_cont"),eventsPopular:ge("events_popular_list"),perpage:20,offset:ge("groups_list_"+r.tab).childNodes.length,lists:{},cache:{},index:{},deleted:{},processed:{groups:{},admin:{},inv:{},future:{},past:{},events_concerts:{}},filtered:{},queries:{},counts:r.counts,genEmpty:r.genEmpty,genRow:r.genRow,genSummary:r.genSummary,genGroupsSummary:r.genGroupsSummary,invShown:r.invShown},filter:r.filter}),setTimeout(elfocus.pbind(cur.scrollList.query),0),cur.nav.push(()=>this.locNav),setTimeout(()=>this.load,0),vk.version?addEvent(window,"load",()=>this.initScroll):this.initScroll(),cur.destroy.push(r=>{r==cur&&this.destroyScroll()}),"search"===nav.objLoc.from&&(cur.searchSeoMode=!0)},updateSummary:function(r,e){val(e?cur.scrollList.searchSummary:cur.scrollList.summary,r?langNumeric(r,"%s",!0):"")},load:function(r,e){var s=e||cur.scrollList.tab;if(!cur.scrollList.lists[s]){var t=this.rand(),o=this.rand();cur.scrollList[t]=o,cur.scrollList.lists[s]="loading",ajax.post(cur.scrollList.url,extend(cur.scrollList.params,{tab:s}),{onDone:e=>{if(cur.scrollList&&cur.scrollList[t]==o){var i="update"==cur.scrollList.lists[s];if(i||"loading"==cur.scrollList.lists[s]){cur.scrollList.cache[s]={all:[]};for(var c=cur.scrollList.processed[s],l=0,n=e.length;l<n;++l){var a=c[e[l][2]];a&&(e[l][1]=a),cur.scrollList.cache[s].all.push(l)}cur.scrollList.indexing||(cur.scrollList.indexing={}),cur.scrollList.indexing[s]=!0,cur.scrollList.lists[s]=e;var u=i?()=>{cur.scrollList&&cur.scrollList[t]==o&&cur.scrollList.tab==s&&this.showMore(r)}:function(){};cur.scrollList.index[s]=new vkIndexer(cur.scrollList.cache[s].all,(function(r){return delete cur.scrollList.indexing[s],cur.scrollList.lists[s][r][0]}),u)}}},local:1})}},getHighlight:function(r){var e=cur.scrollList.index[cur.scrollList.tab],s=e.delimiter,t=e.trimmer;return r+=" "+(Object(i.parseLatin)(r)||""),r=(r=escapeRE(r).replace(/&/g,"&amp;")).replace(t,"").replace(s,"|").replace(/(^\||\|$)/g,""),{re:new RegExp("("+r+")","gi"),val:'<span class="highlight">$1</span>'}},onSearchChange:function(){delete cur.exactSearch,this.showMore(!1)},onSearchEnter:function(){cur.exactSearch=1,this.showMore(!0)},showMore:function(r){var e=Object(c.generateQID)(),s=cur.scrollList.tab,t=cur.scrollList.lists[s];if(!t||"loading"==t||"update"==t)return t||this.load(r,cur.scrollList.tab),void(cur.scrollList.lists[s]="update");if(!cur.scrollList.indexing||!cur.scrollList.indexing[s]){s=cur.scrollList.tab,t=cur.scrollList.cache[s].all;var o=trim(cur.scrollList.query.value),i=cur.searchStr!==o;cur.searchStr=o,0===o.length&&Object(c.removeSearchPositionTracker)("groups"),void 0===cur.scrollList.queries[s]&&(cur.scrollList.queries[s]="");var l=r||o!=cur.scrollList.queries[s];if(l||!1!==r){cur.scrollList.queries[s]=o;var n=!1;if(o){if(void 0===(t=cur.scrollList.cache[s]["_"+o])){var a=cur.scrollList.index[s].search(o),u={};t=[];for(var h=0,d=a.length;h<d;++h)u[a[h]]||(u[a[h]]=!0,t.push(a[h]));t.sort((function(r,e){return r-e})),cur.scrollList.cache[s]["_"+o]=t}n=this.getHighlight(o)}var p=t.length,g=ge(cur.scrollList.prefix+s),f=ge("ui_"+s+"_load_more");if(this.updateSummary(p),o&&l&&i&&Object(c.saveSearchAttemptStats)(c.serviceGroups,0,p,o,e,0,"0","no_model",c.blockNameOwn),!p)return g.innerHTML=cur.scrollList.genEmpty(o),void(o&&this.needSearch(s)?l?(this.serverSearch(g,o,[],e),hide(f)):cur.searchOffset&&this.serverSearchMore(g,o,e):(hide(f),hide(cur.scrollList.searchWrap),show(cur.scrollList.eventsPopular),cur.searchOffset=0));for(var _=l?0:cur.scrollList.offset,v=Math.min(p,_+cur.scrollList.perpage),L=[],m=_;m<v;++m){var b=cur.scrollList.lists[s][t[m]];if(b){var w=b[0];n&&(w=w.replace(n.re,n.val)),L.push(cur.scrollList.genRow(b,w))}}if(o||_&&!l||(hide(cur.scrollList.searchWrap),show(cur.scrollList.eventsPopular),cur.searchOffset=0),l)if(hasClass(cur.scrollList.queryCont,"ui_search_fixed")&&scrollToY(getXY(cur.scrollList.queryWrap)[1]+1,0),g.innerHTML=L.join(""),checkPageBlocks(),cur.searchOffset=!1,t.length<5&&o&&this.needSearch(s)){var S,y=[];for(var x in t)t.hasOwnProperty(x)&&(S=cur.scrollList.lists[s][t[x]],y.push(S[2]));this.serverSearch(g,o,y,e)}else hide(cur.scrollList.searchWrap),show(cur.scrollList.eventsPopular),cur.searchOffset=0;else g.innerHTML+=L.join(""),cur.searchOffset&&this.serverSearchMore(g,o,e);cur.scrollList.offset=v,cur.searchOffset||(v<p?show:hide)(f)}}},showMoreInvites:function(r){if(!cur.loadingInvites){for(var e=cur.scrollList.invites&&geByClass1("groups_list",cur.scrollList.invites),s=cur.scrollList.invitesPreload,t=cur.scrollList.invitesMoreLnk;domFC(s);)e.appendChild(domFC(s)),cur.scrollList.invShown++;toggle(t,cur.scrollList.counts.invite>cur.scrollList.invShown),isVisible(t)&&ajax.post("/al_groups.php",{act:"more_invites",offset:cur.scrollList.invShown},{onDone:function(r,e){s.innerHTML=r,e&&(cur.scrollList.counts.invite-=e)},showProgress:function(){cur.loadingInvites=!0},hideProgress:function(){cur.loadingInvites=!1}})}},serverSearchMore:function(r,e,s){if(!cur.searchLoadingMore){cur.searchLoadingMore=1;var o=ge("ui_search_load_more");ajax.post("/al_groups.php",{act:"server_search",q:e,query_id:s,offset:cur.searchOffset,exact:cur.exactSearch,exclude:cur.searchExclude.join(",")},{onDone:function(r,e,s,t){cur.searchLoadingMore=0,r?(cur.searchOffset=s,cur.scrollList.searchCont.appendChild(cf(e))):cur.searchOffset=0,(!e||s>=r?hide:show)("ui_search_load_more")},onFail:function(){cur.searchLoadingMore=0},showProgress:t.lockButton.pbind(o),hideProgress:t.unlockButton.pbind(o)})}},extendedSearch:function(r){clearTimeout(cur.searchTimeout),cur.searchTimeout=setTimeout((function(){var e=geByClass1("groups_section_search");window.searcher&&e?hasClass(e,"ui_rmenu_item_sel")?window.searcher.onEnter():(uiRightMenu.switchMenu(e),uiRightMenu.showProgress(e),nav.go(e.href+"&c[like_hints]=1&c[q]="+r)):nav.go("/groups?act=catalog&c[q]="+r)}),500)},onExtendedSearchChange:function(r,e){val("c[like_hints]",1),this.extendedSearch(r)},onExtendedSearchEnter:function(r,e,s){val("c[like_hints]",""),this.extendedSearch(e)},needSearch:function(r){return"groups"==r||"future"==r||"past"==r},serverSearch:function(r,e,s,t){if(!this.needSearch(cur.scrollList.tab))return!1;clearTimeout(cur.searchTimeout),cur.searchTimeout=setTimeout(()=>{if(cur.searchStr==e){cur.searchExclude=s||[];var r=+new Date;ajax.post("/al_groups.php",{act:"server_search",q:e,query_id:t,exact:cur.exactSearch,exclude:cur.searchExclude.join(",")},{onDone:(s,o,i,l,n)=>{cur.searchStr==e&&(e&&Object(c.saveSearchAttemptStats)(c.serviceGroups,r,s,e,t,l,n.query_duration,n.model_name,c.blockNameSearch),s?(cur.scrollList.searchCont.innerHTML=o,show(cur.scrollList.searchWrap),hide(cur.scrollList.eventsPopular),(i<s||!o)&&show("ui_search_load_more")):(cur.scrollList.searchCont.innerHTML="",hide(cur.scrollList.searchWrap),show(cur.scrollList.eventsPopular)),checkPageBlocks(),this.updateSummary(s,!0),cur.searchOffset=i)},showProgress:uiSearch.showProgress.pbind(cur.scrollList.query),hideProgress:uiSearch.hideProgress.pbind(cur.scrollList.query)})}},300)},showMapBox:function(r,e,s){window.showZeroZoneBox&&window.showZeroZoneBox("places",()=>{this.showMapBox(r,e,s)})||showTabbedBox("/al_places.php",{act:"show_photo_place",place_id:r},{stat:["places.css","map.css","maps.js","ui_controls.css","ui_controls.js"]})},feedbanGroup:function(r,e,s){var t=-e;ajax.post("/al_fans.php",{act:"feedtgl",oid:t,hash:s},{onDone:(s,t)=>{r.innerHTML=t,this.updateGroupField(e,9,s)},showProgress:function(){r.innerHTML='<span class="progress_inline"></span>'}})},initPositionStat(){document.getElementById("groups_list_groups").addEventListener("click",(function(r){var e=r.target;if("A"===e.tagName&&(e.classList.contains("group_row_title")||e.classList.contains("group_row_img"))){var s=e.closest(".group_list_row").dataset,t=s.groupId,o=s.pos,i=s.trackPosHash;l.addClickStat(t,o,i)}}))},addClickStat(r,e,s){s&&r&&e&&!cur.searchStr&&Object(c.statlogsValueEvent)("groups_hints_item_click",s,r,e)}};window.GroupsList=l;try{window.stManager.done(window.jsc("web/groups_list.js"))}catch(r){}}});