!function(e){function t(t){for(var r,i,s=t[0],u=t[1],c=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={"web/groups":0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/js/cmodules/";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;o.push([166,"audioplayer","common","vendors"]),n()}({"+/AQ":function(e,t,n){"use strict";n.r(t),n.d(t,"getNativeOption",(function(){return a})),n.d(t,"setNativeOption",(function(){return o})),n.d(t,"createScroll",(function(){return c}));var r=n("ofcU");function a(e,t){return bodyNode[e]||document.documentElement[e]}function o(e,t,n){"scrollTop"===e&&window.scrollTo(0,t)}class i{constructor(e,t){this.el=e,this.opts=t,this.module=Object(r.createModule)({handlers:(e,t)=>{e(window,"scroll",this.onScroll.bind(this)),e(window,"resize",this.resize.bind(this))}}),this.innerHeight=window.innerHeight,this.prevScroll=this.scrollTop()}update(){}resize(){this.innerHeight=window.innerHeight}scrollTop(e){if(void 0===e)return a("scrollTop",this.el);o("scrollTop",e,this.el)}contHeight(){return a("scrollHeight")}smoothScroll(e){scrollToY(e+this.scrollTop(),300)}getContainer(){return this.el}getScroller(){return null}scrollBottom(e){if(void 0===e)return this.contHeight()-this.scrollTop()-this.getScrollHeight();var t=this.contHeight()-e-this.getScrollHeight();this.scrollTop(t)}scrollBottomFixSave(e){var t=()=>{Date.now()-n<500&&this.scrollBottom(e),window.removeEventListener("scroll",t)},n=Date.now();window.addEventListener("scroll",t),this.scrollBottom(e)}onScroll(e){var t=this.scrollTop(),n=t-this.prevScroll,r=this.contHeight();this.opts.onScroll&&this.opts.onScroll(-n,this),this.opts.scrollChange&&this.opts.scrollChange(t),this.opts.more&&r-t<2*this.innerHeight&&this.opts.more(this),this.prevScroll=t}getScrollHeight(){return this.innerHeight}destroy(){Object(r.destroyModule)(this.module)}}class s{constructor(e,t){this.prevTop=0,this.scroll=new uiScroll(e,{hidden:void 0===t.hidden||t.hidden,shadows:t.shadows,stopScrollPropagation:!1,theme:t.scrollTheme,onmore:()=>t.more&&t.more(this),onscroll:e=>{var n=this.scrollTop(),r=this.prevTop-n;this.prevTop=n,t.scrollChange&&t.scrollChange(n),t.onScroll&&t.onScroll(r,this)}})}update(){this.scroll.update("sync")}scrollTop(e){return void 0!==e?this.scroll.scrollTop(e):this.scroll.data.scrollTop}getContainer(){return this.scroll.content}getScroller(){return this.scroll.scroller}contHeight(){return this.scroll.data.scrollHeight}smoothScroll(e){this.scroll.scrollTop(this.scrollTop()+e,300)}scrollBottom(e){return void 0!==e?this.scroll.scrollBottom(e):this.scroll.data.scrollBottom}scrollBottomFixSave(e){var t=Date.now();this.scroll.emitter.addOnceListener("resize",()=>{Date.now()-t<500&&this.scroll&&this.scrollBottom(e)}),this.scrollBottom(e)}getScrollHeight(){return this.scroll.data.viewportHeight}destroy(){this.scroll.destroy()}}class u{constructor(e,t){this.el=e}update(){}getContainer(){return this.el}getScroller(){return null}scrollTop(e){return 0}contHeight(){return 0}smoothScroll(e){}scrollBottom(e){return 0}scrollBottomFixSave(e){}getScrollHeight(){return 0}destroy(){}}function c(e,t){return t.noScroll?new u(e):t.nativeScroll?new i(e,t):new s(e,t)}},"+R+6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),a=p(n("17x9")),o=n("SslY"),i=p(n("pyO7")),s=p(n("jyIe")),u=n("u/mt"),c=p(n("TSYQ")),l=p(n("QY22")),d=n("bHqI"),f=n("b/SL"),g=p(n("IogR")),h=p(n("aoKj"));function p(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(e,n){var a,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=T(t).call(this,e,n),a=!i||"object"!==_(i)&&"function"!=typeof i?j(o):i,D(j(a),"focusToDate",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.props,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.scroll.enabled){var r=(0,f.differenceInCalendarMonths)(e,t.minDate,a.dateOptions),o=a.list.getVisibleRange();n&&o.includes(r)||(a.isFirstRender=!0,a.list.scrollTo(r),a.setState({focusedDate:e}))}else a.setState({focusedDate:e})})),D(j(a),"updateShownDate",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props,t=e.scroll.enabled?O({},e,{months:a.list.getVisibleRange().length}):e,n=(0,u.calcFocusDate)(a.state.focusedDate,t);a.focusToDate(n,t)})),D(j(a),"updatePreview",(function(e){if(e){var t={startDate:e,endDate:e,color:a.props.color};a.setState({preview:t})}else a.setState({preview:null})})),D(j(a),"changeShownDate",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set",n=a.state.focusedDate,r=a.props,o=r.onShownDateChange,i=r.minDate,s=r.maxDate,u={monthOffset:function(){return(0,f.addMonths)(n,e)},setMonth:function(){return(0,f.setMonth)(n,e)},setYear:function(){return(0,f.setYear)(n,e)},set:function(){return e}},c=(0,f.min)([(0,f.max)([u[t](),i]),s]);a.focusToDate(c,a.props,!1),o&&o(c)})),D(j(a),"handleRangeFocusChange",(function(e,t){a.props.onRangeFocusChange&&a.props.onRangeFocusChange([e,t])})),D(j(a),"handleScroll",(function(){var e=a.props,t=e.onShownDateChange,n=e.minDate,r=a.state.focusedDate,o=j(a).isFirstRender,i=a.list.getVisibleRange();if(void 0!==i[0]){var s=(0,f.addMonths)(n,i[0]||0);!(0,f.isSameMonth)(s,r)&&!o&&(a.setState({focusedDate:s}),t&&t(s)),a.isFirstRender=!1}})),D(j(a),"renderMonthAndYear",(function(e,n,o){var i=o.showMonthArrow,s=o.minDate,u=o.maxDate,l=o.showMonthAndYearPickers,d=(u||t.defaultProps.maxDate).getFullYear(),f=(s||t.defaultProps.minDate).getFullYear(),g=a.styles;return r.default.createElement("div",{onMouseUp:function(e){return e.stopPropagation()},className:g.monthAndYearWrapper},i?r.default.createElement("button",{type:"button",className:(0,c.default)(g.nextPrevButton,g.prevButton),onClick:function(){return n(-1,"monthOffset")}},r.default.createElement("i",null)):null,l?r.default.createElement("span",{className:g.monthAndYearPickers},r.default.createElement("span",{className:g.monthPicker},r.default.createElement("select",{value:e.getMonth(),onChange:function(e){return n(e.target.value,"setMonth")}},a.state.monthNames.map((function(e,t){return r.default.createElement("option",{key:t,value:t},e)})))),r.default.createElement("span",{className:g.monthAndYearDivider}),r.default.createElement("span",{className:g.yearPicker},r.default.createElement("select",{value:e.getFullYear(),onChange:function(e){return n(e.target.value,"setYear")}},new Array(d-f+1).fill(d).map((function(e,t){var n=e-t;return r.default.createElement("option",{key:n,value:n},n)}))))):r.default.createElement("span",{className:g.monthAndYearPickers},a.state.monthNames[e.getMonth()]," ",e.getFullYear()),i?r.default.createElement("button",{type:"button",className:(0,c.default)(g.nextPrevButton,g.nextButton),onClick:function(){return n(1,"monthOffset")}},r.default.createElement("i",null)):null)})),D(j(a),"renderDateDisplay",(function(){var e=a.props,t=e.focusedRange,n=e.color,o=e.ranges,i=e.rangeColors,u=e.dateDisplayFormat,l=e.editableDateInputs,d=e.startDatePlaceholder,f=e.endDatePlaceholder,g=i[t[0]]||n,h=a.styles;return r.default.createElement("div",{className:h.dateDisplayWrapper},o.map((function(e,n){return!1===e.showDateDisplay||e.disabled&&!e.showDateDisplay?null:r.default.createElement("div",{className:h.dateDisplay,key:n,style:{color:e.color||g}},r.default.createElement(s.default,{className:(0,c.default)(h.dateDisplayItem,D({},h.dateDisplayItemActive,t[0]===n&&0===t[1])),readOnly:!l,disabled:e.disabled,value:e.startDate,placeholder:d,dateOptions:a.dateOptions,dateDisplayFormat:u,onChange:a.onDragSelectionEnd,onFocus:function(){return a.handleRangeFocusChange(n,0)}}),r.default.createElement(s.default,{className:(0,c.default)(h.dateDisplayItem,D({},h.dateDisplayItemActive,t[0]===n&&1===t[1])),readOnly:!l,disabled:e.disabled,value:e.endDate,placeholder:f,dateOptions:a.dateOptions,dateDisplayFormat:u,onChange:a.onDragSelectionEnd,onFocus:function(){return a.handleRangeFocusChange(n,1)}}))})))})),D(j(a),"onDragSelectionStart",(function(e){var t=a.props,n=t.onChange;t.dragSelectionEnabled?a.setState({drag:{status:!0,range:{startDate:e,endDate:e},disablePreview:!0}}):n&&n(e)})),D(j(a),"onDragSelectionEnd",(function(e){var t=a.props,n=t.updateRange,r=t.displayMode,o=t.onChange;if(t.dragSelectionEnabled)if("date"!==r&&a.state.drag.status){var i={startDate:a.state.drag.range.startDate,endDate:e};"dateRange"!==r||(0,f.isSameDay)(i.startDate,e)?a.setState({drag:{status:!1,range:{}}},(function(){return o&&o(e)})):a.setState({drag:{status:!1,range:{}}},(function(){n&&n(i)}))}else o&&o(e)})),D(j(a),"onDragSelectionMove",(function(e){var t=a.state.drag;t.status&&a.props.dragSelectionEnabled&&a.setState({drag:{status:t.status,range:{startDate:t.range.startDate,endDate:e},disablePreview:!0}})})),D(j(a),"estimateMonthSize",(function(e,t){var n=a.props,r=n.direction,o=n.minDate,i=a.state.scrollArea;if(t&&(a.listSizeCache=t,t[e]))return t[e];if("horizontal"===r)return i.monthWidth;var s=(0,f.addMonths)(o,e),c=(0,u.getMonthDisplayRange)(s,a.dateOptions),l=c.start,d=c.end;return(0,f.differenceInDays)(d,l,a.dateOptions)+1>35?i.longMonthHeight:i.monthHeight})),a.dateOptions={locale:e.locale},void 0!==e.weekStartsOn&&(a.dateOptions.weekStartsOn=e.weekStartsOn),a.styles=(0,u.generateStyles)([h.default,e.classNames]),a.listSizeCache={},a.isFirstRender=!0,a.state={monthNames:a.getMonthNames(),focusedDate:(0,u.calcFocusDate)(null,e),drag:{status:!1,range:{startDate:null,endDate:null},disablePreview:!1},scrollArea:a.calcScrollArea(e)},a}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(a=[{key:"getMonthNames",value:function(){var e=this;return v(Array(12).keys()).map((function(t){return e.props.locale.localize.month(t)}))}},{key:"calcScrollArea",value:function(e){var t=e.direction,n=e.months,r=e.scroll;if(!r.enabled)return{enabled:!1};var a=r.longMonthHeight||r.monthHeight;return"vertical"===t?{enabled:!0,monthHeight:r.monthHeight||220,longMonthHeight:a||260,calendarWidth:"auto",calendarHeight:(r.calendarHeight||a||240)*n}:{enabled:!0,monthWidth:r.monthWidth||332,calendarWidth:(r.calendarWidth||r.monthWidth||332)*n,monthHeight:a||300,calendarHeight:a||300}}},{key:"componentDidMount",value:function(){var e=this;this.props.scroll.enabled&&setTimeout((function(){return e.focusToDate(e.state.focusedDate)}))}},{key:"componentDidUpdate",value:function(e){var t={dateRange:"ranges",date:"date"}[this.props.displayMode];this.props[t]!==e[t]&&this.updateShownDate(this.props),e.locale===this.props.locale&&e.weekStartsOn===this.props.weekStartsOn||(this.dateOptions={locale:this.props.locale},void 0!==this.props.weekStartsOn&&(this.dateOptions.weekStartsOn=this.props.weekStartsOn),this.setState({monthNames:this.getMonthNames()})),(0,d.shallowEqualObjects)(e.scroll,this.props.scroll)||this.setState({scrollArea:this.calcScrollArea(this.props)})}},{key:"renderWeekdays",value:function(){var e=this,t=new Date;return r.default.createElement("div",{className:this.styles.weekDays},(0,f.eachDayOfInterval)({start:(0,f.startOfWeek)(t,this.dateOptions),end:(0,f.endOfWeek)(t,this.dateOptions)}).map((function(t,n){return r.default.createElement("span",{className:e.styles.weekDay,key:n},(0,f.format)(t,e.props.weekdayDisplayFormat,e.dateOptions))})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.showDateDisplay,a=t.onPreviewChange,o=t.scroll,s=t.direction,u=t.disabledDates,d=t.maxDate,g=t.minDate,h=t.rangeColors,p=t.color,m=t.navigatorRenderer,_=t.className,v=t.preview,y=this.state,w=y.scrollArea,T=y.focusedDate,j="vertical"===s,E=m||this.renderMonthAndYear,D=this.props.ranges.map((function(e,t){return O({},e,{color:e.color||h[t]||p})}));return r.default.createElement("div",{className:(0,c.default)(this.styles.calendarWrapper,_),onMouseUp:function(){return e.setState({drag:{status:!1,range:{}}})},onMouseLeave:function(){e.setState({drag:{status:!1,range:{}}})}},n&&this.renderDateDisplay(),E(T,this.changeShownDate,this.props),o.enabled?r.default.createElement("div",null,j&&this.renderWeekdays(this.dateOptions),r.default.createElement("div",{className:(0,c.default)(this.styles.infiniteMonths,j?this.styles.monthsVertical:this.styles.monthsHorizontal),onMouseLeave:function(){return a&&a()},style:{width:w.calendarWidth+11,height:w.calendarHeight+11},onScroll:this.handleScroll},r.default.createElement(l.default,{length:(0,f.differenceInCalendarMonths)((0,f.endOfMonth)(d),(0,f.addDays)((0,f.startOfMonth)(g),-1),this.dateOptions),treshold:500,type:"variable",ref:function(t){return e.list=t},itemSizeEstimator:this.estimateMonthSize,axis:j?"y":"x",itemRenderer:function(t,n){var o=(0,f.addMonths)(g,t);return r.default.createElement(i.default,b({},e.props,{onPreviewChange:a||e.updatePreview,preview:v||e.state.preview,ranges:D,key:n,drag:e.state.drag,dateOptions:e.dateOptions,disabledDates:u,month:o,onDragSelectionStart:e.onDragSelectionStart,onDragSelectionEnd:e.onDragSelectionEnd,onDragSelectionMove:e.onDragSelectionMove,onMouseLeave:function(){return a&&a()},styles:e.styles,style:j?{height:e.estimateMonthSize(t)}:{height:w.monthHeight,width:e.estimateMonthSize(t)},showMonthName:!0,showWeekDays:!j}))}}))):r.default.createElement("div",{className:(0,c.default)(this.styles.months,j?this.styles.monthsVertical:this.styles.monthsHorizontal)},new Array(this.props.months).fill(null).map((function(t,n){var o=(0,f.addMonths)(e.state.focusedDate,n);return r.default.createElement(i.default,b({},e.props,{onPreviewChange:a||e.updatePreview,preview:v||e.state.preview,ranges:D,key:n,drag:e.state.drag,dateOptions:e.dateOptions,disabledDates:u,month:o,onDragSelectionStart:e.onDragSelectionStart,onDragSelectionEnd:e.onDragSelectionEnd,onDragSelectionMove:e.onDragSelectionMove,onMouseLeave:function(){return a&&a()},styles:e.styles,showWeekDays:!j||0===n,showMonthName:!j||n>0}))}))))}}])&&w(n.prototype,a),o&&w(n,o),t}(r.PureComponent);C.defaultProps={showMonthArrow:!0,showMonthAndYearPickers:!0,disabledDates:[],classNames:{},locale:g.default,ranges:[],focusedRange:[0,0],dateDisplayFormat:"MMM d, yyyy",monthDisplayFormat:"MMM yyyy",weekdayDisplayFormat:"E",dayDisplayFormat:"d",showDateDisplay:!0,showPreview:!0,displayMode:"date",months:1,color:"#3d91ff",scroll:{enabled:!1},direction:"vertical",maxDate:(0,f.addYears)(new Date,20),minDate:(0,f.addYears)(new Date,-100),rangeColors:["#3d91ff","#3ecf8e","#fed14c"],startDatePlaceholder:"Early",endDatePlaceholder:"Continuous",editableDateInputs:!1,dragSelectionEnabled:!0,fixedHeight:!1},C.propTypes={showMonthArrow:a.default.bool,showMonthAndYearPickers:a.default.bool,disabledDates:a.default.array,minDate:a.default.object,maxDate:a.default.object,date:a.default.object,onChange:a.default.func,onPreviewChange:a.default.func,onRangeFocusChange:a.default.func,classNames:a.default.object,locale:a.default.object,shownDate:a.default.object,onShownDateChange:a.default.func,ranges:a.default.arrayOf(o.rangeShape),preview:a.default.shape({startDate:a.default.object,endDate:a.default.object,color:a.default.string}),dateDisplayFormat:a.default.string,monthDisplayFormat:a.default.string,weekdayDisplayFormat:a.default.string,weekStartsOn:a.default.number,dayDisplayFormat:a.default.string,focusedRange:a.default.arrayOf(a.default.number),initialFocusedRange:a.default.arrayOf(a.default.number),months:a.default.number,className:a.default.string,showDateDisplay:a.default.bool,showPreview:a.default.bool,displayMode:a.default.oneOf(["dateRange","date"]),color:a.default.string,updateRange:a.default.func,scroll:a.default.shape({enabled:a.default.bool,monthHeight:a.default.number,longMonthHeight:a.default.number,monthWidth:a.default.number,calendarWidth:a.default.number,calendarHeight:a.default.number}),direction:a.default.oneOf(["vertical","horizontal"]),startDatePlaceholder:a.default.string,endDatePlaceholder:a.default.string,navigatorRenderer:a.default.func,rangeColors:a.default.arrayOf(a.default.string),editableDateInputs:a.default.bool,dragSelectionEnabled:a.default.bool,fixedHeight:a.default.bool};var S=C;t.default=S},"/eGY":function(e,t,n){"use strict";n.r(t),n.d(t,"VKPAY_APP_ID",(function(){return l})),n.d(t,"BUTTON_TYPE_TEXT",(function(){return d})),n.d(t,"BUTTON_TYPE_VKPAY",(function(){return f})),n.d(t,"BUTTON_TYPE_LOCATION",(function(){return g})),n.d(t,"BUTTON_TYPE_OPEN_APP",(function(){return h})),n.d(t,"BUTTON_TYPE_OPEN_LINK",(function(){return p})),n.d(t,"BUTTON_COLOR_DEFAULT",(function(){return m})),n.d(t,"BUTTON_COLOR_SECONDARY",(function(){return _})),n.d(t,"BUTTON_COLOR_PRIMARY",(function(){return b})),n.d(t,"BUTTON_COLOR_NEGATIVE",(function(){return v})),n.d(t,"BUTTON_COLOR_POSITIVE",(function(){return y})),n.d(t,"handleButtonClick",(function(){return w})),n.d(t,"getButtonAppearance",(function(){return T})),n.d(t,"getButtonLabel",(function(){return j})),n.d(t,"getActionObjectFromElement",(function(){return D})),n.d(t,"getAttributesFromActionObject",(function(){return C}));n("HEwt"),n("a1Th"),n("rE2o"),n("ioFf"),n("rGqo"),n("Btvt"),n("/8Fb"),n("pIFo");var r=n("t7n3"),a=n("nAFc"),o=n("/PiP"),i=n("EasH"),s=n("N4ZS");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=6217559,d="text",f="vkpay",g="location",h="open_app",p="open_link",m="default",_="secondary",b="primary",v="negative",y="positive",O=["app-id","owner-id","type","payload","hash","label"];function w(e,t,n,r){var a=e.app_id,s=e.owner_id,u=e.type,c=e.payload,m=e.hash,_=void 0===m?"":m;switch(u){case p:break;case f:case h:var b="app"+(u===f?l:a)+(s?"_"+s:"");Object(o.showWiki)({w:b+encodeURIComponent("#"+_),from_keyboard:1,app_hash:n});break;case g:cur.sendLocation=function(e,n){n(),t({keyboardAuthorId:r,action:{label:"",attaches:[e],payload:c}})},Object(i.showBox)("al_places.php",{act:"a_choose_place_box",from_keyboard:1},{stat:["places.css","map.css","maps.js","ui_controls.css","ui_controls.js","boxes.css"],width:640,bodyStyle:"padding: 0px;",dark:1});break;case d:t({action:e,appHash:n,keyboardAuthorId:r});break;default:e.payload=JSON.stringify({command:"not_supported_button",button_type:u,payload:e.payload}),t({action:e,appHash:n,keyboardAuthorId:r})}}function T(e){return E(e)?b:e.color.toLowerCase().replace(m,_)}function j(e){var t=e.action,n=t.label;return t.type===g?getLang("mail_keyboard_label_location"):E(e)?getLang("mail_keyboard_label_vkpay").replace(/ VK Pay$/,""):function(e){var t=e;return t=Object(a.decodeHTMLEntities)(t||""),t=Object(r.clean)(t).replace(/\n(\r)?/gi," "),t=Emoji.emojiToHTML(t,!0)}(n)}function E(e){var t=e.action,n=t.app_id,r=t.type;return r===f||r===h&&n===l}function D(e){return O.reduce((t,n)=>(t[n.replace("-","_")]=e.getAttribute("data-"+n)||void 0,t),{})}function C(e){var t=Object.entries(e).reduce((e,t)=>{var n=u(t,2),a=n[0],o=n[1];return e+` data-${a.replace("_","-")}="${Object(r.clean)(""+o)}"`},"");e.type===p&&(t+=` href="${Object(s.wrapAwayIfExternal)(encodeURI(e.link),!0)}" target="_blank" rel="nofollow noopener"`);return t}},"0Rlc":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),a=(n("17x9"),n("ZxpX"));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}class s extends r.Component{constructor(){super(...arguments),this.onChange=e=>{this.props.onChange&&this.props.onChange(this.props.name,e.target.checked,e)}}render(){var e=this.props,t=e.children,n=e.checked,s=e.disabled,u=e.indeterminate,c=e.name,l=e.id,d=i(e,["children","checked","disabled","indeterminate","name","id"]),f=Object(a.classNames)("CheckBox",d.className,{"CheckBox--disabled":s,"CheckBox--indeterminate":u});return r.createElement("label",{className:f},r.createElement("input",o({},d,{className:"CheckBox__input",id:l,type:"checkbox",checked:n,name:c,disabled:s,onChange:this.onChange})),r.createElement("span",{className:"CheckBox__indicator","aria-hidden":!0}),t)}}},"0YX+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),o=(r=n("17x9"))&&r.__esModule?r:{default:r};function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,n){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=c(t).call(this,e,n),r=!o||"object"!==s(o)&&"function"!=typeof o?l(a):o,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(l(r),"onChange",(function(e){var t=r.props.onChange,n=parseInt(e.target.value,10);t(n=isNaN(n)?0:Math.max(Math.min(99999,n),0))})),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.value,r=t.label,a=t.placeholder;return n!==e.value||r!==e.label||a!==e.placeholder}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeholder,r=e.value,o=e.styles,i=e.onBlur,s=e.onFocus;return a.default.createElement("div",{className:o.inputRange},a.default.createElement("input",{className:o.inputRangeInput,placeholder:n,value:r,min:0,max:99999,onChange:this.onChange,onFocus:s,onBlur:i}),a.default.createElement("span",{className:o.inputRangeLabel},t))}}])&&u(n.prototype,r),o&&u(n,o),t}(a.Component);f.propTypes={value:o.default.oneOfType([o.default.string,o.default.number]),label:o.default.string.isRequired,placeholder:o.default.string,styles:o.default.shape({inputRange:o.default.string,inputRangeInput:o.default.string,inputRangeLabel:o.default.string}).isRequired,onBlur:o.default.func.isRequired,onFocus:o.default.func.isRequired,onChange:o.default.func.isRequired},f.defaultProps={value:"",placeholder:"-"};var g=f;t.default=g},"0toi":function(e,t,n){"use strict";n.r(t);n("91GP");var r=n("q1tI"),a=(n("17x9"),n("r7nW")),o=n("6aSF"),i=n("ZxpX");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=e=>{var t=e.title,n=e.onClose,a=e.appearance,o=Object(i.classNames)("Modal__header","Modal__header--"+a);return r.createElement("div",{className:o},r.createElement("div",{className:"Modal__headerInner"},r.createElement("h1",{className:"Modal__headerTitle"},t),r.createElement("button",{className:"Modal__headerCross",type:"button",onClick:n},"Закрыть")))};u.defaultProps={appearance:"white"};var c=e=>{var t=e.children;return e.hasScroll?r.createElement(o.default,{className:"Modal__body"},t):r.createElement("div",{className:"Modal__body"},t)};c.defaultProps={children:null,hasScroll:!0};var l=e=>{var t=e.className,n=e.appearance,o=e.title,u=e.actionButtons,c=e.onClose,d=e.children,f=e.footerHint,g=e.hasScroll,h=Object(i.classNames)("Modal","Modal--"+n,t);return r.createElement(a.default,s({},e,{className:h}),r.createElement(l.Header,{title:o,onClose:c,appearance:n}),Boolean(d)&&r.createElement(l.Body,{hasScroll:g},d),r.createElement(l.Footer,{actionButtons:u,hint:f}))};l.Header=u,l.Body=c,l.Footer=e=>{var t=e.actionButtons,n=e.hint;return r.createElement("div",{className:"Modal__footer"},r.createElement("div",{className:"Modal__footerInner"},n&&r.createElement("div",{className:"Modal__footerHint"},n),t))},l.defaultProps=s({},a.default.defaultProps,{appearance:"white",hasScroll:c.defaultProps.hasScroll}),t.default=l},"12ku":function(e,t,n){"use strict";n.r(t),n.d(t,"ON_BOARDING_BG_ID",(function(){return u})),n.d(t,"ON_BOARDING_BG_HEADER_ID",(function(){return c})),n.d(t,"ON_BOARDING_BG_RECT_ID",(function(){return l})),n.d(t,"ON_BOARDING_BG_CLIP_ID",(function(){return d})),n.d(t,"default",(function(){return f}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf");var r=n("zxIV"),a=n("lXE5"),o=n("k3PD");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u="onboarding_bg",c="onboarding_bg_header",l="onboarding_bg_rect",d="onboarding_bg_clip";class f{constructor(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.el=e,this.text=t,this.hideDarkness=!0,this.oldColor=!1;var r={autoShow:!1,noAutoHideOnWindowClick:!0,content:""+t,cls:"feature_intro_tt feature_intro_blue_tt tutorial_tip_tt "+(n.class?n.class:""),appendToParent:!0,onHide:this.ttOnHide.bind(this)};n.side&&(r.forceSide=n.side),n.offset&&(r.offset=n.offset),n.width&&(r.width=n.width),n.shift&&(r.centerShift=n.shift),n.border?this.border=n.border:this.border=[10,10,10,10],n.withCloseButton&&(r.withCloseButton=n.withCloseButton,r.onCloseButtonClick=n.onCloseButtonClick),n.align&&(r.align=n.align),this.ttParams=r,this.opts=n,this.initOnboardingBG()}initOnboardingBG(){if(!window.onboardingBG){var e=se('\n<div id="onboarding_layout">\n  <svg id="onboarding_bg_header" width="100%" height="42px">\n    <rect id="onboarding_bg_rect" x="0" y="0" width="100%" height="100%" fill-opacity="0.8" fill="#000"></rect>\n  </svg>\n  <svg id="onboarding_bg" width="100%" height="100%">\n  <defs>\n    <mask id="mask" x="0" y="0" width="100%" height="100%">\n      <rect x="0" y="0" width="100%" height="100%" fill="#fff"></rect>\n      <rect id="onboarding_bg_clip" x="0" y="0" width="0" height="0" fill="#000" rx="8" ry="8"></rect>\n    </mask>\n  </defs>\n  <rect id="onboarding_bg_rect" x="0" y="42" width="100%" height="100%" mask="url(#mask)" fill-opacity="0.8"></rect>\n  </svg>\n</div>\n      ');Object(r.domInsertBefore)(e,window.layerBG),window.onboardingBGHeader=ge(c),window.onboardingBG=ge(u),window.onboardingBGRect=ge(l),window.onboardingBGClip=ge(d),window.cur.destroy.push(()=>{hide(window.onboardingBG),hide(window.onboardingBGHeader),removeClass(ge("page_header_cont"),"onboarding"),this.hideDarkness=!0,this.hideTT(),delete window.onboardingBG,delete window.onboardingBGHeader,delete window.onboardingBGRect,delete window.onboardingBGClip,this.opts.onBGClick&&removeEvent(window.onboardingBG,"click",this.opts.onBGClick)}),this.opts.onBGClick&&addEvent(window.onboardingBG,"click",this.opts.onBGClick)}}showTT(){var e=i(Object(r.getXY)(this.el),2)[1];this.tt=new window.ElementTooltip(this.el,this.ttParams),this.opts.highlight&&(this.addDarkness(),this.addHighlight()),this.tt.show();var t=this.tt.getContent();Object(o.isElementInViewport)(this.el)&&Object(o.isElementInViewport)(t)||Object(a.scrollToY)(e-42)}hideTT(){this.tt&&(this.tt.destroy(),this.removeDarkens(),this.hideDarkness&&(removeEvent(window,"scroll"),removeEvent(window,"resize")))}addHighlight(){window.onboardingBGClip&&(this.highlightElement(),addEvent(window,"scroll",this.onScrollTT.bind(this)),addEvent(window,"resize",this.onResizeTT.bind(this)))}highlightElement(){var e=this.el.offsetWidth,t=this.el.offsetHeight,n=Object(r.getXY)(this.el);attr(window.onboardingBGClip,"width",e+this.border[1]+this.border[3]),attr(window.onboardingBGClip,"height",t+this.border[0]+this.border[2]),attr(window.onboardingBGClip,"x",n[0]-this.border[1]),attr(window.onboardingBGClip,"y",n[1]-this.border[0])}onResizeTT(){this.setDartToFullWidth(),this.highlightElement()}onScrollTT(){var e=this.getPageHeight();window.onboardingBG.height!=e&&this.setDartToFullHeight()}setDartToFullHeight(){attr(window.onboardingBG,"height",this.getPageHeight())}setDartToFullWidth(){attr(window.onboardingBG,"width",this.getPageWidth()),attr(window.onboardingBGHeader,"width",this.getPageWidth())}addDarkness(){Object(r.isVisible)(window.onboardingBG)||(this.setDartToFullHeight(),this.setDartToFullWidth(),show(window.onboardingBG),Object(r.isVisible)(window.onboardingBGHeader)||(show(window.onboardingBGHeader),addClass(ge("page_header_cont"),"onboarding")))}removeDarkens(){this.hideDarkness&&(hide(window.onboardingBG),hide(window.onboardingBGHeader),removeClass(ge("page_header_cont"),"onboarding"))}ttOnHide(){this.hideTT()}show(){setTimeout(this.showTT.bind(this),1e3)}getPageWidth(){var e=document.documentElement,t=document.body;return Math.max(t.scrollWidth,e.scrollWidth,t.offsetWidth,e.offsetWidth,t.clientWidth,e.clientWidth)}getPageHeight(){var e=document.documentElement,t=document.body;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)}}},166:function(e,t,n){e.exports=n("QcBb")},"16Al":function(e,t,n){"use strict";var r=n("WbBG");function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},"17x9":function(e,t,n){e.exports=n("16Al")()},"1BVb":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("q1tI"),a=(n("17x9"),n("As6E")),o=n("ZxpX"),i=e=>{var t=e.data,n=e.align,i=e.trigger,s=e.position,u=e.marginLeft,c=e.marginTop,l=e.className,d=e.children;return r.createElement(a.default,{className:Object(o.classNames)("OfficeDropdown",l),data:t,align:n,trigger:i,position:s,marginLeft:u,marginTop:c},d)};i.defaultProps={position:"b",align:"center",marginTop:0,marginLeft:0,trigger:"click",data:[],children:null,className:""};var s=i},"1y80":function(e,t,n){"use strict";function r(e,t,n,r,a){return window.statlogsValueEvent(e,t,n,r,a)}function a(e){return Math.random()<e}function o(e,t,n,o,i,s){a(e)&&r(t,n,o,i,s)}n.r(t),n.d(t,"statlogsValueEvent",(function(){return r})),n.d(t,"randEnabled",(function(){return a})),n.d(t,"statlogsProbValueEvent",(function(){return o}))},"2Oix":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},r=void 0===n.additionalDigits?2:Number(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date)return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var c=a(e),l=o(c.date,r),d=l.year,f=l.restDateString,g=i(f,d);if(g){var h,p=g.getTime(),m=0;return c.time&&(m=s(c.time)),c.timezone?h=u(c.timezone):(h=new Date(p+m).getTimezoneOffset(),h=new Date(p+m+6e4*h).getTimezoneOffset()),new Date(p+m+6e4*h)}return new Date(e)};var r={dateTimeDelimeter:/[T ]/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-])(\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function a(e){var t,n={},a=e.split(r.dateTimeDelimeter);if(r.plainTime.test(a[0])?(n.date=null,t=a[0]):(n.date=a[0],t=a[1]),t){var o=r.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}function o(e,t){var n,a=r.YYY[t],o=r.YYYYY[t];if(n=r.YYYY.exec(e)||o.exec(e)){var i=n[1];return{year:parseInt(i,10),restDateString:e.slice(i.length)}}if(n=r.YY.exec(e)||a.exec(e)){var s=n[1];return{year:100*parseInt(s,10),restDateString:e.slice(s.length)}}return{year:null}}function i(e,t){if(null===t)return null;var n,a,o;if(0===e.length)return(a=new Date(0)).setUTCFullYear(t),a;if(n=r.MM.exec(e))return a=new Date(0),o=parseInt(n[1],10)-1,a.setUTCFullYear(t,o),a;if(n=r.DDD.exec(e)){a=new Date(0);var i=parseInt(n[1],10);return a.setUTCFullYear(t,0,i),a}if(n=r.MMDD.exec(e)){a=new Date(0),o=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return a.setUTCFullYear(t,o,s),a}return(n=r.Www.exec(e))?c(t,parseInt(n[1],10)-1):(n=r.WwwD.exec(e))?c(t,parseInt(n[1],10)-1,parseInt(n[2],10)-1):null}function s(e){var t;return(t=r.HH.exec(e))?parseFloat(t[1].replace(",","."))%24*36e5:(t=r.HHMM.exec(e))?parseInt(t[1],10)%24*36e5+6e4*parseFloat(t[2].replace(",",".")):(t=r.HHMMSS.exec(e))?parseInt(t[1],10)%24*36e5+6e4*parseInt(t[2],10)+1e3*parseFloat(t[3].replace(",",".")):null}function u(e){var t,n;return(t=r.timezoneZ.exec(e))?0:(t=r.timezoneHH.exec(e))?(n=60*parseInt(t[2],10),"+"===t[1]?-n:n):(t=r.timezoneHHMM.exec(e))?(n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n):0}function c(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var a=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+a),r}e.exports=t.default},"2cCT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n){var r=n||{},a=r.type?String(r.type):t;return e[a]||e[t]}},e.exports=t.default},"3xsS":function(e,t,n){"use strict";n.r(t),n.d(t,"onGroupLeaveDonutConfirmation",(function(){return u})),n.d(t,"donutDebugGroupActions",(function(){return d})),n.d(t,"initGroupMenuDonut",(function(){return _}));var r=n("EasH"),a=n("4+be"),o=n("t7n3"),i=n("v+DW"),s=n("zxIV"),u=function(e,t,n,u){var c,l,d,f=Object(o.getTemplate)("groupLeaveConfirmationKeptSubscription"),g=Object(r.showFastBox)({title:Object(a.getLang)("global_warning")},f,Object(a.getLang)("group_leave_group"),(function(){var r,a=null===(r=g.bodyNode)||void 0===r?void 0:r.querySelector('[data-section-ref="donut_keep_subscription"]'),o=!(!a||Object(i.isChecked)(a))||void 0;e.leave(t,n,u,void 0,void 0,{donut_cancel_subscription:o}),g.hide()}),Object(a.getLang)("global_cancel")),h=null===(c=g.bodyNode)||void 0===c?void 0:c.querySelector('[data-section-ref="donut_keep_subscription"]'),p=null===(l=g.bodyNode)||void 0===l?void 0:l.querySelector('[data-section-ref="donut_cancellation_warning"]'),m=function(){Object(s.toggle)(p,!Object(i.isChecked)(h))};null===(d=null==h?void 0:h.addEventListener)||void 0===d||d.call(h,"click",(function(e){var t=e.target;Object(i.checkbox)(t),m()})),m()},c=n("Egk5"),l=n("3oLO"),d={toggleDntrStatus:function(e,t,n,r){var a,o,i,s,u,d;l.ajax.post("al_groups.php",{act:"a_toggle_dntr_status",status:n?1:0,oid:window.cur.oid,hash:t},{onDone:function(){window.nav.reload()},showProgress:null===(i=null===(o=null===(a=window.Page)||void 0===a?void 0:a.actionsDropdownLock)||void 0===o?void 0:o.pbind)||void 0===i?void 0:i.call(o,e),hideProgress:null===(d=null===(u=null===(s=window.Page)||void 0===s?void 0:s.actionsDropdownUnlock)||void 0===u?void 0:u.pbind)||void 0===d?void 0:d.call(u,e)}),Object(c.cancelEvent)(r)},donutResetSubscription:function(e,t,n){var r,a,o,i,s,u;l.ajax.post("al_groups.php",{act:"a_donut_reset_subscription",owner_id:window.cur.oid,hash:t},{onDone:function(){window.nav.reload()},showProgress:null===(o=null===(a=null===(r=window.Page)||void 0===r?void 0:r.actionsDropdownLock)||void 0===a?void 0:a.pbind)||void 0===o?void 0:o.call(a,e),hideProgress:null===(u=null===(s=null===(i=window.Page)||void 0===i?void 0:i.actionsDropdownUnlock)||void 0===s?void 0:s.pbind)||void 0===u?void 0:u.call(s,e)}),Object(c.cancelEvent)(n)},donutForcePayment:function(e,t,n){var r,a,o,i,s,u;l.ajax.post("al_groups.php",{act:"a_donut_force_payment",owner_id:window.cur.oid,hash:t},{onDone:function(){window.nav.reload()},showProgress:null===(o=null===(a=null===(r=window.Page)||void 0===r?void 0:r.actionsDropdownLock)||void 0===a?void 0:a.pbind)||void 0===o?void 0:o.call(a,e),hideProgress:null===(u=null===(s=null===(i=window.Page)||void 0===i?void 0:i.actionsDropdownUnlock)||void 0===s?void 0:s.pbind)||void 0===u?void 0:u.call(s,e)}),Object(c.cancelEvent)(n)}},f=n("BTjd"),g=n("aYHU"),h=n("vkK6"),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},m=function(e){var t,n=e.target;if(Object(c.checkEvent)(e)||!(n instanceof HTMLElement))return!1;var u=null===(t=Object(h.getActionData)(n))||void 0===t?void 0:t.actionParams;if(u)var l=Object(o.getTemplate)("groupCancelSubscriptionBox"),d=Object(r.showFastBox)({title:Object(a.getLang)("groups_donut_cancel_subscription_dialog_title")},l,Object(a.getLang)("groups_donut_cancel_subscription_dialog_button_confirm"),(function(){var e,t,n;e=d.bodyNode,Object(s.hide)(e.querySelector('[data-section-ref="donut-cancel-subscription-error"]')),(t=u,n={showProgress:i.lockButton.bind(null,d.btns.ok[0]),hideProgress:i.unlockButton.bind(null,d.btns.ok[0])},Object(g.ajaxPostP)("/al_groups.php",p({act:"a_donut_cancel_subscription"},t),n)).then((function(){d.hide(),window.nav.reload()}),(function(e){!function(e,t){var n=e.querySelector('[data-section-ref="donut-cancel-subscription-error"]'),r=null==n?void 0:n.querySelector(".msg_text");n&&r&&t&&(r.innerHTML=t,Object(s.show)(n))}(d.bodyNode,function(e){return"string"==typeof(null==e?void 0:e.message)?null==e?void 0:e.message:"string"==typeof e?e:Object(a.getLang)("global_error_occured")}(e))}))}),Object(a.getLang)("groups_donut_cancel_subscription_dialog_button_discard"))},_=function(e){var t,n=null===(t=e.container)||void 0===t?void 0:t.parentElement;return n?Object(f.default)(n,'[data-onclick="showDonutUnsubBox"]',"click",m).destroy:function(){}}},"4cFO":function(e,t,n){"use strict";n.r(t);n("VRzm"),n("Btvt");var r=n("BJj/"),a=n("ERyv");function o(e,t){if(!t)return ls.get(e);ls.set(e,t)}function i(e){try{var t={};return Error.captureStackTrace(t,e),t.stack}catch(e){return""}}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(r.debounce)(o,300),s=extend({},e),u=[],c=[];return t.store&&(s=ls.get(t.key)||s),{get:()=>s,set(e){var r=Object(a.isWeirdLogging)()?i(this.set):null;return e(s).then(e=>(s=e,t.store&&n(t.key,e),this.emit(),this)).catch(e=>Object(a.imWeirdCatch)("store_set_catch",e,{stack:r}))},setState(e){return this.set(t=>(t=extend(t,e),this.emit(),Promise.resolve(t)))},stash(){u.push(s),s=extend({},e),this.emit()},reset(){s=extend({},e),this.emit()},unmount(){s={},e=!1,c=[]},pop(){u.length>0&&(s=u.pop(),this.emit())},emit(){c.length>0&&c.forEach(e=>e(this))},subscribe(e){-1===c.indexOf(e)&&c.push(e)},unsubscribe(e){c=c.filter(t=>t!==e)},mutate(e){e(s),t.store&&n(t.key,s),this.emit()}}}},"53aN":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),a=l(n("17x9")),o=l(n("XMEW")),i=l(n("BUpX")),s=n("u/mt"),u=l(n("TSYQ")),c=l(n("aoKj"));function l(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_(this,b(t).call(this,e))).state={focusedRange:[(0,s.findNextRangeIndex)(e.ranges),0]},n.styles=(0,s.generateStyles)([c.default,e.classNames]),n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.state.focusedRange;return r.default.createElement("div",{className:(0,u.default)(this.styles.dateRangePickerWrapper,this.props.className)},r.default.createElement(i.default,p({focusedRange:t,onPreviewChange:function(t){return e.dateRange.updatePreview(t)}},this.props,{range:this.props.ranges[t[0]],className:void 0})),r.default.createElement(o.default,p({onRangeFocusChange:function(t){return e.setState({focusedRange:t})},focusedRange:t},this.props,{ref:function(t){return e.dateRange=t},className:void 0})))}}])&&m(n.prototype,a),l&&m(n,l),t}(r.Component);y.defaultProps={},y.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.default.propTypes,{},i.default.propTypes,{className:a.default.string});var O=y;t.default=O},"6Ysw":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStaticRanges=u,t.defaultInputRanges=t.defaultStaticRanges=void 0;var r=n("b/SL");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={startOfWeek:(0,r.startOfWeek)(new Date),endOfWeek:(0,r.endOfWeek)(new Date),startOfLastWeek:(0,r.startOfWeek)((0,r.addDays)(new Date,-7)),endOfLastWeek:(0,r.endOfWeek)((0,r.addDays)(new Date,-7)),startOfToday:(0,r.startOfDay)(new Date),endOfToday:(0,r.endOfDay)(new Date),startOfYesterday:(0,r.startOfDay)((0,r.addDays)(new Date,-1)),endOfYesterday:(0,r.endOfDay)((0,r.addDays)(new Date,-1)),startOfMonth:(0,r.startOfMonth)(new Date),endOfMonth:(0,r.endOfMonth)(new Date),startOfLastMonth:(0,r.startOfMonth)((0,r.addMonths)(new Date,-1)),endOfLastMonth:(0,r.endOfMonth)((0,r.addMonths)(new Date,-1))},s={range:{},isSelected:function(e){var t=this.range();return(0,r.isSameDay)(e.startDate,t.startDate)&&(0,r.isSameDay)(e.endDate,t.endDate)}};function u(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},s,{},e)}))}var c=u([{label:"Today",range:function(){return{startDate:i.startOfToday,endDate:i.endOfToday}}},{label:"Yesterday",range:function(){return{startDate:i.startOfYesterday,endDate:i.endOfYesterday}}},{label:"This Week",range:function(){return{startDate:i.startOfWeek,endDate:i.endOfWeek}}},{label:"Last Week",range:function(){return{startDate:i.startOfLastWeek,endDate:i.endOfLastWeek}}},{label:"This Month",range:function(){return{startDate:i.startOfMonth,endDate:i.endOfMonth}}},{label:"Last Month",range:function(){return{startDate:i.startOfLastMonth,endDate:i.endOfLastMonth}}}]);t.defaultStaticRanges=c;var l=[{label:"days up to today",range:function(e){return{startDate:(0,r.addDays)(i.startOfToday,-1*(Math.max(Number(e),1)-1)),endDate:i.endOfToday}},getCurrentValue:function(e){return(0,r.isSameDay)(e.endDate,i.endOfToday)?e.startDate?(0,r.differenceInCalendarDays)(i.endOfToday,e.startDate)+1:"∞":"-"}},{label:"days starting today",range:function(e){var t=new Date;return{startDate:t,endDate:(0,r.addDays)(t,Math.max(Number(e),1)-1)}},getCurrentValue:function(e){return(0,r.isSameDay)(e.startDate,i.startOfToday)?e.endDate?(0,r.differenceInCalendarDays)(e.endDate,i.startOfToday)+1:"∞":"-"}}];t.defaultInputRanges=l},"6ZU5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("sCib")),a=s(n("UX9e")),o=s(n("loZk")),i=s(n("WtjO"));function s(e){return e&&e.__esModule?e:{default:e}}var u={ordinalNumbers:(0,o.default)(/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i),ordinalNumber:i.default,weekdays:(0,r.default)({narrow:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,short:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб)\.?/i,long:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},"long"),weekday:(0,a.default)({any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},"any"),months:(0,r.default)({short:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,long:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},"long"),month:(0,a.default)({any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},"any"),timesOfDay:(0,r.default)({long:/^(ноч[иь]|утр[ао]|дня|день|вечера?)/i},"long"),timeOfDay:(0,a.default)({any:[/^(н|у)/i,/^(д|в)/i]},"any")};t.default=u,e.exports=t.default},"6aSF":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),a=(n("17x9"),n("+/AQ")),o=n("ZxpX");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}class u extends r.Component{constructor(){super(...arguments),this.getWrapperRef=e=>{this.wrapper=e}}componentDidMount(){var e=this.props,t=e.isNative,n=e.isShadows,r=e.neverHide,o=e.onScroll;this.scroller||(this.scroller=Object(a.createScroll)(this.wrapper,{shadows:n,nativeScroll:t,hidden:!r,onScroll:o}))}componentDidUpdate(){this.scroller.update()}componentWillUnmount(){this.scroller.destroy(),this.scroller=null}render(){var e=this.props,t=e.children,n=(e.isNative,e.isShadows,e.neverHide,e.className),a=void 0===n?"":n,u=s(e,["children","isNative","isShadows","neverHide","className"]);return r.createElement("div",i({},u,{className:Object(o.classNames)("Scroll",a),ref:this.getWrapperRef}),t)}}u.defaultProps={isNative:!1,isShadows:!1,neverHide:!1,onScroll:null}},"6krn":function(e,t,n){"use strict";n.r(t),n.d(t,"getLang",(function(){return i}));var r=n("nAFc"),a=n("4+be"),o={};function i(e,t,n){void 0===t&&(t=!1);var i="number"==typeof t,s=t||i,u=e+(s?".raw":"");if(void 0===o[u]){var c=s?Object(a.getLang)(e,"raw"):Object(a.getLang)(e);"string"==typeof c?o[u]=Object(r.decodeHTMLEntities)(c):Array.isArray(c)&&(o[u]=c.map(r.decodeHTMLEntities))}if(i){var l=t;return Object(a.langNumeric)(l,o[u],n)}return o[u]||""}t.default={getLang:i}},"6raB":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),a=(n("17x9"),n("ZxpX")),o=n("Q3mP"),i=n("Ht+d");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}class c extends r.Component{constructor(e){super(e),this.needRecalcSize=!1,this.state={}}render(){var e=this.props,t=e.className,n=e.loading,c=e.children,l=u(e,["className","loading","children"]),d=Object(a.classNames)("ButtonWithProgress",{"ButtonWithProgress--loading":n},t),f=["primary","positive"].some(t=>t===e.appearance);return r.createElement(i.default,s({},l,{className:d}),r.createElement("span",{className:"ButtonWithProgress__content"},c),n&&r.createElement(o.default,{inverted:f,className:"ButtonWithProgress__progress"}))}}c.defaultProps={appearance:"primary",size:"m",wide:!1,loading:!1}},"754W":function(e,t,n){"use strict";n.r(t);n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),a=(n("17x9"),n("ZxpX"));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.default=e=>{var t=e.children,n=e.className,s=i(e,["children","className"]),u=Object(a.classNames)("LinkButton",n),c=o({},s,{onMouseDown:e=>{e.preventDefault(),s.onMouseDown&&s.onMouseDown(e)}});return r.createElement("button",o({},c,{className:u}),t)}},"7juf":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return H})),n.d(t,"SimilarGroupsEventLog",(function(){return B}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("91GP"),n("KKXr");var r=n("Egk5"),a=n("zxIV"),o=n("lXE5"),i=n("gdug"),s=n("t7n3"),u=n("v+DW"),c=n("q1tI"),l=n("i8i4"),d=n("Xu7z"),f=n("4+be"),g=n("FWc3"),h=n("6krn"),p=n("EasH"),m=n("Xrg9");function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y="groups_edit_event_log",O="groups_edit_event_log",w=/act=a_event_log_extended/i,T=()=>{for(var e=ge("groups_edit_action_log_datepicker"),t=Object(a.domPN)(e),n=[],i=0;i<13;i++)n.push(Object(f.getLang)("month"+i+"_of"));function u(e){var t=e.startDate,r=e.endDate,a=Object(f.langDate)(t,Object(f.getLang)("global_short_date","raw"),0,n,!1),o=Object(f.langDate)(r,Object(f.getLang)("global_short_date","raw"),0,n,!1),i=Object(f.langDate)(t,["","{day} {month} {year}"],0,n,!1),s=Object(f.langDate)(r,["","{day} {month} {year}"],0,n,!1),u=Object(f.langDate)(t,["","{day} {month}"],0,n,!1),c=Object(f.langDate)(r,["","{day} {month}"],0,n,!1);return/\d/.test(a[0])||/\d/.test(o[0])?t.getYear()!==r.getYear()?i===s?i:i+" - "+s:u===c?u:u+" - "+c:a===o?a:a+" - "+o}var g=Object(s.intval)(Object(a.domData)(e,"start_date")),p=Object(s.intval)(Object(a.domData)(e,"end_date")),m={startDate:new Date,endDate:new Date};g&&p&&(m.startDate=new Date(1e3*g),m.endDate=new Date(1e3*p));var _=Object(f.getLang)("groups_edit_filter_all_time");nav.objLoc.start_date&&nav.objLoc.end_date&&(_=u(m)),val(e,_);var b=ce("div",{id:"groups_edit_action_log_datepicker_container"});Object(r.addEvent)(b,"click",e=>{Object(s.isFunction)(e.target.onclick)||window.cancelEvent(e)}),document.body.appendChild(b);var y=()=>{var t=e.getBoundingClientRect().height,n=e.getBoundingClientRect().left,r=e.getBoundingClientRect().top+Object(o.scrollGetY)();setStyle(b,{top:r+t+16+"px",left:n-110+"px",position:"absolute"})},O=!1;function w(t){var n=t.startDate,r=t.endDate;m={startDate:n,endDate:r},val(e,u(t)),window.GroupsEditEventLog.filterDate(m),l.unmountComponentAtNode(b),O=!1}var T=()=>{l.unmountComponentAtNode(b),O=!1},j=()=>{m={startDate:null,endDate:null},val(e,Object(f.getLang)("groups_edit_filter_all_time")),window.GroupsEditEventLog.filterDate(m),l.unmountComponentAtNode(b),O=!1};Object(r.addEvent)(t,"click",()=>{var e,t;O?T():(y(),e=b,t={onClose:j,onDone:w,ranges:{range1:m},minDate:new Date(2007,1)},l.render(c.createElement(d.default,v({closeText:Object(h.getLang)("groups_edit_filter_clear_date"),className:"groups_edit_datepicker",maxDate:new Date},t)),e),O=!0)});var E=n=>{n.target===b||n.target===e||n.target===t||hasClass(n.target,"Panel__arrow--plus")||hasClass(n.target,"Panel__arrow--minus")||T()};Object(r.addEvent)(window,"click",E),Object(r.addEvent)(window,"resize",y),Object(r.addEvent)(window,"scroll",E),cur.destroy.push(()=>Object(r.removeEvent)(window,"click",E)),cur.destroy.push(()=>Object(r.removeEvent)(window,"resize",y)),cur.destroy.push(()=>Object(r.removeEvent)(window,"scroll",E)),cur.destroy.push(()=>D())};var j=(e,t,n)=>(Object(r.cancelEvent)(n),function(e){var t="groups"+e+"Filter";return window.cur[t]||{}}(e).goToLink(t,n,!0),!1),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ge(O),r=clone(nav.objLoc);Object(s.each)(e,(e,t)=>{r[e]=t});var o=clone(r);delete o[0],delete o.act,cur.disableAutoMore=!0,n.xhr&&(n.xhr.abort(),delete n.xhr),n.xhr=ajax.post(R()+"?act=event_log",extend(o,{filter:1}),{showProgress(){Object(s.isFunction)(t.showProgress)?t.showProgress():S()},hideProgress(){Object(s.isFunction)(t.hideProgress)?t.hideProgress():M()},onDone(e){if(t.isMore){if(!e)return void I(!1);Object(a.sech)(e).forEach(e=>n.appendChild(e)),Object(s.isFunction)(t.onDone)&&t.onDone()}else nav.setLoc(r),scrollToTop(0),val(n,e);cur.disableAutoMore=!1,L(),window.tooltips&&tooltips.destroyAll(),t.clearAjaxCache&&D(),t.noHideItems&&F()}})},D=()=>{Object(s.each)(window.ajaxCache,e=>{w.test(e)&&delete window.ajaxCache[e]})},C=e=>`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}`,S=()=>{show(y+"_loader"),hide(y+"_extended_button")},M=()=>{hide(y+"_loader"),show(y+"_extended_button")},k=y+"_more",I=e=>Object(a.toggle)(k,e),P=()=>{if(x(),!i.browser.mobile&&!cur.disableAutoMore){var e=document.documentElement,t=window.innerHeight||e.clientHeight||bodyNode.clientHeight,n=Object(o.scrollGetY)(),r=ge(k);Object(a.isVisible)(r)&&!Object(u.isButtonLocked)(r)&&n+3*t>r.offsetTop&&r.onclick()}},L=()=>{var e,t;e=Object(a.domLC)(ge(O)),t=Object(a.domData)(e,"date"),I(!!t),P(),x()},A=()=>{Object(r.removeEvent)(window,"scroll",P),Object(r.removeEvent)(window,"resize",P)},N=e=>{var t="";return e.forEach(e=>{t+=(e=>{var t="";e.fields.forEach(e=>{e.text?t+=Object(s.getTemplate)("eventLogItemFieldText",e):e.title?t+=Object(s.getTemplate)("eventLogItemFieldTitle",e):t+=Object(s.getTemplate)("eventLogItemField",e)});var n="";e.counter>1&&(n=Object(s.getTemplate)("eventLogItemRowCounter",{counter:e.counter}));var r="";e.photo&&(r=Object(s.getTemplate)("eventLogItemRowPhoto",{link:e.link,photo:e.photo,counter:n}));var a=e.id+(e.additional?"_main":""),o=Object(s.getTemplate)("eventLogItemRow",{date:e.date,row_id:a,actions:e.actions,fields:t,photo:r});return e.additional&&(o=Object(s.getTemplate)("eventLogItem",{id:e.id,item:o,additional:e.additional})),o})(e)}),t},x=()=>{var e=ge(y);if(e){var t=Object(o.scrollGetY)()+42,n=ge(y+"_controls"),r=window.innerHeight;if(e.scrollHeight<=r)Object(a.toggleClass)(n,y+"_controls_fixed",!1);else{var i=geByClass("_groups_edit_event_log_title",e),u=Object(a.getXY)(Object(a.domPN)(n))[1];if(Object(a.toggleClass)(n,y+"_controls_fixed",u<=t),i&&i.length){var c=!1,l=!1;for(var d in t+=47,i){if(Object(a.getXY)(i[d])[1]>=t)break;c=i[d];var f=Object(s.intval)(d)+1;l=!!i[f]&&Object(a.getXY)(i[f])[1]-t}var g=(e,t)=>{Object(a.toggleClass)(e,y+"_title_fixed",t),setStyle(e,{left:t?Object(a.getXY)(Object(a.domPN)(e))[0]:null}),!1===t&&Object(a.removeClass)(e,y+"_title_animating")};if(c){var h=Object(a.domFC)(c);c===e.fixedTitleWrap?setTimeout(()=>g(e.fixedTitle,!0)):(e.fixedTitle&&g(e.fixedTitle,!1),e.fixedTitle=h,g(h,!0),e.fixedTitleWrap=c);var p=!1!==l?l-48:0;p>=0&&(p=0),Object(s.intval)(Object(a.getStyle)(e.fixedTitle,"top"))!==p?(setStyle(e.fixedTitle,{top:p}),Object(a.addClass)(e.fixedTitle,y+"_title_animating")):Object(a.removeClass)(e.fixedTitle,y+"_title_animating")}else e.fixedTitle&&(g(e.fixedTitle,!1),e.fixedTitle=!1,e.fixedTitleWrap=!1)}}}},R=()=>nav.objLoc[0],F=()=>{var e=ge(O),t=JSON.parse(Object(a.domData)(e,"toggled")||"{}")||{};t&&(Object(s.each)(t,e=>{ge(`${y}_item_wrap${e}`)?window.GroupsEditEventLog.toggleItems(e):delete t[e]}),Object(a.domData)(e,"toggled",JSON.stringify(t)))};class H{showMore(){if(nav.objLoc.start_date&&nav.objLoc.end_date)I(!1);else{var e=Object(a.domLC)(ge(O)),t=Object(a.domData)(e,"date");if(!t)return I(!1);E({more_from:t},{showProgress:()=>Object(u.lockButton)(k),hideProgress:()=>Object(u.unlockButton)(k),isMore:!0,onDone(){var e=Object(a.domLC)(ge(O));Object(a.domData)(e,"date")===t&&I(!1)}})}}showToggleItemsTitle(e,t){var n=Object(a.domPN)(Object(a.domPN)(e)),r="";if(hasClass(n,y+"_item_wrap_active")){r=Object(f.getLang)("groups_edit_filter_hide");var o=geByClass1(t+"_additional",n);JSON.parse(Object(a.domData)(o,"additional")).length>1&&(r=Object(f.getLang)("groups_edit_filter_hide_all"))}else r=Object(f.getLang)("groups_edit_filter_more");Object(g.showTitle)(e,r,[-8,1,1],{needLeft:!0,className:y+"_tooltip_item"})}showExtendedButtonTitle(e){var t=Object(s.intval)(Object(a.domData)(e,"mode")),n="";1===t?n=Object(f.getLang)("groups_edit_action_log_simple_tooltip"):0===t&&(n=Object(f.getLang)("groups_edit_action_log_extended_tooltip")),Object(g.showTitle)(e,n,[-16,7,1],{needLeft:!0,className:y+"_tooltip"})}toggleItems(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=ge(`${y}_item_wrap${e}`);if(t&&t.target&&!n){var i=t.target;if(geByClass1(e+"_toggle",o)!==i&&("a"===i.nodeName.toLowerCase()||i.onclick||i.mousedown||i.mouseup||hasClass(i,"_no_toggle")))return;Object(r.cancelEvent)(t)}window.tooltips&&tooltips.destroyAll();var c=y+"_item_wrap_active",l=y+"_item_wrap_loading",d=y+"_item_wrap_focused",f=geByClass1(e+"_more",o),g=geByClass1(e+"_additional",o),h=geByClass1(e+"_content",o),p=JSON.parse(Object(a.domData)(g,"additional")),m=p.length,_=geByClass1(e+"_more_loader",o);if(!_.loading)if(f.inited||(f.inited=!0,Object(r.addEvent)(f,"click",()=>this.toggleItems(e,!1,!0))),!n&&hasClass(Object(a.domPN)(o),y+"_list")&&((e,t)=>{var n=ge(O),r=JSON.parse(Object(a.domData)(n,"toggled")||"{}")||{};t?r[e]||(r[e]=1):r[e]&&delete r[e],Object(a.domData)(n,"toggled",JSON.stringify(r))})(e,!hasClass(o,c)),!hasClass(o,c)||n){if(hasClass(o,l))return;g.page||(g.page=0);var b=p[g.page],v=()=>{var e=g.page<m;Object(a.toggle)(f,e),Object(a.toggle)(_,e)};v(),ajax.post(R()+"?act=a_event_log_extended",{hash:b[0],rows:JSON.stringify(b[1]),mode:Object(s.intval)(nav.objLoc.mode)},{cache:1,showProgress:()=>{n?(Object(u.showProgress)(_),_.loading=!0):Object(a.addClass)(o,l)},hideProgress:()=>{n?(Object(u.hideProgress)(_),_.loading=!1):Object(a.removeClass)(o,l)},onDone:e=>{Object(a.addClass)(o,c),g.page++,v(),isArray(e)&&(e=N(e)),n?Object(a.sech)(e).forEach(e=>h.appendChild(e)):(val(h,e),Object(a.addClass)(o,d),o.timeout&&(clearTimeout(o.timeout),delete o.timeout),o.timeout=setTimeout(()=>Object(a.removeClass)(o,d),1500))}})}else g.page=0,Object(a.removeClass)(o,c),Object(a.removeClass)(o,l)}toggleExtended(e){var t=1===Object(s.intval)(Object(a.domData)(e,"mode"))?0:1,n=y+"_extended_button_simple";1===t?Object(a.addClass)(e,n):Object(a.removeClass)(e,n),Object(a.domData)(e,"mode",t),E({mode:t},{clearAjaxCache:!0,noHideItems:!0})}filterDate(e){var t=e.startDate?C(e.startDate):null,n=e.endDate?C(e.endDate):null;E({start_date:t,end_date:n})}filterRole(e,t,n){return E({role:n}),j("Role",e,t)}filterActionType(e,t,n){return E({action_type:n}),j("ActionType",e,t)}viewPhoto(e){var t=`<img src="${_(e,1)[0]}" width="100%" height="auto" />`;Object(p.showFastBox)({title:Object(f.getLang)(y+"_photo_view_title"),width:700},t)}init(){T(),Object(r.addEvent)(window,"scroll",P),Object(r.addEvent)(window,"resize",P),cur.destroy.push(A),L()}restoreItem(e,t){if(e.loading)return!1;var n=Object(a.domPN)(e),r=geByClass1("_action_loader",n),o=Object(a.domData)(e,"action"),i=Object(a.domData)(e,"hash"),c=Object(s.intval)(nav.objLoc.mode),l=ge(`${y}_item_row${t}`);ajax.post(R()+"?act=a_restore_event_log_item",{action:o,hash:i,mode:c},{showProgress:()=>{e.loading=!0,Object(u.showProgress)(r)},hideProgress:()=>{e.loading=!1,Object(u.hideProgress)(r)},onDone(e){D();var t=se(N(e));domReplaceEl(l,t)}})}}class B{constructor(e){this.groupId=e,this.sendLogsTimeout=null,this.sendLogsProcess=!1,this.localStorageKey="groups_recommends",this.logsDataDelimiter="|"}sendLogs(){clearTimeout(this.sendLogsTimeout),this.sendLogsTimeout=setTimeout(this.sendLogsAccept.bind(this),3e3)}sendLogsAccept(){if(!this.sendLogsProcess){var e=this.getLogs(!0);e.length&&(this.sendLogsProcess=!0,this.clearLogs(),ajax.post("al_groups.php",{act:"a_recommends_logs",logs:e},{onDone:()=>{this.sendLogsProcess=!1},onFail:()=>(this.restoreLogs(e),this.sendLogsProcess=!1,!0)}))}}restoreLogs(e){var t=this.getLogs(),n=[...e.map(e=>e.split(this.logsDataDelimiter)),...t];m.default.set(this.localStorageKey,n)}getLogs(e){var t=m.default.get(this.localStorageKey)||[];return e&&(t=t.map(e=>e.join(this.logsDataDelimiter))),t}addLog(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=this.getLogs();o.push([this.groupId,e,t,n,r,a]),m.default.set(this.localStorageKey,o),this.sendLogs()}clearLogs(){m.default.remove(this.localStorageKey)}}},"86+7":function(e,t,n){"use strict";n.r(t),n.d(t,"oCacheExists",(function(){return a})),n.d(t,"oCacheGet",(function(){return o})),n.d(t,"oCacheAdd",(function(){return i}));n("KKXr");var r=n("aong");function a(e,t){return t in Object(r.unpackStore)(e).oCache}function o(e,t){var n=Object(r.unpackStore)(e).oCache[t];return n&&!n._n&&(!function(e){if(!e.first_name){var t=e.name.split(" ",2);e.first_name=t[0],e.short_name=t[1]?t[0]+" "+t[1].substr(0,1)+".":t[0]}e.inv_name||(e.inv_name=e.name),e.kick_name||(e.kick_name=e.inv_name)}(n),n._n=1),n}function i(e,t){var n=Object(r.unpackStore)(e);n.oCache||(n.oCache={}),t.id&&(n.oCache[t.id]=t)}},"8fa4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){return r[e]};var r={lastWeek:"[last] dddd [at] LT",yesterday:"[yesterday at] LT",today:"[today at] LT",tomorrow:"[tomorrow at] LT",nextWeek:"dddd [at] LT",other:"L"};e.exports=t.default},As6E:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));n("91GP"),n("rGqo"),n("Btvt");var r=n("q1tI"),a=n("i8i4"),o=(n("17x9"),n("ZxpX")),i=n("clTp");class s extends r.Component{constructor(e){super(e),this.onClick=()=>{if(!this.state.dropdown||this.state.dropdown.removed){var e=this.props,t=e.text,n=e.position,r=e.align,a=e.marginTop,o=e.marginLeft,s=Object(i.default)(this.el);this.update({text:t,position:n,align:r,rect:s,marginTop:a,marginLeft:o})}else this.update()},this.onMouseEnter=e=>{this.callerHovered=!0,this.timeouts.appear=setTimeout(()=>{if(this.el&&this.callerHovered){var e=this.props,t=e.position,n=e.align,r=e.marginTop,a=e.marginLeft,o=Object(i.default)(this.el);this.update({position:t,align:n,rect:o,marginTop:r,marginLeft:a})}},80)},this.onMouseLeave=e=>{this.callerHovered=!1,this.timeouts.callerDisappear=setTimeout(()=>{this.callerHovered||this.hovered||this.update()},250)},this.onDropdownMouseEnter=()=>{"hover"===this.props.trigger&&(this.hovered=!0)},this.onDropdownMouseLeave=e=>{"hover"===this.props.trigger&&(this.hovered=!1,this.timeouts.disappear=setTimeout(()=>{this.callerHovered||this.hovered||this.update()},250))},this.onDocumentClick=e=>{!this.state.dropdown||this.state.dropdown.removed||this.el.contains(e.target)||this.update()},this.onResize=e=>{if(this.state.dropdown&&!this.state.dropdown.removed){var t=this.props,n=t.text,r=t.position,a=t.align,o=t.marginTop,s=t.marginLeft,u=Object(i.default)(this.el);this.update({text:n,position:r,align:a,rect:u,marginTop:o,marginLeft:s})}},this.onTransitionEnd=e=>{"visibility"===e.propertyName&&this.state.dropdown&&this.state.dropdown.removed&&this.setState({dropdown:void 0})},this.onItemClick=(e,t)=>{t.separator||(this.update(),t.onClick(e))},this.state={},this.timeouts={}}componentDidMount(){this.el=a.findDOMNode(this),"click"===this.props.trigger?(this.el.addEventListener("click",this.onClick),document.addEventListener("mousedown",this.onDocumentClick),window.addEventListener("resize",this.onResize)):(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave))}componentWillUnmount(){Object.keys(this.timeouts).forEach(e=>{clearTimeout(this.timeouts[e])}),"click"===this.props.trigger?(this.el.removeEventListener("click",this.onClick),document.removeEventListener("mousedown",this.onDocumentClick),window.removeEventListener("resize",this.onResize)):(this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",this.onMouseLeave)),this.defaultNode&&(this.defaultNode.parentNode.removeChild(this.defaultNode),delete this.defaultNode)}update(e){if(!e)return this.setState({dropdown:Object.assign({},this.state.dropdown,{removed:!0})});var t=e.position,n=e.align,r=e.rect,a=e.marginTop,o=e.marginLeft,i=r.left,s=r.top;switch(t){case"t":i+=.5*r.width;break;case"r":i+=r.width,s+=.5*r.height;break;case"b":i+=.5*r.width,s+=r.height;break;case"l":s+=.5*r.height}i=Math.round(i+o),s=Math.round(s+a),this.setState({dropdown:{position:t,align:n,x:i,y:s}})}renderDropdown(){if(!this.state.dropdown)return null;var e=this.state.dropdown,t=e.x,n=e.y,a=e.position,i=e.align,s=e.removed,u=Object(o.classNames)("Dropdown","Dropdown--"+a,{"Dropdown--removed":!!s,["Dropdown--align-"+i]:"t"===a||"b"===a},this.props.className);return r.createElement("div",{className:u,style:{top:n,left:t},onTransitionEnd:e=>this.onTransitionEnd(e),onMouseEnter:this.onDropdownMouseEnter,onMouseLeave:this.onDropdownMouseLeave},r.createElement("ul",{className:"Dropdown__in"},this.props.data.map((e,t)=>r.createElement("li",{className:Object(o.classNames)("Dropdown__item",{Dropdown__item_separator:e.separator}),onClick:t=>this.onItemClick(t,e),key:void 0!==e.id?e.id:t},e.text))))}render(){var e=this.renderDropdown();return e?(this.defaultNode||"undefined"==typeof window||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),r.createElement(r.Fragment,null,this.props.children,a.createPortal(e,this.defaultNode))):this.props.children}}s.defaultProps={position:"b",align:"center",marginTop:0,marginLeft:0,trigger:"click",className:""}},"BN/X":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),a=(n("17x9"),n("ZxpX"));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}class s extends r.Component{render(){var e=this.props,t=e.hovered,n=e.className,s=e.children,u=i(e,["hovered","className","children"]),c=Object(a.classNames)("Link",{"Link--hovered":!!t},n);return this.props.href?r.createElement("a",o({},u,{className:c}),s):r.createElement("span",o({},u,{className:c}),s)}}s.defaultProps={href:void 0,hovered:!1}},BTjd:function(e,t,n){"use strict";n.r(t);const r=new WeakMap;function a(e,t,n,a){var o,i;if(!e&&!r.has(t))return!1;const s=null!==(o=r.get(t))&&void 0!==o?o:new WeakMap;if(r.set(t,s),!e&&!r.has(t))return!1;const u=null!==(i=s.get(n))&&void 0!==i?i:new Set;s.set(n,u);const c=u.has(a);return e?u.add(a):u.delete(a),c&&e}t.default=function e(t,n,r,o,i){if("string"==typeof t&&(t=document.querySelectorAll(t)),"function"!=typeof t.addEventListener){const a=Array.prototype.map.call(t,t=>e(t,n,r,o,i));return{destroy(){a.forEach(e=>e.destroy())}}}const s=t,u=Boolean("object"==typeof i?i.capture:i),c=e=>{const t=e.target.closest(n);t&&(e.delegateTarget=t,e.currentTarget.contains(e.delegateTarget)&&o.call(s,e))},l=JSON.stringify({selector:n,type:r,capture:u}),d={destroy(){s.removeEventListener(r,c,i),a(!1,s,o,l)}};return a(!0,s,o,l)||s.addEventListener(r,c,i),d}},BUpX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),a=l(n("17x9")),o=l(n("aoKj")),i=n("6Ysw"),s=n("SslY"),u=l(n("0YX+")),c=l(n("TSYQ"));function l(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=p(t).call(this,e),n=!a||"object"!==f(a)&&"function"!=typeof a?m(r):a,b(m(n),"handleRangeChange",(function(e){var t=n.props,r=t.onChange,a=t.ranges,o=t.focusedRange,i=a[o[0]];r&&i&&r(b({},i.key||"range".concat(o[0]+1),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{},e)))})),n.state={rangeOffset:0,focusedInput:-1},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(a=[{key:"getRangeOptionValue",value:function(e){var t=this.props,n=t.ranges,r=void 0===n?[]:n,a=t.focusedRange,o=void 0===a?[]:a;if("function"!=typeof e.getCurrentValue)return"";var i=r[o[0]]||{};return e.getCurrentValue(i)||""}},{key:"getSelectedRange",value:function(e,t){var n=e.findIndex((function(e){return!(!e.startDate||!e.endDate||e.disabled)&&t.isSelected(e)}));return{selectedRange:e[n],focusedRangeIndex:n}}},{key:"render",value:function(){var e=this,t=this.props,n=t.headerContent,a=t.footerContent,i=t.onPreviewChange,s=t.inputRanges,l=t.staticRanges,d=t.ranges,f=t.renderStaticRangeLabel,g=t.rangeColors,h=t.className;return r.default.createElement("div",{className:(0,c.default)(o.default.definedRangesWrapper,h)},n,r.default.createElement("div",{className:o.default.staticRanges},l.map((function(t,n){var a,s=e.getSelectedRange(d,t),u=s.selectedRange,l=s.focusedRangeIndex;return a=t.hasCustomRendering?f(t):t.label,r.default.createElement("button",{type:"button",className:(0,c.default)(o.default.staticRange,b({},o.default.staticRangeSelected,Boolean(u))),style:{color:u?u.color||g[l]:null},key:n,onClick:function(){return e.handleRangeChange(t.range(e.props))},onFocus:function(){return i&&i(t.range(e.props))},onMouseOver:function(){return i&&i(t.range(e.props))},onMouseLeave:function(){i&&i()}},r.default.createElement("span",{tabIndex:-1,className:o.default.staticRangeLabel},a))}))),r.default.createElement("div",{className:o.default.inputRanges},s.map((function(t,n){return r.default.createElement(u.default,{key:n,styles:o.default,label:t.label,onFocus:function(){return e.setState({focusedInput:n,rangeOffset:0})},onBlur:function(){return e.setState({rangeOffset:0})},onChange:function(n){return e.handleRangeChange(t.range(n,e.props))},value:e.getRangeOptionValue(t)})}))),a)}}])&&h(n.prototype,a),i&&h(n,i),t}(r.Component);v.propTypes={inputRanges:a.default.array,staticRanges:a.default.array,ranges:a.default.arrayOf(s.rangeShape),focusedRange:a.default.arrayOf(a.default.number),onPreviewChange:a.default.func,onChange:a.default.func,footerContent:a.default.any,headerContent:a.default.any,rangeColors:a.default.arrayOf(a.default.string),className:a.default.string,renderStaticRangeLabel:a.default.func},v.defaultProps={inputRanges:i.defaultInputRanges,staticRanges:i.defaultStaticRanges,ranges:[],rangeColors:["#3d91ff","#3ecf8e","#fed14c"],focusedRange:[0,0]};var y=v;t.default=y},BxOC:function(e,t,n){"use strict";n.r(t),n.d(t,"post",(function(){return a})),n.d(t,"plainget",(function(){return o})),n.d(t,"plaingetCancelable",(function(){return i}));n("VRzm"),n("Btvt");var r=n("cGUQ");function a(e,t,n){return t&&(t.im_v=3),new Promise((r,a)=>{ajax.post(e,t,{timeout:n,onDone(){r.apply(null,[[...arguments]])},onFail(){return a.apply(null,arguments),!0}})})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i(e,t,n),a=r.request;return a}function i(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function o(){n.abort()}n=window.XDomainRequest?new XDomainRequest:ajax._getreq();var i=new Promise((o,i)=>{var s,u=Date.now(),c=a.timeout||60,l=Object(r.toQueryString)(t);if(window.XDomainRequest)n.open("get",`${e}?${l}`),n.ontimeout=function(e){i([e,{}])},n.onerror=function(e){i([e,{}])},n.onload=function(){o([n.responseText,{}])},setTimeout((function(){n.send()}),0);else{n.onreadystatechange=function(){4==n.readyState&&(clearInterval(s),n.status>=200&&n.status<300?o([n.responseText,n]):i([n.responseText,n]))};try{n.open("GET",`${e}?${l}`,!0)}catch(e){return i([e,n])}n.send()}s=setInterval((function(){Date.now()-u>1e3*c&&(window.browser.safari&&n.abort(),i(["",{}]),clearInterval(s))}),1e3)});return{request:i,cancel:o}}},CQka:function(e,t,n){"use strict";n.r(t),n.d(t,"initGroupLinksTracking",(function(){return i})),n.d(t,"trackGroupLink",(function(){return s}));n("rGqo"),n("Btvt");var r=n("Egk5"),a=n("zxIV"),o=n("v+DW");function i(){setTimeout((function(){var e=Object(a.domQuery)("a[data-group-track-type='link']",ge("page_body"));Object.keys(e).forEach(t=>{var n=e[t];Object(r.addEvent)(n,"click",s),cur.destroy.push(r.removeEvent.pbind(n,"click"))})}),3e3)}function s(e){var t=e.target;if(!t)return!0;if(Object(o.linkLocked)(t))return!0;var n=Object(a.domData)(t,"group-track-code"),r=Object(a.domData)(t,"group-track-type");if(!n||!r)return!0;var i={act:"track",group_id:-cur.oid,track_code:n,type:r};return ajax.post("al_groups.php",i,{onDone:function(){Object(o.unlockLink)(t)}}),!0}},D1OX:function(e,t,n){"use strict";n.r(t),n.d(t,"uiGetGallery",(function(){return c})),n.d(t,"UIGallery",(function(){return l}));var r,a=n("jE6c");r=window.hasOwnProperty("__SHARED_STATE_KEY")?window.__SHARED_STATE_KEY:Object.create(null),Object.defineProperty(window,"__SHARED_STATE_KEY",{configurable:!0,value:r});var o=()=>window.__SHARED_STATE_KEY,i=e=>o()[e],s={persistIfInitialized:!0},u=((e,t,n)=>{var r=Object(a.defaults)({},n,s),u=e in o(),c=i(e),l=u&&r.persistIfInitialized?c:t(c);((e,t)=>{o()[e]=t})(e,l);return()=>i(e)})("ui-gallery",()=>({galleries:{},incIndex:0}));function c(e){var t=domData(ge(e),"gallery-id");return t&&u().galleries[t]}class l{constructor(e,t){if(!e)throw new Error("No element was provided for UIGallery");if(e=ge(e),!hasClass(e,"ui_gallery"))throw new Error("Provided incorrect element for UIGallery");var n=c(e);if(n)return n;this._opts=extend({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1},t),this._id=u().incIndex,u().incIndex+=1,this._el=e,this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._itemWidth=getSize(this._items[0])[0],this._itemOffset=intval(getStyle(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=intval(getStyle(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=geByClass1("ui_gallery__inner_cont",this._el),this._inner=geByClass1("ui_gallery__inner",this._el),this._scroll=function(){var e={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return e;if(!cur._scrollInfo){var t=se('<div style="position: fixed; left: -1000; width: 0; overflow: scroll">x</div>');ge("content").appendChild(t);var n=t.scrollLeft;e.rtl=vk.rtl,e.backward=n>0,t.scrollLeft=1e3,e.delta=t.scrollLeft===n?-1:1,e.negative=!e.backward&&e.delta<0,e.rtlSame=e.rtl&&!e.backward&&!e.negative,re(t),cur._scrollInfo=e}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[]},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),domData(this._el,"gallery-id",this._id),u().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&addEvent(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this))}_initArrows(){this._opts.noArrows?addClass(this._el,"ui_gallery_no_arrows"):(this._leftArrow=geByClass1("ui_gallery__arrow_left",this._el),this._rightArrow=geByClass1("ui_gallery__arrow_right",this._el),this._arrowWidth=getSize(this._leftArrow)[0],addEvent(this._leftArrow,"click",this._onArrowScroll.bind(this,-1)),addEvent(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),addEvent(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),addEvent(this._rightArrow,"click",this._onArrowScroll.bind(this,1)),addEvent(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),addEvent(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(e){if(this._opts.scrollX||this._opts.scrollY){var t;if("wheel"==e.type)if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){if(!this._opts.scrollY)return;t=-e.deltaY}else{if(!this._opts.scrollX)return;t=-e.deltaX}else if(void 0!==e.wheelDeltaY){if(!this._opts.scrollY)return;t=e.wheelDeltaY}else if(void 0!==e.wheelDelta)t=e.wheelDelta;else{if(!e.detail||1!==e.axis)return;t=-e.detail}t=this._scroll.rtlSame?-t:t,Math.abs(t)>=120&&(t=74*Math.max(-1,Math.min(1,t))),this._innerCont.scrollLeft-=t,this._checkItemsAfterScroll(this._innerCont.scrollLeft),cancelEvent(e)}}_onArrowScroll(e,t){if(!this._opts.noArrows){var n=this._innerCont.scrollLeft+(this._scroll.rtlSame?-e:e)*(this._width-2*this._arrowWidth),r=this._innerCont.scrollWidth-this._width;this._scroll.negative?(n=Math.min(n,0),n=Math.abs(n)):n=Math.max(0,n),n=Math.min(r,n);var a=this._scroll.negative||this._scroll.rtlSame?-e:e;if(a>0&&n<r)n=Math.floor(n/this._itemFullWidth)*this._itemFullWidth;else if(a<0&&n>0){n=Math.floor(n/this._itemFullWidth)*this._itemFullWidth}if(0===n||n===r){var o=this._innerCont.scrollWidth;addClass(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),n&&(n+=e*(this._innerCont.scrollWidth-o))}this._scroll.negative&&(n=-n),animate(this._innerCont,{scrollLeft:n},{duration:Math.abs(this._innerCont.scrollLeft-n)+50,transition:Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(n),setTimeout(()=>removeClass(this._inner,"ui_gallery__inner_shift_instant"),0),cancelEvent(t)}}_checkItemsAfterScroll(e,t){if(this._scroll.negative&&(e=Math.abs(e)),this._opts.markOutside||this._opts.onViewItem){var n,r=this._itemWidth/3,a=(this._scroll.backward?this._inner.scrollWidth-this._width-e:e)-this._scrollOffset,o=e&&Math.floor(a/this._itemFullWidth),i=o*this._itemFullWidth+2*r;n=this._scroll.backward?e+this._width<this._inner.scrollWidth-i:e>i;var s,u=Math.min(this._items.length-1,Math.floor((a+this._width)/this._itemFullWidth)),c=u*this._itemFullWidth+2*r;if(s=this._scroll.backward?e>this._inner.scrollWidth-c:e+this._width<c,this._opts.onViewItem){var l=n?Math.min(this._items.length-1,o+1):o,d=s?Math.max(0,u-1):u;if(t||l!==this._visible.left||d!==this._visible.right){for(var f=l;f<=d;f++)(this._visible.left<0||t&&!inArray(this._items[f],this._visible.items)||f<this._visible.left||f>this._visible.right)&&this._opts.onViewItem(this._items[f],f);this._visible.left=l,this._visible.right=d,this._visible.items=this._items.slice(l,d+1)}}this._opts.markOutside&&(t?(geByClass("ui_gallery_item_outside",this._inner).forEach(e=>{removeClass(e,"ui_gallery_item_outside")}),this._outside.left=-1,this._outside.right=-1):((o!==this._outside.left||!n)&&this._outside.left>=0&&(removeClass(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(u!==this._outside.right||!s)&&this._outside.right>=0&&(removeClass(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),n&&o!==this._outside.left&&(addClass(this._items[o],"ui_gallery_item_outside"),this._outside.left=o),s&&u!==this._outside.right&&(addClass(this._items[u],"ui_gallery_item_outside"),this._outside.right=u))}if(!this._opts.noArrows){var g=e>0,h=e+this._width<this._inner.scrollWidth;toggleClass(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?h:g),toggleClass(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?g:h)}(!this._scroll.backward&&this._inner.scrollWidth-e-this._width<1e3||this._scroll.backward&&e<1e3)&&this._onLoadMore()}_onArrowMouseOver(e){this._opts.noArrows||addClass(this._inner,"ui_gallery__inner_shift_"+e)}_onArrowMouseOut(){this._opts.noArrows||(removeClass(this._inner,"ui_gallery__inner_shift_left"),removeClass(this._inner,"ui_gallery__inner_shift_right"))}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(e,t){e=e||[],this.addItems(e),this._finised=!!t||!e.length,this._loadingMore=!1}addItems(e,t){if((e=e||[]).length){var n=t>=0&&t<this._items.length?this._items[t]:null;e.forEach(e=>{n?domInsertBefore(e,n):this._inner.appendChild(e)}),this.refresh()}}destroy(){removeEvent(this._innerCont),removeEvent(this._leftArrow),removeEvent(this._rightArrow),domData(this._el,"gallery-id",null),delete u().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),re(this._el)}removeItem(e){return isNumeric(e)&&(e=this._items[e]),!(!e||!inArray(e,this._items))&&(re(e),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}getItems(){return this._items}getVisibleItems(){return this._visible.items.map((e,t)=>[e,this._visible.left+t])}}},ERyv:function(e,t,n){"use strict";n.r(t),n.d(t,"isWeirdLogging",(function(){return c})),n.d(t,"imWeirdLog",(function(){return l})),n.d(t,"imWeirdCatch",(function(){return d})),n.d(t,"startLoggingAllUnhandled",(function(){return f})),n.d(t,"stopLoggingAllUnhandled",(function(){return g}));n("VRzm"),n("Btvt");var r,a=n("BxOC"),o=n("DM26"),i=1;function s(e,t,n,a,o){if("Script error."!==e){var i=o?o.stack||o.message:null;l("unhandled_error",i?{err:e,stack:i}:{err:e})}r&&r.apply(this,arguments)}function u(e){e.preventDefault()}function c(){return!!window.imwl}function l(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];c()&&(n&&window.console&&(console.error(e,t),console.trace&&console.trace()),Object(o.retryFn)(a.post,3,()=>2)("al_im.php",{act:"a_weird_log",kind:e,data:JSON.stringify(extend({errIdx:i++,ua:navigator.userAgent},t))}))}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(e,extend({err:t&&t.message||t},n)),Promise.reject(t)}function f(){r=window.onerror,window.onerror=s,window.addEventListener("unhandledrejection",u)}function g(){window.onerror=r,r=void 0,window.removeEventListener("unhandledrejection",u)}},FkYl:function(e,t,n){"use strict";n.r(t),n.d(t,"initPageActionsMenu",(function(){return a}));var r=n("3xsS"),a=function(){var e,t={container:document.querySelector("._page_actions_container")},n=Object(r.initGroupMenuDonut)(t);null===(e=window.cur.destroy)||void 0===e||e.push(n)}},Fm3J:function(e,t,n){"use strict";n.r(t),n.d(t,"getLangDeferred",(function(){return a})),n.d(t,"getLangWithLinks",(function(){return o}));n("pIFo");var r=n("6krn"),a=e=>r.getLang.bind(void 0,e),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=r.getLang.apply(void 0,t);return a.replace(/\[([^|]*)\|([^\]]*)]/g,'<a target="_blank" href="$1">$2</a>')}},G46e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},a=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];["D","Do","DD"].forEach((function(e){r[e+" MMMM"]=function(t,n){return(0,n.formatters[e])(t,n)+" "+a[t.getUTCMonth()]}})),t.default=r,e.exports=t.default},"Ht+d":function(e,t,n){"use strict";n.r(t);var r,a=n("q1tI"),o=n("ZxpX"),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},c=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r};var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.appearance,r=e.wide,i=e.overflow,l=e.size,d=u(e,["className","appearance","wide","overflow","size"]),f=e.disabled,g=o.classNames.apply(void 0,c(["Button"],function(e){return Array.isArray(e)?e.map((function(e){return"Button--"+e})):["Button--"+e]}(n),["Button--size-"+l,{"Button--wide":r,"Button--overflow":!!i,"Button--disabled":f},t]));return a.createElement("button",s({},d,{className:g}),e.children)},t.defaultProps={appearance:"primary",size:"m",wide:!1,disabled:!1},t}(a.Component);t.default=l},HyFC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={LTS:e.LTS,LT:e.LT,L:e.L,LL:e.LL,LLL:e.LLL,LLLL:e.LLLL,l:e.l||a(e.L),ll:e.ll||a(e.LL),lll:e.lll||a(e.LLL),llll:e.llll||a(e.LLLL)};return function(e){return t[e]}};var r=/MMMM|MM|DD|dddd/g;function a(e){return e.replace(r,(function(e){return e.slice(1)}))}e.exports=t.default},IogR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n("qxEb")),a=u(n("szUW")),o=u(n("8fa4")),i=u(n("Siog")),s=u(n("t6IN"));function u(e){return e&&e.__esModule?e:{default:e}}var c={formatDistance:r.default,formatLong:a.default,formatRelative:o.default,localize:i.default,match:s.default,options:{weekStartsOn:0,firstWeekContainsDate:1}};t.default=c,e.exports=t.default},"MV/q":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),a=(n("17x9"),n("ZxpX"));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}class s extends r.Component{constructor(e){super(e),this.getRef=e=>{this.element=e},this.resize=()=>{var e=this.element;if(e){var t=e.offsetHeight,n=e.scrollHeight,r=0;n+r<=t&&(r=0),e.value&&this.setState({height:n-r}),this.setState({height:0},()=>{var t=e.scrollHeight-r;this.setState({height:t}),this.props.onResize(e)})}},this.onChange=e=>{this.props.grow&&this.resize(),this.isControlledOutside||this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e)},this.state={value:void 0===e.value?e.initialValue||"":void 0},void 0!==e.value&&(this.isControlledOutside=!0)}componentDidMount(){this.props.grow&&this.resize()}render(){var e=this.props,t=e.className,n=(e.initialValue,e.grow,e.style),s=(e.onResize,e.value),u=i(e,["className","initialValue","grow","style","onResize","value"]),c=this.isControlledOutside?s:this.state.value,l=this.state.height||n.height||66;return r.createElement("textarea",o({},u,{value:c,onChange:this.onChange,onInput:this.onChange,onPaste:this.onChange,ref:this.getRef,style:o({},n,{height:l}),className:Object(a.classNames)("Textarea",t)}))}}s.defaultProps={initialValue:"",grow:!0,onResize:()=>{},style:{}}},MhhX:function(e,t,n){"use strict";n.r(t),n.d(t,"isUnread",(function(){return o})),n.d(t,"isServiceMsg",(function(){return i})),n.d(t,"isCallMessage",(function(){return s})),n.d(t,"isOut",(function(){return u})),n.d(t,"hasReply",(function(){return c})),n.d(t,"isGraffiti",(function(){return d})),n.d(t,"isAudioMsg",(function(){return f})),n.d(t,"isSticker",(function(){return g})),n.d(t,"isGift",(function(){return h})),n.d(t,"isMoney",(function(){return p})),n.d(t,"isMoneyRequest",(function(){return m})),n.d(t,"isVKPay",(function(){return _})),n.d(t,"isImportant",(function(){return b})),n.d(t,"getUserId",(function(){return v})),n.d(t,"getAuthorId",(function(){return y})),n.d(t,"getAdminId",(function(){return O})),n.d(t,"wasEdited",(function(){return w})),n.d(t,"isMessageSelected",(function(){return T})),n.d(t,"isCasperMessage",(function(){return j})),n.d(t,"isMessageToBlockedCommunity",(function(){return E})),n.d(t,"hasPrivateStory",(function(){return D})),n.d(t,"isMessageEmpty",(function(){return C})),n.d(t,"getMessageTTL",(function(){return S})),n.d(t,"isExpiredCasperMessage",(function(){return M})),n.d(t,"MARKED_TYPE_MENTIONS",(function(){return k})),n.d(t,"MARKED_TYPE_CASPER",(function(){return I})),n.d(t,"getFromMessageMarkedDataByType",(function(){return P})),n.d(t,"getMentionsFromMessage",(function(){return L})),n.d(t,"hasUserMentions",(function(){return A}));n("OEbY");var r=n("f01n"),a=n("aong");function o(e,t){return"number"!=typeof t.messageId||(u(t)?t.messageId>e.out_up_to:t.messageId>e.in_up_to)}function i(e){return e.kludges&&void 0!==e.kludges.source_act}function s(e){return"call"==e.kludges.attach1_type}function u(e){return e.flags&r.FLAG_OUTBOUND}function c(e){var t=e.attaches.filter(e=>"mail"===e.type).length>0;return e.attaches.filter(e=>"reply"===e.type).length>0||e.flags&r.FLAG_HAS_REPLY&&t}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.attaches[0];return r&&(r.type===t||r.type===n)}function d(e){return l(e,"doc")&&"graffiti"===e.attaches[0].kind}function f(e){return Boolean(e.attaches.find(e=>"doc"===e.type&&"audiomsg"===e.kind))}function g(e){return Boolean(e.attaches.find(e=>"sticker"===e.type))}function h(e){return l(e,"gift")}function p(e){return l(e,"money_transfer","money_request")}function m(e){return l(e,"money_request")}function _(e){return l(e,"link","vkpay")&&6217559==e.kludges.attach1_app_id}function b(e){return e.flags&r.FLAG_IMPORTANT}function v(e){return u(e)?vk.id:e.userId}function y(e,t){var n=Object(a.unpackStore)(e);return u(t)?n.id:t.userId}function O(e,t){var n=Object(a.unpackStore)(e);return n.gid&&u(t)?+t.kludges.from_admin||-n.gid:0}function w(e){return e.update_time>0}function T(e,t){return(e.get().selectedMessages||[]).indexOf(t)>=0}function j(e){return Boolean(e.kludges.is_expired||e.kludges.expire_ttl||e.kludges.ttl&&e.flags&r.FLAG_DELETE_BY_TTL)}function E(e,t){return!(!e.blocked_community||!u(t))}function D(e){return!(!e||!e.kludges.has_private_story)}function C(e){return e.messageId<=0}function S(e){var t=e.kludges.ttl||e.kludges.expire_ttl;return t?Number(t):void 0}function M(e){return!(!e.kludges||!e.kludges.is_expired)}var k=1,I=2;function P(e,t){var n=e.kludges&&e.kludges.marked_users,r=n&&n.find(e=>e[0]===t);return r?r[1]:void 0}function L(e){if(!e.kludges&&!e.kludges.marked_users)return[];var t=P(e,k);return t?Array.isArray(t)?t:[t]:[]}function A(e,t){if(!e.kludges&&!e.kludges.mentions&&!e.kludges.marked_users)return!1;var n=e.kludges.marked_users?L(e):e.kludges.mentions;return!!n&&n.findIndex(e=>e===t||"all"===e)>-1}},N4ZS:function(e,t,n){"use strict";function r(e){return"https://vk.com/web/away.php?to="+e}function a(e,t){var n=decodeURIComponent(e);return/^\/[^/]/.test(n)||/^(https?:\/\/)?([a-z0-9_\-.]+\.)?vk.com(\/.*)?/.test(n)?e:"/away.php?to="+encodeURIComponent(n)+(t?"&utf=1":"")}n.r(t),n.d(t,"wrapAway",(function(){return r})),n.d(t,"wrapAwayIfExternal",(function(){return a}))},O8ze:function(e,t,n){"use strict";n.r(t),n.d(t,"statlogsForwardEvent",(function(){return i})),n.d(t,"statlogsForwardFromCommunityEvent",(function(){return s})),n.d(t,"statlogsCommunityTemplatesClickEvent",(function(){return u})),n.d(t,"statlogsForwardFromChannel",(function(){return c})),n.d(t,"statlogsSendingTime",(function(){return d})),n.d(t,"statlogsSendingTimeStart",(function(){return f})),n.d(t,"statlogsSendingTimeEnd",(function(){return g})),n.d(t,"statlogsSendingError",(function(){return h})),n.d(t,"statlogsSendingQueueLength",(function(){return m})),n.d(t,"statlogsSendingRetry",(function(){return _})),n.d(t,"statlogsBrowserNotificationsUser",(function(){return b})),n.d(t,"statlogsBrowserNotificationsOn",(function(){return v})),n.d(t,"statlogsBrowserNotificationsOff",(function(){return y})),n.d(t,"statlogsCoronaBotLinkClickEvent",(function(){return O}));n("pIFo");var r=n("1y80"),a=n("aong"),o={};function i(e){Object(r.statlogsProbValueEvent)(.1,"im_forward_stat",l(e),!!e.get().gid)}function s(e,t){Object(r.statlogsProbValueEvent)(.1,"im_forward_from_community_stat",l(e),!!e.get().gid,+t)}function u(){Object(r.statlogsProbValueEvent)(1,"im_apply_community_template_stat",1)}function c(){Object(r.statlogsProbValueEvent)(1,"messages_channel_forward_click",1)}function l(e){var t=e.get().pendingForward;return+(t&&t.msgIds&&t.msgIds.length)}function d(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=1;if(!Object(r.randEnabled)(o))return()=>{};var i=+new Date,s=p(e);return function(){var e=+new Date-i;Object(r.statlogsValueEvent)("messages_send_time_web",e,t,n,s,a)}}function f(e,t,n,r){if(t.messageId&&-1!==String(t.messageId).indexOf("rid")){var a=[t.messageId.replace("rid",""),n,r].join("_"),i=t.attaches.length>0;o[a]=d(e,n,r,i)}}function g(e,t,n,r){var a=[t.randomId,n,r].join("_"),i=o[a];i&&(i(),delete o[a])}function h(e,t,n,a){var o=p(e),i=""===t?"network":"unknown";Object(r.randEnabled)(1)&&Object(r.statlogsValueEvent)("messages_send_errors_web",i,n,a,o)}function p(e){var t=Object(a.unpackStore)(e);return Boolean(t.longpoll&&t.longpoll.isEnabled&&t.longpoll.isEnabled())}function m(e){var t=Object(a.unpackStore)(e),n=t.imQueue(t.peer).length;Object(r.randEnabled)(1)&&Object(r.statlogsValueEvent)("messages_send_queue_size",n)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",n=1;Object(r.randEnabled)(n)&&Object(r.statlogsValueEvent)("messages_send_retry",1,t,e)}function b(){var e="im_browser_notifications_users";ls.get(e)||ls.get("im_ui_notify_off")||(ls.set(e,1),Object(r.statlogsValueEvent)(e,1))}function v(){Object(r.statlogsProbValueEvent)(1,"im_browser_notifications_on",1)}function y(){Object(r.statlogsProbValueEvent)(1,"im_browser_notifications_off",1)}function O(){Object(r.statlogsValueEvent)("messages_corona_bot_entrypoint_click",1)}},P13b:function(e,t,n){"use strict";n.r(t),n.d(t,"getFirstUnread",(function(){return i.getFirstUnread})),n.d(t,"isSearchShown",(function(){return i.isSearchShown})),n.d(t,"getPeer",(function(){return i.getPeer})),n.d(t,"getCurrentKeyboard",(function(){return i.getCurrentKeyboard})),n.d(t,"getKeyboard",(function(){return i.getKeyboard})),n.d(t,"getTab",(function(){return i.getTab})),n.d(t,"getCurrentTab",(function(){return i.getCurrentTab})),n.d(t,"getSelectedMessages",(function(){return i.getSelectedMessages})),n.d(t,"getMessageRangeFromSelection",(function(){return i.getMessageRangeFromSelection})),n.d(t,"countUnread",(function(){return i.countUnread})),n.d(t,"getMessageByRid",(function(){return i.getMessageByRid})),n.d(t,"isRidExist",(function(){return i.isRidExist})),n.d(t,"getLocalId",(function(){return i.getLocalId})),n.d(t,"getLastMessage",(function(){return i.getLastMessage})),n.d(t,"parserMessage",(function(){return i.parserMessage})),n.d(t,"getAuthorFullName",(function(){return i.getAuthorFullName})),n.d(t,"getMessage",(function(){return i.getMessage})),n.d(t,"getPreviousMessage",(function(){return i.getPreviousMessage})),n.d(t,"isClassicInterface",(function(){return i.isClassicInterface})),n.d(t,"isLocksAvailable",(function(){return i.isLocksAvailable})),n.d(t,"isFoldersAvailable",(function(){return i.isFoldersAvailable})),n.d(t,"isCommunityInterface",(function(){return i.isCommunityInterface})),n.d(t,"isChannelPeer",(function(){return i.isChannelPeer})),n.d(t,"getBareTab",(function(){return i.getBareTab})),n.d(t,"isReversedDialogs",(function(){return i.isReversedDialogs})),n.d(t,"isFullyLoadedTab",(function(){return i.isFullyLoadedTab})),n.d(t,"makeTabNotFullyLoaded",(function(){return i.makeTabNotFullyLoaded})),n.d(t,"isGoToEndVisible",(function(){return i.isGoToEndVisible})),n.d(t,"isGoToMentionVisible",(function(){return i.isGoToMentionVisible})),n.d(t,"getUnreadScrollBottom",(function(){return i.getUnreadScrollBottom})),n.d(t,"isSendingAvailable",(function(){return i.isSendingAvailable})),n.d(t,"isCommunityPeer",(function(){return i.isCommunityPeer})),n.d(t,"isCommunityBlocked",(function(){return i.isCommunityBlocked})),n.d(t,"checkVoiceMessageAvailable",(function(){return i.checkVoiceMessageAvailable})),n.d(t,"isSearching",(function(){return i.isSearching})),n.d(t,"getSearchText",(function(){return i.getSearchText})),n.d(t,"isSearchingValue",(function(){return i.isSearchingValue})),n.d(t,"isRecentSearchesActive",(function(){return i.isRecentSearchesActive})),n.d(t,"getPinnedMessage",(function(){return i.getPinnedMessage})),n.d(t,"doPopularSuggExist",(function(){return i.doPopularSuggExist})),n.d(t,"isAnyMessageBeingEdited",(function(){return i.isAnyMessageBeingEdited})),n.d(t,"getGroupId",(function(){return i.getGroupId})),n.d(t,"getTabDraft",(function(){return i.getTabDraft})),n.d(t,"getTemplates",(function(){return i.getTemplates})),n.d(t,"tabIsMessageRequest",(function(){return i.tabIsMessageRequest})),n.d(t,"tabIsMessageRequestToChat",(function(){return i.tabIsMessageRequestToChat})),n.d(t,"removeMessageRequestFolderFlags",(function(){return i.removeMessageRequestFolderFlags})),n.d(t,"isMessageRequestFolder",(function(){return i.isMessageRequestFolder})),n.d(t,"tabIsOutgoingMessageRequest",(function(){return i.tabIsOutgoingMessageRequest})),n.d(t,"existsIncomingMessageRequest",(function(){return i.existsIncomingMessageRequest})),n.d(t,"isMessageRequestChangedEvent",(function(){return i.isMessageRequestChangedEvent})),n.d(t,"isCommunityChat",(function(){return i.isCommunityChat})),n.d(t,"isCommunityChatDeleted",(function(){return i.isCommunityChatDeleted})),n.d(t,"isClosedChat",(function(){return i.isClosedChat})),n.d(t,"isCasperChat",(function(){return i.isCasperChat})),n.d(t,"isServiceChatTab",(function(){return i.isServiceChatTab})),n.d(t,"isCasperChatTab",(function(){return i.isCasperChatTab})),n.d(t,"isChatActive",(function(){return i.isChatActive})),n.d(t,"isTabMarkedUnread",(function(){return i.isTabMarkedUnread})),n.d(t,"SENDING_CLASS",(function(){return L})),n.d(t,"FAILED_CLASS",(function(){return A})),n.d(t,"ORIGINAL_CLASS",(function(){return N})),n.d(t,"RESTORE_CLASS",(function(){return x})),n.d(t,"TYPING_CLASS",(function(){return R})),n.d(t,"MESSAGE_KEYBOARD_BUTTON_CLASS",(function(){return F})),n.d(t,"MESSAGE_STACK_CLASS",(function(){return H})),n.d(t,"MESSAGE_CLASS",(function(){return B})),n.d(t,"CREATE_CHAT_ACTION",(function(){return Y})),n.d(t,"CHAT_TITLE_ACTION",(function(){return G})),n.d(t,"CHAT_INVITE_USER",(function(){return U})),n.d(t,"CHAT_KICK_USER",(function(){return q})),n.d(t,"CHAT_PHOTO_UPDATE",(function(){return W})),n.d(t,"CHAT_PHOTO_REMOVE",(function(){return z})),n.d(t,"CHAT_PIN_MESSAGE",(function(){return V})),n.d(t,"CHAT_UNPIN_MESSAGE",(function(){return $})),n.d(t,"CHAT_INVITE_BY_LINK",(function(){return K})),n.d(t,"CHAT_SCREENSHOT",(function(){return X})),n.d(t,"CHAT_GROUP_CALL_STARTED",(function(){return Q})),n.d(t,"DESELECT_ALL_CLASS",(function(){return Z})),n.d(t,"HIDE_TOP_NOTICE_CLASS",(function(){return J})),n.d(t,"HIDE_ASIDE_NOTICE_CLASS",(function(){return ee})),n.d(t,"HIDE_ASIDE_PROMO_BLOCK_CLASS",(function(){return te})),n.d(t,"INSTALL_VKADMIN_LINK",(function(){return ne})),n.d(t,"CLEAR_RECENT_CLASS",(function(){return ae})),n.d(t,"TOGGLE_MR_TAB",(function(){return oe})),n.d(t,"MESSAGE_SEARCH_CLASS",(function(){return ie})),n.d(t,"PINNED_CONTAINER_CLASS",(function(){return ue})),n.d(t,"getClassicChatHeight",(function(){return ce})),n.d(t,"setClassicChatHeight",(function(){return le})),n.d(t,"applyInnerHtml",(function(){return de})),n.d(t,"compensateHistoryHeightChange",(function(){return fe})),n.d(t,"renderSticker",(function(){return ge})),n.d(t,"isAlreadyDeleted",(function(){return he})),n.d(t,"replaceMessageAttrs",(function(){return pe})),n.d(t,"isVoiceMessageAvailable",(function(){return me})),n.d(t,"getAvailableMicrophones",(function(){return _e})),n.d(t,"renderAttach",(function(){return be})),n.d(t,"dayFromVal",(function(){return ve})),n.d(t,"showInvisibleBar",(function(){return ye})),n.d(t,"updateMessageInCache",(function(){return Oe})),n.d(t,"editAndReplaceMessage",(function(){return we})),n.d(t,"setCasperMessageExpiringStatusDOM",(function(){return Te})),n.d(t,"renderMessage",(function(){return je})),n.d(t,"renderMessageMedia",(function(){return Ee})),n.d(t,"ensureDomHasActions",(function(){return De})),n.d(t,"renderCallMessage",(function(){return Ce})),n.d(t,"appendToHistory",(function(){return Se})),n.d(t,"restoreQueue",(function(){return Me})),n.d(t,"markMessagesAsRead",(function(){return ke})),n.d(t,"replaceAttaches",(function(){return Ie})),n.d(t,"MSG_NEW",(function(){return Pe})),n.d(t,"MSG_DUPLICATE",(function(){return Le})),n.d(t,"MSG_LOCAL_DUPLICATE",(function(){return Ae})),n.d(t,"getMessageStoreStatus",(function(){return Ne})),n.d(t,"isChatPeer",(function(){return c.isChatPeer})),n.d(t,"isUserPeer",(function(){return c.isUserPeer})),n.d(t,"isReservedPeer",(function(){return c.isReservedPeer})),n.d(t,"isContactPeer",(function(){return Re})),n.d(t,"isEmailPeer",(function(){return xe})),n.d(t,"isPeerActive",(function(){return Fe})),n.d(t,"isFvkcomgroup",(function(){return He})),n.d(t,"isTabLoaded",(function(){return Be})),n.d(t,"isTabLoadedWithMessage",(function(){return Ye})),n.d(t,"parseMessage",(function(){return qe})),n.d(t,"convertPeerToUrl",(function(){return We})),n.d(t,"unUrlPeer",(function(){return ze})),n.d(t,"simplifyCounter",(function(){return Ve})),n.d(t,"chatActions",(function(){return $e})),n.d(t,"renderPhotos",(function(){return Qe})),n.d(t,"renderPhotosFromTab",(function(){return Ze})),n.d(t,"renderBtnSearchOnlyMessages",(function(){return Je})),n.d(t,"renderMessagesSep",(function(){return et})),n.d(t,"renderConversationsSep",(function(){return tt})),n.d(t,"renderPopularSuggSep",(function(){return nt})),n.d(t,"renderClearRecent",(function(){return rt})),n.d(t,"renderPopularSuggestions",(function(){return at})),n.d(t,"setMessageError",(function(){return ot})),n.d(t,"startResendMessage",(function(){return it})),n.d(t,"removeMessages",(function(){return st})),n.d(t,"removeExpiredMessagesStub",(function(){return ut})),n.d(t,"removeStartingFromMessage",(function(){return lt})),n.d(t,"removeMessagesWithRestore",(function(){return dt})),n.d(t,"restoreMessage",(function(){return ft})),n.d(t,"formatTyper",(function(){return gt})),n.d(t,"loadSummaryActivityType",(function(){return ht})),n.d(t,"renderEmptySearch",(function(){return mt})),n.d(t,"serviceLink",(function(){return _t})),n.d(t,"renderServiceMsg",(function(){return bt})),n.d(t,"addChatPhotoToUpdate",(function(){return vt})),n.d(t,"replaceSpecialSymbols",(function(){return yt})),n.d(t,"isSelfMessage",(function(){return Ot})),n.d(t,"showVerifiedTooltip",(function(){return wt})),n.d(t,"wrapLoading",(function(){return Tt})),n.d(t,"tabFromIds",(function(){return jt})),n.d(t,"checkSelectClick",(function(){return Et})),n.d(t,"renderGoTo",(function(){return Dt})),n.d(t,"showFlushChat",(function(){return Ct})),n.d(t,"showLeaveDialog",(function(){return St})),n.d(t,"showUnpinDialog",(function(){return Mt})),n.d(t,"showMsgDeleteDialog",(function(){return kt})),n.d(t,"cleanHistory",(function(){return It})),n.d(t,"inviteUser",(function(){return Pt})),n.d(t,"toggleMessageRequestsTab",(function(){return Lt})),n.d(t,"showUnreadOnly",(function(){return At})),n.d(t,"changeTab",(function(){return Nt})),n.d(t,"isImportant",(function(){return xt})),n.d(t,"isUnrespond",(function(){return Rt})),n.d(t,"isPeerBlocked",(function(){return Ft})),n.d(t,"isPendingForward",(function(){return Ht})),n.d(t,"isPeerBlockedByMe",(function(){return Bt})),n.d(t,"blockLatencyCompensation",(function(){return Yt})),n.d(t,"showSpamLayer",(function(){return Gt})),n.d(t,"getLastSeenTextInHeader",(function(){return Ut})),n.d(t,"getLastSeenText",(function(){return qt})),n.d(t,"showBlacklistBoxUser",(function(){return zt})),n.d(t,"showBlacklistBox",(function(){return Vt})),n.d(t,"getBaseLink",(function(){return $t})),n.d(t,"showFavvedBox",(function(){return Kt})),n.d(t,"isEditableFocused",(function(){return Xt})),n.d(t,"updateStar",(function(){return Qt})),n.d(t,"removewNewUnreadBarAndMerge",(function(){return Zt})),n.d(t,"isMessagesVisible",(function(){return Jt})),n.d(t,"hideTopNotice",(function(){return en})),n.d(t,"hideAsideNotice",(function(){return tn})),n.d(t,"hideAsidePromoBlock",(function(){return nn})),n.d(t,"installVKAdminApp",(function(){return rn})),n.d(t,"renderShortText",(function(){return on})),n.d(t,"attachToText",(function(){return sn})),n.d(t,"lockButton",(function(){return un})),n.d(t,"unlockButton",(function(){return cn})),n.d(t,"renderPinnedMessage",(function(){return ln})),n.d(t,"renderPinnedMedia",(function(){return dn})),n.d(t,"showMessageInfoTooltip",(function(){return fn})),n.d(t,"showEditTimeTooltip",(function(){return gn})),n.d(t,"showCasperExpiringTooltip",(function(){return hn})),n.d(t,"getHistoryTopIndent",(function(){return pn})),n.d(t,"getPinnedMessageHeight",(function(){return mn})),n.d(t,"boxHandleMessagesLabelsTooltips",(function(){return _n})),n.d(t,"showPinnedBox",(function(){return bn})),n.d(t,"showRepliedBox",(function(){return vn})),n.d(t,"isUserAliveInChat",(function(){return yn})),n.d(t,"getAliveMembersCount",(function(){return On})),n.d(t,"normalizeTab",(function(){return wn})),n.d(t,"normalizeTabsGotFromServer",(function(){return Tn})),n.d(t,"splitMessageToParts",(function(){return jn})),n.d(t,"isMessageTooLong",(function(){return En})),n.d(t,"showInvitationBox",(function(){return Dn})),n.d(t,"showWaitUntilUploadedBox",(function(){return Sn})),n.d(t,"canMessageBeDeletedForAll",(function(){return Mn})),n.d(t,"getTopChatMembers",(function(){return kn})),n.d(t,"getChatMembersByIds",(function(){return In})),n.d(t,"getChatMembers",(function(){return Pn})),n.d(t,"formatTimespan",(function(){return Ln})),n.d(t,"focusOnMessage",(function(){return An})),n.d(t,"getNowEditingMessage",(function(){return Nn})),n.d(t,"checkMessageRequestsTab",(function(){return xn})),n.d(t,"updateMessageRequestsCounterInDOM",(function(){return Rn})),n.d(t,"hideAllBoxes",(function(){return Fn})),n.d(t,"getMessageRequestDateText",(function(){return Hn})),n.d(t,"canPinMessage",(function(){return Bn})),n.d(t,"canForwardMessages",(function(){return Yn})),n.d(t,"canMarkImportant",(function(){return Gn})),n.d(t,"removeExpiredMessageIfNeed",(function(){return Un})),n.d(t,"isPeerCurrentUser",(function(){return qn})),n.d(t,"isGiftOptionAvailableForPeer",(function(){return Wn})),n.d(t,"isMoneyOptionAvailableForPeer",(function(){return zn})),n.d(t,"replaceExpiredMessageWithPlaceholder",(function(){return Vn})),n.d(t,"replaceExpiredRepliedMessageWithPlaceholder",(function(){return Qn})),n.d(t,"getChatMemberCount",(function(){return Zn})),n.d(t,"CALL_ENTRY_POINT_SNIPPET",(function(){return Jn})),n.d(t,"CALL_ENTRY_POINT_HEADER",(function(){return er})),n.d(t,"startCallFromIm",(function(){return tr})),n.d(t,"isCallToPeerAvailable",(function(){return nr}));n("rE2o"),n("ioFf"),n("HEwt"),n("Vd3H"),n("rGqo"),n("a1Th"),n("91GP"),n("pIFo"),n("KKXr"),n("VRzm"),n("Btvt");var r=n("f01n"),a=n("h++7"),o=n("bIHZ"),i=n("rHUl"),s=n("MhhX"),u=n("S2bU"),c=n("rudk"),l=n("ZxpX"),d=n("FWc3"),f=n("EasH"),g=n("1BRX"),h=n("v+DW"),p=n("vT4u"),m=n("ofcU");function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){return e.parentNode.getAttribute("data-receiver-chat-peer-id")}function y(e,t,n){var a=Object(m.createModule)({handlers:(a,o)=>{o(e,"click","_im_join_chat",e=>function(e,t){var n=domData(t,"chat-id"),a=domData(t,"hash");return Object(h.lockButton)(t),Object(p.joinChat)(n,a,e.get()).then(n=>{var a=_(n,1)[0];Object(h.unlockButton)(t);var o=e.get();o.longpoll.push([Object(r.changePeer)(a)]),o.onJoinChat&&o.onJoinChat(a)}).catch(e=>{Object(f.showFastBox)(getLang("mail_join_invite_error_title"),e),Object(h.unlockButton)(t)})}(t,e.target)),o(e,"click","_im_accept_mr",e=>function(e,t){var n=v(t);return Object(h.lockButton)(t),e.set(p.acceptMessageRequest.bind(null,n)).then(()=>{Object(h.unlockButton)(t),e.get().longpoll.push([Object(r.changePeer)(n)])}).catch(e=>{Fn(),Object(f.showFastBox)(getLang("mail_join_invite_error_title"),e),Object(h.unlockButton)(t)})}(t,e.target)),o(e,"click","_im_reject_mr",e=>function(e,t,n){var r=v(n);return Object(h.lockButton)(n),e.set(p.rejectMessageRequest.bind(null,r)).then(()=>{t.updateMenu(),t.updateList(),Object(h.unlockButton)(n),Fn()}).catch(e=>{Fn(),Object(f.showFastBox)(getLang("mail_error"),e),Object(h.unlockButton)(n)})}(t,n,e.target))}});return{unmount(){Object(m.destroyModule)(a)}}}var O=n("aong"),w=n("86+7"),T=n("Wu9C"),j=n("wSs/"),E=n("ERyv"),D=n("lJdi"),C=n("t7n3");var S=n("/eGY"),M=n("ambf"),k=n("Syd7");function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L="_im_mess_sending",A="_im_mess_failed",N="_im_mess_original",x="_im_mess_restore",R="_im_typing",F="_im_mess_btn",H="_im_mess_stack",B="_im_mess",Y="chat_create",G="chat_title_update",U="chat_invite_user",q="chat_kick_user",W="chat_photo_update",z="chat_photo_remove",V="chat_pin_message",$="chat_unpin_message",K="chat_invite_user_by_link",X="chat_screenshot",Q="chat_group_call_started",Z="_im_deselect_all",J="_im_top_notice_hide",ee="_im_aside_notice_hide",te="_im_aside_promo_block_hide",ne="_im_vkadmin_promo_link",ae="_im_clear_recent",oe="_im_toggle_mr_tab",ie="_im_mess_search",ue="_im_pinned";function ce(){return ls.get("chatPosition")||0}function le(e){e>=window.clientHeight()-30&&(e=0),ls.set("chatPosition",e)}function de(e,t){e&&e.innerHTML!==t&&(e.innerHTML=t)}function fe(e,t,n,r){var a=t&&!n?1:!t&&n?-1:0;a&&!Object(i.isClassicInterface)(e)&&r().compensateHistoryHeightChange(a)}function ge(e,t,n,r){var a=window.devicePixelRatio>=2?"256":"128",o="animation"===n,i="im_gift";o&&(i+=" sticker_img");var s=`<img height="128" class="${i}" src="${Stickers.getStickerUrl(intval(e),a)}"/>`;if(o){var u="animatedSticker"+r;s=`<div id="${u}" data-loop-count=3 data-animation-path="${"/stickers.php?act=proxy_animation&product_id="+t+"&sticker_id="+e}" onmouseenter="StickersAnimation.loadAndPlaySticker(this);"\n     data-uniq-id="${r}" data-sticker-id="${intval(e)}" class="sticker_animation sticker_animation_128 im_gift">${s}</div>`;var c=!1;browser.msie?(0^r)===r&&(c=!0):c=Number.isInteger(r),c&&window.StickersSettings.getAutoplay()&&window.StickersAnimation&&window.StickersAnimation.loadAndPlayStickerWithTimer(u,10)}return t&&(s=`<a onmouseover="return Emoji.stickerOver(${intval(e)}, this);"\n        onclick="return Emoji.clickSticker(${intval(t)}, this, event);">${s}</a>`),s=`<div class="im_sticker_row">${s}</div>`}function he(e,t,n){var r=e.get?e.get():e;if(Be(r,t)){var a=r.tabs[t].deleted||[];return inArray(n,a)}return!1}function pe(e,t,n){var r=n.randomId,a=geByClass1("_im_mess_rid"+r,t);return a&&(t=Se(e,n,t=ct([a],t),!0,!1)),t}function me(e){var t=Object(i.checkVoiceMessageAvailable)(e);return browser.mobile&&browser.safari?Promise.resolve(!1):void 0!==t?Promise.resolve(t):_e().then(e=>e.length>0).catch(e=>!1)}function _e(){return window.AudioContext&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(e){for(var t=[],n=0;n<e.length;n++)"audioinput"==e[n].kind&&t.push(e[n]);return t})):Promise.reject(new Error("NotSupported"))}function be(e){return getTemplate("im_preloader",{preloader:rs(vk.pr_tpl,{id:""}),cls:"im-preloader_attach im-preloader_visible im-preloader_"+e})}function ve(e){var t=e.split(".");return(t[0]<10?"0":"")+t[0]+(t[1]<10?"0":"")+t[1]+t[2]}function ye(e){var t=geByClass1("_im_invisible_bar",e);t&&(removeClass(t,"_im_invisible_bar"),removeClass(t,"im-page--history-new-bar_hide"))}function Oe(e,t,n){var r=domData(n,"msgid"),a=geByClass1("_im_mess_"+r,t),o=n.cloneNode(!0);return a&&(a.parentNode.replaceChild(o,a),De(t)),t}function we(e,t,n){var r=je(e,t),a=geByClass1("_im_mess_"+t.messageId,n);return a&&(a.parentNode.replaceChild(se(r),a),De(n)),n}function Te(e,t,n){var r=geByClass1("_im_mess_"+n,e);if(r){var a=r.closest("._im_mess_stack"),o=a&&a.querySelector(".im-mess-stack--bomb");o&&o.classList.add(t?"im-mess-stack--bomb_expiring-soon":"im-mess-stack--bomb_expiring")}return e}function je(e,t){var n=[],r=Object(s.isUnread)(e.tabs[t.peerId],t),a=Object(s.isCallMessage)(t),o=Object(i.getPinnedMessage)(e),l=Object(s.hasReply)(t)?getTemplate("im_message_media",{type:"reply",messageId:t.messageId,attaches:be("reply"),text:""}):"";a||n.push("_im_mess"),Object(s.isOut)(t)&&r&&!a&&n.push("im-mess_unread _im_mess_unread"),Object(s.isOut)(t)&&!a&&n.push("im-mess_out"),Object(s.wasEdited)(t)&&n.push("im-mess_was_edited"),Object(j.canMessageBeEdited)(e,t)&&n.push("im-mess_editable"),Object(s.isImportant)(t)&&n.push("im-mess_fav"),-1!=(e.selectedMessages||[]).indexOf(t.messageId)&&n.push("im-mess_selected"),o&&o.messageId===t.messageId&&n.push("_im_mess_pinned");var d=Date.now()-1e3*t.date>1e3;t.local&&d&&n.push("im-mess_sending"),t.local&&n.push(""+L),t.local&&Object(s.wasEdited)(t)&&!r&&n.push("im-mess_unread im-mess_nobg"),t.failed&&n.push("im-mess_failed "+A),Object(s.isGift)(t)&&n.push("im-mess_gift"),a&&n.push("_im_mess_callsnippet"),Object(s.isCasperMessage)(t)&&n.push("im-mess_casper");var f=Ee(t).concat(function(e){if(e.kludges.keyboard&&e.kludges.keyboard.inline){var t=e.kludges.keyboard.buttons;return[].concat(getTemplate("sImMessageKeyboard",{content:t.map(e=>getTemplate("sImMessageKeyboardRow",{content:e.map(e=>getTemplate("sImMessageKeyboardButton",{label:Object(S.getButtonLabel)(e),appearance:Object(S.getButtonAppearance)(e),type:e.action.type,modifier:e.action.type.replace("_","-"),attributes:Object(S.getAttributesFromActionObject)(e.action),tagName:e.action.type===S.BUTTON_TYPE_OPEN_LINK?"a":"button"})).join("")})).join("")}))}return[]}(t)),g=function(e,t){var n="",r=Object(O.unpackStore)(e).sourceEnabled&&t.kludges&&t.kludges.from_widget&&t.kludges.ref_source;Object(s.wasEdited)(t)&&(n+=getTemplate("sImLblWasEdited",{update_time:t.update_time}));if(Object(i.isCommunityInterface)(e)&&r){var a=t.kludges.ref_source,o={};try{(o=JSON.parse(Object(C.unclean)(a))).link&&o.info&&(o.link=Object(u.replaceHyperLinks)(Object(C.clean)(o.link),u.linksReplacer.bind(null,!1)),o=Object(C.clean)(langStr(getLang("mail_source_info"),"link",o.link,"info",Object(C.clean)(o.info))),n+=getTemplate("sImLblWasSourceInfo",{source:o}))}catch(e){}}return n}(e,t),h=l+qe(e,t.text,t.kludges,!1,t.peerId);t.subject&&"..."!==t.subject.trim()&&!Object(c.isChatPeer)(t.peerId)&&(h=getTemplate("im_topic",{topic:t.subject})+h);var p=Object(s.isGift)(t)?`<div class="im-mess--gift-lbl">${h}</div>`:"",m=f.length>0?getTemplate("im_message_media",{type:"media",messageId:t.messageId,attaches:f.join(""),text:p}):"";if(Object(s.isGift)(t)||(m=h+m),Object(s.isCallMessage)(t)){var _=Ce(t,!1,!0,e),b=!e.isCallsEnabled||Object(c.isUserPeer)(t.peerId)&&!e.isCalls1To1Enabled;m+=getTemplate(b?"sImCallSnippetWithStub":"sImCallSnippet",_)}return m+=g,getTemplate("im_msg_row",{msg_id:t.messageId,from_id:t.peerId,aria_hidden:t.local&&!t.failed?"true":"false",ts:t.date,marker_params:t.failed?`aria-label="${getLang("mail_send_message_error")}" role="link"`:"",unread_params:r?`aria-label="${getLang("mail_unread_message")}"`:"",cls:n.join(" ")}).replace("%text%",()=>m)}function Ee(e){return e.attaches.reduce((t,n)=>!Object(s.hasReply)(e)||"mail"!==n.type&&"reply"!==n.type?("call"===n.type||("sticker"===n.type?e.messageId?t.push(ge(n.id,n.productId,n.kind,e.messageId)):t.push(ge(n.id,n.productId)):t.push(be(n.type))),t):t,[])}function De(e){for(var t=e.querySelectorAll("._im_mess_noa:not(._im_mess_callsnippet):not(._im_mess_srv)"),n=t.length;n--;)hasClass(t[n],"im-mess_fwd")||t[n].insertAdjacentHTML("afterbegin",getTemplate("sImHistoryRowActions")),removeClass(t[n],"_im_mess_noa")}function Ce(e,t,n,r){var a,o,i,s,u,l,d=vk.id,f=e.attaches[0],g=f.initiatorId,h=f.state,p=f.receiverId,m=d===g,_=Boolean(e.kludges.attach1_call_video),b={title:"",description:"",modifier:""},v=_?getLang("mail_call_snippet_outgoing_video"):getLang("mail_call_snippet_outgoing"),y=_?getLang("mail_call_snippet_incoming_video"):getLang("mail_call_snippet_incoming"),O=!r.isCallsEnabled||Object(c.isUserPeer)(e.peerId)&&!r.isCalls1To1Enabled;switch(h){case"reached":var T=t?"":(o=f.duration,i=Math.floor(o/3600),s=Math.floor(o/60)-60*i,u=!1,l=!1,[i,s,o-3600*i-60*s].reduce((e,t)=>{if(0===t&&!l)return l=!0,e;u&&(t=t<10?"0"+t:t);var n=`${e}${""!==e?":":""}${t}`;return u=!0,l=!0,n},""));a=(a=m?getLang("mail_call_outgoing"):getLang("mail_call_incoming")).replace("{duration}",T),b.title=m?v:y,b.description=T;break;case"canceled_by_initiator":m?(a=getLang("mail_call_canceled"),b={title:v,description:getTemplate("sImCallSnippetCanceled",{text:getLang("mail_call_snippet_canceled")})}):(a=getLang("mail_call_missed"),b=O?{title:getLang("mail_call_snippet_missed_call"),description:getTemplate("sImCallSnippetDMLink")}:{title:y,description:getTemplate("sImCallSnippetCanceled",{text:getLang("mail_call_snippet_missed")})});break;case"canceled_by_receiver":if(m){if(t)return getLang("mail_call_declined");var j=Object(w.oCacheGet)(r,p);a=j?langSex(j.sex,getLang("mail_call_declined_by","raw")).replace("{user_name}",j.first_name):getLang("mail_call_declined"),b={title:v,description:getTemplate("sImCallSnippetCanceled",{text:getLang("mail_call_snippet_declined")})}}else a=getLang("mail_call_canceled"),b={title:y,description:getTemplate("sImCallSnippetCanceled",{text:getLang("mail_call_snippet_canceled")})};break;default:a=getLang("mail_added_call"),b.title=getLang("mail_added_call")}return _&&(b.modifier="im-call-snippet_video"),b.type=_?"video":"audio",n?b:getTemplate("im_calls_link",{text:a})}function Se(e,t,n){!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=Date.now()-1e3*t.date>1e3,u=e.tabs[t.peerId];if(!n||geByClass1("_im_mess",n)||geByClass1("_im_bar_date",n)||(n.innerHTML=""),u.skipped>0)return n;var l=[];t.local||(l=e.imQueue(t.peerId,r)),l.length>0&&ct(l.map(e=>geByClass1("_im_mess_rid"+e.rid,n),n).filter(e=>e));var d=je(e,t),f=domLC(n);hasClass(f,"_im_mess_stack")||(f=domClosestSibling(f,"._im_mess_stack",-1));for(var h=Object(i.getLastMessage)(e,t.peerId,t.messageId);t.peerId===e.peer&&h&&!geByClass1("_im_mess_"+h.messageId);)h=Object(i.getLastMessage)(e,t.peerId,h.messageId);var p=geByClass1("_im_unread_bar_row",n),m=h?Ge(h.date,e):0,_=Object(c.isChatPeer)(t.peerId)&&Object(i.isCasperChat)(e,t.peerId);if(!h||Ue(u,h,t,e,a)){var b="",v=!1;if(p&&Object(s.isOut)(t)&&Zt(e,n,t.peerId),1===u.unread&&!Object(s.isOut)(t)&&a&&(b+=getTemplate("im_mess_bar",{}),v=!0,Zt(e,n,t.peerId)),!Object(g.isToday)(new Date(m))&&!_){var y=new Date,w=v?"im-page--history-new-bar_hide _im_invisible_bar":"";b+=getTemplate("im_day_bar",{day:getShortDate(t.date,e.timeshift,!0,getLang("months_of","raw"),!0),date:t.date,day_class:y.getDate()+y.getMonth()+y.getFullYear()+" "+w})}if(Object(s.isServiceMsg)(t))b+=getTemplate("im_service_row",{text:bt(e,t,u),type:"",date:t.date,from_id:"",message_id:t.messageId});else{var T=Xn(e,t);b+=getTemplate("im_mess_stack",Object.assign(T,{messages:d}))}Object(O.toArray)(sech(b)).forEach(e=>n&&n.appendChild(e))}else p&&e.peer===t.peerId&&!u.inplaceSearch&&Object(s.isOut)(t)&&Zt(e,n,t.peerId),geByClass1("_im_stack_messages",f).appendChild(se(d));return Object(s.isOut)(t)&&!o&&setTimeout(()=>{var e=geByClass1("_im_mess_"+t.messageId,n);hasClass(e,L)&&addClass(e,"im-mess_sending")},500),l=l.filter(e=>e.rid!==t.randomId),De(n),Me(l,e,n)}function Me(e,t,n){var r;return(r="object"==typeof e?e:t.imQueue(e,!1)).length>0&&r.map(e=>(e.mess.failed=!!e.failed,e.mess)).filter(e=>Object(i.getMessage)(t,e.peerId,e.messageId)).forEach(e=>Se(t,e,n,!1)),n}function ke(e,t,n){var r=e.tabs[t];return Object(O.toArray)(geByClass("_im_mess_unread",n)).forEach(e=>{var t,n=intval(domData(e,"msgid"));n>0&&r.out_up_to>=n&&(removeClass(e,"_im_mess_unread"),removeClass(e,"im-mess_unread"),(t=geByClass1("_im_mess_blind_unread_marker",e))&&(t.removeAttribute("aria-label"),t.removeAttribute("role"),t.removeAttribute("tabindex")))}),n}function Ie(e,t,n){var r=t.peerId,a=t.messageId,o=geByClass1("_im_msg_reply"+a,e),i=geByClass1("_im_msg_media"+a,e),s=n.tabs[r].mediacontent[a][0];return o&&(o.innerHTML=s[0]),i&&(i.innerHTML=s[1]),e}var Pe=0,Le=1,Ae=2;function Ne(e,t){if(!Object(i.isFullyLoadedTab)(t,e.peerId))return Pe;var n=t.tabs[e.peerId];return n.msgs[e.messageId]?Le:n.msgs["rid"+e.randomId]?Ae:Pe}function xe(e){return e<-2e9}function Re(e){return e>19e8&&e<2e9}function Fe(e,t){return e===t.peer}function He(e,t){return Object(D.doesChatTabHaveFlag)(Object(i.getTab)(e,t),1024)}function Be(e,t){return!!e.tabs[t]}function Ye(e,t){return!!Be(e,t)&&null!==e.tabs[t].lastmsg}function Ge(e,t){return 1e3*e+1e3*t.timeshift}function Ue(e,t,n,r,a){if(Object(s.getUserId)(t)!==Object(s.getUserId)(n))return!0;var o=Ge(t.date,r),u=Ge(n.date,r);if(!isSameDate(o,u))return!0;if(Object(i.isCommunityInterface)(r)&&intval(t.kludges.from_admin)!==intval(n.kludges.from_admin))return!0;if(n.date-t.date>300)return!0;if(Object(s.isServiceMsg)(t)||Object(s.isServiceMsg)(n))return!0;var c=Object(s.isCasperMessage)(t),l=Object(s.isCasperMessage)(n);if(c!==l)return!0;var d=t.kludges.is_expired,f=n.kludges.is_expired;return!(!c||!l||d===f)||(!(!c||!l||d||f)||!(c&&l&&d&&f)&&(!(!Object(s.isCallMessage)(n)&&!Object(s.isCallMessage)(t))||(!(!Object(s.isGift)(t)&&!Object(s.isGift)(n))||(!(!Object(s.isGraffiti)(t)&&!Object(s.isGraffiti)(n))||(!!Object(s.hasReply)(n)||!(Object(s.isUnread)(e,t)===Object(s.isUnread)(e,n)||!a||Object(s.isOut)(n)||Ot(n.peerId,r.gid)))))))}function qe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=Math.round(1e9*Math.random()).toString(16),s={},c=0;return t=(t=Object(u.replaceHyperLinks)(t||"",u.linksReplacer.bind(null,r))).replace(/(<a.+?<\/a>)/gi,e=>{var t=`!link_${c}_${o}!`;return s[t]=e,c++,t}),t=Object(u.replaceMentions)(t),e.isMassMentionsMessageAllowed&&(t=Object(u.replaceMassMentions)(t)),t=Object(u.replaceEmailLinks)(t),t=Object(u.replaceHashtags)(t,t=>{var n=Object(i.getGroupId)(e);return`<a href="/${n?"gim"+n:"im"}?sel=${a||Object(i.getPeer)(e)}&st=${encodeURIComponent(t)}">${t}</a>`}),Object.keys(s).forEach(e=>{t=t.replace(e,()=>s[e])}),n.emoji&&(t=Emoji.emojiToHTML(t,!0)),t}function We(e){return Object(c.isChatPeer)(e)?"c"+(e-2e9):xe(e)?"e"+Math.abs(e+2e9):Re(e)?"mr"+(e-19e8):e}function ze(e){switch(e.substr(0,1)){case"e":return-2e9-intval(e.substr(1));case"c":return 2e9+intval(e.substr(1));default:return intval(e)}}function Ve(e){return e>9999999?Math.floor(e/1e6)+"M":e>9999?Math.floor(e/1e3)+"K":e>0?e.toString():""}function $e(e,t){return{[p.CHAT_ACTION_SEARCH]:{name:getLang("mail_im_peer_search"),icon:"search"},[p.CHAT_ACTION_BLOCK_COMMUNITY]:{icon:"block",name:getLang("mail_block_comm_messages")},[p.CHAT_ACTION_BLOCK_NOTIFY]:{icon:"block",name:getLang("mail_block_notify_messages")},[p.CHAT_ACTION_ALLOW_COMMUNITY]:{icon:"unblock",name:getLang("mail_allow_comm_messages")},[p.CHAT_ACTION_CLEAR]:{name:xe(e.peer)?getLang("mail_im_delete_email_contact"):getLang("mail_im_delete_all_history"),icon:"clear"},[p.CHAT_ACTION_MUTE]:{name:getLang("mail_im_mute"),icon:"mute"},[p.CHAT_ACTION_UNMUTE]:{name:getLang("mail_im_unmute"),icon:"unmute"},[p.CHAT_ACTION_MEDIA]:{name:Object(i.isCommunityInterface)(e)?getLang("mail_im_show_media_history_group"):getLang("mail_im_show_media_history"),icon:"media"},[p.CHAT_ACTION_BLOCK]:{icon:"block",name:getLang("mail_block_user")},[p.CHAT_ACTION_INVITE]:{icon:"invite",name:getLang("mail_im_create_chat_with")},[p.CHAT_ACTION_LEAVE]:{icon:"leave",name:t?getLang("mail_leave_channel"):getLang("mail_leave_chat")},[p.CHAT_ACTION_RETURN]:{icon:"return",name:t?getLang("mail_return_to_vkcomgroup"):getLang("mail_return_to_chat")},[p.CHAT_ACTION_PIN_HIDE]:{icon:"pin_hide",name:getLang("mail_menu_pin_hide")},[p.CHAT_ACTION_PIN_UNHIDE]:{icon:"pin_unhide",name:getLang("mail_menu_pin_show")},[p.CHAT_ACTION_UNPIN]:{icon:"unpin",name:getLang("mail_menu_unpin")},[p.CHAT_ACTION_SETTINGS]:{icon:"settings",name:t?getLang("mail_vkcomgroup_settings"):getLang("mail_settings")},[p.CHAT_ACTION_CALL_AUDIO]:{icon:"call_audio",name:getLang("mail_im_call_audio")},[p.CHAT_ACTION_CALL_VIDEO]:{icon:"call_video",name:getLang("mail_im_call_video")},[p.CHAT_ACTION_UNREAD]:{icon:"unread",name:getLang("mail_menu_mark_unread")}}}function Ke(e,t){var n=`<img src="${e}" alt="" class="dialogs_inline_chatter dialogs_inline_chatter_half"/>`;return t&&(n=getTemplate("im_dialogs_link",{href:t,photo:n})),`<div class="im_grid">\n    <div class="dialogs_inline_chatter dialogs_inline_chatter_half">\n      ${n}\n    </div>\n  </div>`}function Xe(e,t){var n=`<img src="${e}" alt="" class="dialogs_inline_chatter"/>`;return t&&(n=getTemplate("im_dialogs_link",{href:t,photo:n})),`<div class="im_grid">\n    <div class="dialogs_inline_chatter">\n      ${n}\n    </div>\n  </div>`}function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("string"==typeof e)return`<div class="im_grid"><img src="${e}" alt=""/></div>`;switch(e.length){case 1:return`<div class="im_grid"><img src="${e[0]}" alt=""/></div>`;case 2:return e.map((e,n)=>Ke(e,t[n])).join("");case 3:return Ke(e[0],t[0])+e.slice(1).map((e,n)=>Xe(e,t[n+1])).join("");case 4:return e.map((e,n)=>Xe(e,t[n])).join("")}}function Ze(e,t,n){if("string"==typeof t.photo&&t.photo)return`<div class="im_grid"><img src="${t.photo}" alt=""></div>`;if(Object(c.isChatPeer)(t.peerId)&&t.membersCount<2)return`<div class="im_grid"><img src="${e.get().default_chat_photo}" alt=""></div>`;if(Array.isArray(t.photo))return Qe(t.photo);var r=t.data.active.slice(0,4).map(w.oCacheGet.bind(null,e)).filter(e=>!!e);return Qe(r.map(e=>e.photo),n?[]:r.map(e=>e.link))}function Je(e){var t=e.get().gid?getLang("mail_search_only_messages_comm"):getLang("mail_search_only_messages");return`<li class="im-page--mess-search-w">\n    <div class="im-page--mess-search ${ie}">\n      <button type="button" class="im-i--messages-search"></button>${t}\n    </div>\n  </li>`}function et(){return`<li class="im-search-results-head">${getLang("mail_search_messages")}</li>`}function tt(){return`<li class="im-search-results-head">${getLang("mail_search_conversations_sep")}</li>`}function nt(){return`<li class="im-search-results-head">${getLang("mail_search_dialogs_sep")}</li>`}function rt(){return`<li class="im-search-results-head _im_recent_bar">\n    ${getLang("mail_recent_searches")}\n    <button type="button" class="${ae} im-page--clear-recent">${getLang("mail_clear_recent")}</button>\n  </li>`}function at(e){var t=e.get().popular_sugg,n=Object(i.isClassicInterface)(e)?8:5;return t.length>n&&(t=t.slice(0,n)),'<li class="im-popular clear_fix">'+t.map(t=>{var n=t.peerId,r=Object(w.oCacheGet)(e,n)||t,a=e.get().tabs[n]||t,o=(e.get().mutedPeers||[]).indexOf(n)>=0;return`<div class="${["im-popular--item","fl_l","_im_dialog","_dont_add_recent","_im_sugg_"+n,a.unread>0&&"sugg-is_unread",o&&"sugg-is_muted"].filter(e=>!!e).join(" ")}" data-peer="${n}">\n    <a class="im-popular--avatar-w ${onlinePlatformClass(a.online)}" href="${r.link}"><img class="im-popular--avatar" src="${r.photo}"/></a>\n    <div class="im-popular--name-w"><a class="im-popular--name" href="${r.link}">${r.first_name||r.name}</a></div>\n    <span class="im-popular--unread _sugg_unread_ct">${Ve(a.unread)}</span>\n</div>`}).join("")+"</li>"}function ot(e,t,n){var r=geByClass1("_im_mess_"+t.messageId,n);if(r){attr(r,"aria-hidden","false"),addClass(r,"im-mess_failed "+A);var a=geByClass1("_im_mess_marker",r);attr(a,"aria-label",getLang("mail_send_message_error")),attr(a,"role","link")}return n}function it(e,t,n){var r=geByClass1("_im_mess_"+t,n);if(r){removeClass(r,"im-mess_failed"),attr(r,"aria-hidden","true"),removeClass(r,A);var a=geByClass1("_im_mess_marker",r);attr(a,"aria-label",""),attr(a,"role","")}return n}function st(e,t){return ct(e.map(e=>geByClass1("_im_mess_"+e,t)).filter(e=>e),t)}function ut(e,t){var n=t||document,r=[];return e.forEach(e=>{var t=n.querySelector("._im_expired_message_"+e);if(t){var a=+t.dataset.count;if(t.dataset.count=a-1,t.classList.remove("_im_expired_message_"+e),1===a)(!domNS(t)||hasClass(domNS(t),"_im_bar_date"))&&(hasClass(domPS(t),"_im_bar_date")&&re(domPS(t)),hasClass(domPS(t),"_im_unread_bar_row")&&re(domPS(t))),re(t);else r.includes(t)||r.push(t)}}),r.length&&r.forEach(e=>{var t=+e.dataset.count;if(t>0){var n=$n(t),r=se(n);r.classList.add(...e.classList),e.replaceWith(r)}}),t}function ct(e,t){var n=e.filter(e=>!hasClass(e,"im-mess_srv")).map(e=>e.parentNode);return e.forEach(e=>{hasClass(e,"im-mess_srv")?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode&&e.parentNode.removeChild(e)}),n.filter(e=>0===domChildren(e).length).map(e=>gpeByClass("_im_mess_stack",e)).forEach(e=>{hasClass(domPS(e),"_im_bar_date")&&re(domPS(e)),hasClass(domPS(e),"_im_unread_bar_row")&&re(domPS(e)),re(e)}),t}function lt(e){for(var t=e;t;){var n=t;if(null===(t=t.previousElementSibling)){hasClass(n,"mess_srv")&&(t=n.parentNode);var r=gpeByClass("_im_mess_stack",n);r&&(t=r.previousElementSibling,1===domChildren(n.parentNode).length&&r.parentNode.removeChild(r))}hasClass(n,"_im_unread_bar_row")||n.parentNode.removeChild(n)}}function dt(e,t,n,r){return e.map(e=>geByClass1("_im_mess_"+e,r)).filter(e=>e).forEach(e=>{val(e,function(e,t,n){var r=t.innerHTML;return`<div class="im-mess--text">\n    ${getLang("delete"===n?"mail_deleted_stop":"mail_marked_as_spam")} <button type="button" data-peer="${e}" class="${x} im-mess--btn">${getLang("mail_restore")}</button>\n    <div class="${N} im-mess--original">${r}</div>\n  </div>`}(t,e,n)),addClass(e,"im-mess_light")}),r}function ft(e,t,n){var r=geByClass1("_im_mess_"+e,n);if(r){var a=geByClass1(N,r);val(r,a.innerHTML),removeClass(r,"im-mess_light")}return n}function gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(o)return pt(e,t,n,r,!0,a);var i=60,s=pt(e,t,n,r,!1,a);return s.length>i?pt(e,t,n,r,!0,a):s}function ht(e){var t={[p.ACTIVITY_TYPE_TYPING]:1,[p.ACTIVITY_TYPE_RECORDING_AUDIO]:2},n=Object.keys(e).sort((e,n)=>t[n]-t[e]),r={},a=n.reduce((t,n)=>{var a=(e[n]||{}).userIds;return(void 0===a?[]:a).forEach(e=>{r[e]||(r[e]=!0,t[n]=!0)}),t},{}),o=n.filter(e=>!!a[e]);return o.length>1?"":o[0]}function pt(e,t,n,r,a,o){var s=function(e,t,n){var r=[],a={};return Object.keys(t).map(n=>{((t[n]||{}).userIds||[]).forEach(t=>{Object(w.oCacheExists)(e,t)?parseInt(t,10)!==e.id&&(a[t]=n):r.push(t)})}),r.length&&Object(p.loadChatMember)({[n]:r},e),Object.keys(a).sort((e,n)=>t[a[e]].ts-t[a[n]].ts)}(r,e,t);if(0===s.length)return"";var u=Object(c.isUserPeer)(t)||Object(i.isCommunityPeer)(t)?"first_name":a?"short_name":"name",l=ht(e),d="";l===p.ACTIVITY_TYPE_RECORDING_AUDIO?d=getLang("mail_recording_audio_several",s.length):l===p.ACTIVITY_TYPE_TYPING&&(d=getLang("mail_typing_several",s.length));var f=s.slice(0,Math.min(s.length-1,o)),g=f.map(e=>Object(w.oCacheGet)(r,e)[u]).join(", ");if(s.length>o+1){var h=function(e){var t={};return Object.keys(e).forEach(n=>{var r=e[n].userIds;(void 0===r?[]:r).forEach(e=>{t[e]=1})}),Object.keys(t).length}(e);g+=" "+getLang("mail_and_peer").replace("{count}",h-o).replace("{typing}",d)}else{if(s.length>1&&(g+=" "+getLang("mail_and_peer_one")),!Object(c.isChatPeer)(t)&&n)g+=" "+d;else g+=` ${Object(w.oCacheGet)(r,s[f.length])[u]} ${d}`}return g.trim()}function mt(){return`<div class="im-page--chat-search-empty">\n    ${getLang("mail_im_search_empty")}\n  </div>`}function _t(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n?`<a class="im_srv_lnk ${r}" target="_blank" rel="noopener" href="${e}">${t}</a>`:`<span class="${r}">${t}</span>`}function bt(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t.kludges,o=a.source_act,i=intval(a.source_mid),s=intval(Object(c.isChatPeer)(n.peerId)?a.from:t.userId),u=s===i,l=Object(w.oCacheGet)(e,s),d="";switch(o){case Y:d="mail_im_chat_created";break;case G:d=a.source_is_channel?"mail_im_title_updated_channel":"mail_im_title_updated_dot";break;case U:d=u?"mail_im_returned_to_chat":"mail_im_invited";break;case q:d=u?"mail_im_left":"mail_im_kicked_from_chat";break;case W:d="mail_im_photo_set";break;case z:d=a.source_is_channel?"mail_im_photo_removed_channel":"mail_im_photo_removed";break;case V:d=a.source_message?"mail_im_pin_message":"mail_im_pin_message_empty2";break;case $:d=a.source_message?"mail_im_unpin_message":"mail_im_unpin_message_empty2";break;case K:d="mail_im_invite_by_link";break;case X:d=Object(O.unpackStore)(e).id===i?"mail_im_chat_own_screenshot":"mail_im_chat_screenshot";break;case Q:d="mail_im_group_call_started";break;default:return"mail_no_support"}if(d=(d=langSex(l.sex,getLang(d,"raw"))).replace("{from}",_t(l.link,l.name,r)),i&&!u){var f=a.source_email;if(f)d=d.replace("{user}",_t("/im?email="+encodeURIComponent(f),"email",r));else{var g=Object(w.oCacheGet)(e,i),h=o===q?g.inv_name:g.kick_name;d=d.replace("{user}",_t(g.link,h,r))}}if(a.source_text){var p=a.source_old_text?`«<b class="im_srv_lnk">${a.source_old_text}</b>» &rarr; `:"";d=d.replace("{title}",p+`«<b class="im_srv_lnk">${a.source_text}</b>»`)}if(a.source_act===V||a.source_act===$)if(a.source_message){var m=yt(Emoji.emojiToHTML(stripHTML(a.source_message.replace(/<br\s?\/?>/gi," ")),!0)),_=_t("",m,!1,"im_srv_mess_link");d=d.replace("{msg}",_)}else d=d.replace(/{link}(.+){\/link}/i,(e,t)=>_t("",t,!1,"im_srv_mess_link"));return d}function vt(e,t,n,r){if(t===W){var a=geByClass1("_im_mess_"+e.messageId,r);if(a){var o=n.tabs[e.peerId];a.parentNode.innerHTML=getTemplate("im_msg_row",{msg_id:e.messageId,from_id:e.peerId,text:bt(n,e,o)+n.chat_photo_msg,ts:e.date,cls:"im-mess_srv _im_mess_srv"})}}return r}function yt(e){return e.replace(/&lt;&lt;/g,"&laquo;").replace(/&gt;&gt;/g,"&raquo;").replace(/ \-\-/g," &mdash;").replace(/\-\- /g,"&mdash; ").replace(a.MENTION_RAW,"$1$4")}function Ot(e,t){return!t&&e===vk.id}function wt(e,t){return Object(d.showTooltip)(e,{url:Object(i.isCommunityPeer)(t)?"al_groups.php":"al_profile.php",params:{act:"verified_tt",mid:t,gid:t},slide:15,ajxdt:200,showdt:200,hidedt:200,dir:"auto",shift:[94,7,7],className:"verified_tt"})}function Tt(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=se(getTemplate("im_preloader",{preloader:rs(vk.pr_tpl,{id:""}),cls:["bottom"===n?"im-preloader_bottom":"im-preloader_top",r].join(" ")})),o=!1;function i(){o=!0,removeClass(a,"im-preloader_visible"),a.parentNode&&a.parentNode.removeChild(a)}setTimeout(()=>{o||("bottom"===n?e.appendChild(a):e.insertBefore(a,domFC(e)),addClass(a,"im-preloader_visible"))},0),t.then(i).catch(e=>{Object(E.imWeirdCatch)("wrapLoading",e),i()})}}function jt(e,t){return{0:{msgs:e.reduce((e,t)=>(e[t]=[t,r.FLAG_IMPORTANT,0,0,"",{},{},0,0,0],e),{}),hash:t,history:1}}}function Et(e,t){if(!t&&!e)return!1;var n=e.target||e.srcElement,r=8,a=!1,o=/_im_mess|im_log_act|im_log_ract|_im_log_body|im_log_rspacer|_im_graffiti_w|_wall_post_cont/;do{if(!n||n.onclick||n.onmousedown||"A"==n.tagName||hasClass(n,"_im_no_select")||hasClass(n,"im_msg_media_link")||"IMG"==n.tagName&&!hasClass(n,"_im_graffiti")&&!hasClass(n,"emoji")&&!hasClass(n,"emoji_css")&&!hasClass(n,"im_gift")||"TEXTAREA"==n.tagName||hasClass(n,"play_new")||hasClass(n,"videoplayer")||(a=o.test(n.className)))break}while(r--&&(n=n.parentNode));return!a||!!trim((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||"").toString())}function Dt(e,t){return`<div class="im-mess--text">\n      <span>${getLang("mail_restored")}</span>\n      <a class="_im_go_to" href="/im?sel=${We(e)}&msgid=${t}">${getLang("mail_im_goto_conversation")}</a>\n    </div>`}function Ct(e,t,n){var r=getLang("mail_deleteall1"),a=getLang("mail_sure_to_delete_all"),o=getLang("mail_delete");return Object(c.isChatPeer)(t)&&(Object(D.doesChatTabHaveFlag)(e,1024)?(r=getLang("mail_leave_channel"),a=getLang("mail_unfollow_channel_confirmation"),o=getLang("mail_unfollow_channel")):a=getLang("mail_chat_sure_to_delete_all")),Object(i.isCommunityPeer)(t)&&(a=getLang("mail_group_sure_to_delete_all")),Object(f.showFastBox)(r,a,o,n,getLang("global_cancel"))}function St(e,t,n){var r=Object(i.getTab)(e,t),a=Object(c.isChatPeer)(t),o=a&&Object(i.isChannelPeer)(r),s=a&&Object(i.tabIsMessageRequestToChat)(r),u=getLang("mail_deleteall1"),l=getLang("mail_sure_to_delete_all"),d=getLang("mail_delete");if(a){if(!Object(i.isChatActive)(r))return Ct(r,t,n.bind(null,!0));o?(u=getLang("mail_leave_channel"),l=getLang("mail_vkcomgroup_leave_confirm"),d=getLang("mail_leave_channel")):s?(u=getLang("mail_reject_mr_confirmation_title"),l=getLang("mail_reject_mr_confirmation_text"),d=getLang("mail_message_request_reject")):(u=getLang("mail_leave_chat"),l=getLang("mail_chat_leave_confirm"),d=getLang("mail_leave_chat"))}Object(i.isCommunityPeer)(t)&&(l=getLang("mail_group_sure_to_delete_all"));var f=new MessageBox({title:u,width:o?450:500}).content(l).setButtons(d,()=>n(!!isChecked(geByClass1("_check_is_delete"))||!a),getLang("global_cancel")).show();return!a||o||s||f.setControlsText(`<div class="checkbox im-delete-forall-checkbox _check_is_delete" onclick="checkbox(this);" role="checkbox" aria-checked="false">${getLang("mail_deleteall1")}</div>`),f}function Mt(e){return Object(f.showFastBox)(getLang("mail_unpin_title"),getLang("mail_unpin_text"),getLang("mail_unpin"),e,getLang("global_cancel"))}function kt(e,t,n,r){var a=getLang("mail_dialog_msg_delete_N",t),o=Object(f.showFastBox)(getLang("mail_dialog_msg_delete_title"),a,getLang("mail_delete"),()=>r(isChecked(geByClass1("_check_forall"))),getLang("global_cancel")),i="",s=!1;return n&&(i=`<div class="checkbox im-delete-forall-checkbox _check_forall" onclick="checkbox(this);" role="checkbox" aria-checked="false">${getLang("mail_delete_for_all")}</div>`,s=cur.imDb.selectByKey("del_forall_checked")),o.setControlsText(i),s&&checkbox(geByClass1("_check_forall")),o}function It(e,t,n,r,a){t.showProgress(),e.set(r.bind(null,a)).then(()=>{t.hideProgress(),t.hide(),n().removePeer(e,a),n().updateDialogFilters(e)})}function Pt(e,t,n,r){var a=e.get().tabs[t].memberIds;e.set(r.bind(null,"add_member",a)).then(n().showCreation)}function Lt(e,t,n){var r=e.get();if(r.active_tab===a.FOLDER_ALL&&0===r.dialog_tab_cts.mr)return!1;var o=r.active_tab===a.FOLDER_MESSAGE_REQUEST?a.FOLDER_ALL:a.FOLDER_MESSAGE_REQUEST;return e.set(n.bind(null,o)).then(e=>{t().restoreDialogs(e,!0)})}function At(e,t,n){if(e.get().active_tab===a.FOLDER_ALL&&0===e.get().unread_cnt)return!1;var r=e.get().active_tab===a.FOLDER_UNREAD?a.FOLDER_ALL:a.FOLDER_UNREAD;return e.set(n.bind(null,r)).then(e=>{t().restoreDialogs(e,!0)})}function Nt(e,t,n,r){if(t.get().active_tab===e)return Promise.resolve(t);var a=Object(i.isReversedDialogs)(t);return t.set(r.bind(null,e)).then(e=>(n().restoreDialogs(e,!0,a!==Object(i.isReversedDialogs)(e)),e))}function xt(e,t){void 0===t&&(t=e.get().peer);var n=e.get().tabs[t];return a.FOLDER_MASKS[a.FOLDER_IMPORTANT]&n.folders}function Rt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===t&&(t=e.get().peer),!Object(i.isFoldersAvailable)(e))return!1;var r=n||e.get().tabs[t];return a.FOLDER_MASKS[a.FOLDER_UNRESPOND]&r.folders}function Ft(e,t){return!1===((t.get().block_states||{})[e]||{}).free}function Ht(e){return null!=e.get().pendingForward}function Bt(e,t){return(t.get().block_states[e]||{}).who===vk.id}function Yt(e,t){var n=e.get().block_states;Object.keys(n).forEach(a=>{n[a].time?!1===n[a].free&&Date.now()-n[a].time>=5e4&&t.push([r.mutexEvent([,1,"gim"+e.get().gid,a,0,""])]):n[a].time=Date.now()})}function Gt(e,t,n){var r;return!showTabbedBox("al_im.php",{act:"a_spam",offset:"0",gid:e.get().gid},{onDone:(n,a)=>{a&&(r=t(n,e,a))},params:{width:638,onHide:()=>{AudioMessagePlayer.loaded&&AudioMessagePlayer.detachPlayer(!0),r.unmount()}}},n)}function Ut(e,t){return qt(e.get(),t,Object(i.getTab)(e,t).last_seen)}function qt(e,t,n,r){if(n.platform)return getLang("mail_header_online_status")+(n.mobile?Wt(t,!1,!1,!0):"");if(!n.can_see){var a=Object(w.oCacheGet)(e,t),o=a||e.tabs[t];return function(e,t){var n;switch(e){case"recently":n=getLang("global_online_was_recently","raw");break;case"last_week":n=getLang("global_online_was_week","raw");break;case"last_month":n=getLang("global_online_this_month","raw");break;case"long_ago":n=getLang("global_online_long_ago","raw");break;default:return""}return langSex(t,n)}(n.status,o.sex)}if(!n.time||Date.now()-1e3*n.time>7776e6)return"";var i=getDateText(n.time,e.timeshift),s=langSex(Object(w.oCacheGet)(e,t).sex,getLang("mail_last_activity_tip","raw")).replace("{user}","").replace("{time}",i);return n.mobile&&(s+=Wt(t,!1,!1,r)),s}function Wt(e,t,n,r){var a={mid:e};n||(a.was=1),t?a.forcetoup=!0:a.forcetodown=!0,a=Object.assign(a,r);var o=JSON.stringify(a).slice(1,-1).replace(/"/g,"&quot;");return getTemplate("im_wrap_mobile",{class:"im_status_mob_onl",params:o})}function zt(e,t){var n=t.get().tabs[e];return showBox("al_settings.php",{act:"blacklist_box",q:n.href},{stat:[jsc("web/settings.js"),"settings.css"],dark:1})}function Vt(e,t){return showBox("groupsedit.php",{act:"bl_edit",name:"/id"+e,gid:t.get().gid},{stat:["page.css","ui_controls.js","ui_controls.css"],dark:1})}function $t(e){return e.get().gid?"/gim"+e.get().gid:"/im"}function Kt(e,t,n,r){var a;_n(showTabbedBox("al_im.php",{act:"a_important",offset:"0"},{onDone:(r,o)=>{o&&(a=n(r,e,t,o))},params:{width:638,onHide:()=>{AudioMessagePlayer.loaded&&AudioMessagePlayer.detachPlayer(!0)},onDestroy:()=>{a&&a.unmount()}}},r),e)}function Xt(){var e=document.activeElement;return null!==e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.getAttribute("contenteditable"))}function Qt(e,t,n){var r=geByClass1("_im_mess_"+e,n);return r&&toggleClass(r,"im-mess_fav",t),n}function Zt(e,t,n){var r=geByClass1("_im_unread_bar_row",t);if(!r)return t;var a=domClosestSibling(r,"._im_mess_stack",-1),o=domClosestSibling(r,"._im_mess_stack"),s=a?geByClass("_im_mess",a).pop():null,u=o?geByClass1("_im_mess",o):null;if(re(r),ye(t),!u||!s)return t;var c=domData(u,"msgid"),l=Object(i.getPreviousMessage)(e,n,c),d=Object(i.getMessage)(e,n,c);if(!l||Ue(e.tabs[n],l,d,e))return t;var f=geByClass1("_im_stack_messages",a),g=geByClass1("_im_stack_messages",o).children;return Object(O.toArray)(g).forEach(e=>{re(e),f.appendChild(e)}),re(o),t}function Jt(e,t,n){var r=Object(i.getFirstUnread)(e,e.get().peer);if(!r)return[!1,0];var a=geByClass1("_im_mess_"+r,t);if(!a){var o=Object(i.getLastMessage)(e,e.get().peer,r);if(!o)return[!0,0];a=geByClass1("_im_mess_"+o.messageId,t)}var s=hasClass(a,"_im_mess_srv")?a:gpeByClass("_im_mess_stack",a);if(!s)return[!0,0];var u=a?a.offsetTop:0,c=s.offsetTop+u,l=n.contHeight();return c<=n.scrollTop()+n.getScrollHeight()?[!0,0]:[!1,Math.max(0,l-c)]}function en(e,t,n){cancelEvent(t);var r=gpeByClass("_im_top_notice",n);fadeOut(r,200,re.pbind(r));var a=gpeByClass("_im_page_dialogs",r);a&&hasClass(a,"im-page--dialogs-notice")&&removeClass(a,"im-page--dialogs-notice"),ajax.post("al_im.php",{act:"a_hide_top_notice",type:r.getAttribute("data-type"),hash:r.getAttribute("data-hash")})}function tn(e,t,n){cancelEvent(t);var r=gpeByClass("_im_aside_notice",n);slideUp(r,200,re.pbind(r)),ajax.post("al_im.php",{act:"a_hide_top_notice",type:r.getAttribute("data-type"),hash:r.getAttribute("data-hash")})}function nn(e,t){cancelEvent(e);var n=gpeByClass("_im_aside_promo_block",t);slideUp(n,200,re.pbind(n)),ajax.post("al_im.php",{act:"a_hide_promo_block",type:n.getAttribute("data-type"),hash:n.getAttribute("data-hash")})}function rn(e,t){gpeByClass("_im_aside_promo_block",t).classList.add("--action-called"),ajax.post("al_im.php",{act:"a_vkadmin_app_install",hash:domData(t,"hash"),platform:domData(t,"platform")})}function an(e){return e.length>1?function(e){return[].concat(e).sort((e,t)=>"mail"!==e.type?"mail"===t.type?-1:1:0)}(e):e}function on(e,t,n,r,a){if(n=n.replace(/\<br\s*\/?\>(\n)?/gi," ").replace(/[\n\r]/gi," "),n=Object(u.replaceMentions)(n,(e,t,n,r,a)=>a),r&&(n=Emoji.emojiToHTML(n,!0)),t&&"..."!==t.trim()&&!Object(c.isChatPeer)(e)&&(n=getTemplate("im_topic",{topic:t,cls:"im-topic_dialog"})+n),!n&&a.length>0){var o=an(a);n=getTemplate("im_dialog_media",{name:sn(o[0],o)})}return n}function sn(e,t){var n={photo:getLang("mail_added_photos","raw"),video:getLang("mail_added_videos","raw"),audio:getLang("mail_added_audios","raw")};switch(e.type){case"mail":var r=e.object?e.object.fwd_count:e.id.split(";").length;return langNumeric(r,getLang("mail_fwd_msgs","raw"),!0);case"photo":case"video":case"audio":var a=t.filter(t=>t.type===e.type).length;return langNumeric(a,n[e.type],!0);case"audio_playlist":return"audio_album"===e.kind?getLang("mail_added_audio_album"):getLang("mail_added_audio_playlist");case"artist":return getLang("mail_added_artist");case"doc":switch(e.kind){case"graffiti":return getLang("mail_added_graffiti");case"audiomsg":return getLang("mail_added_audiomsg");default:return getLang("mail_added_docs")}case"geo":case"map":return getLang("mail_added_geo");case"wall":return getLang("mail_added_wall");case"wall_reply":return getLang("mail_added_wall_reply");case"gift":return getLang("mail_added_gift");case"link":case"share":return getLang("mail_added_link");case"sticker":return getLang("mail_added_sticker");case"market":return getLang("mail_added_market_item");case"money_transfer":return getLang("mail_added_money_transfer");case"money_request":return getLang("mail_added_money_request");case"story":return getLang("mail_added_story");case"mask":return getLang("mail_added_mask");case"article":return getLang("mail_added_article");case"call":return getLang("mail_added_call");case"poll":return getLang("mail_added_poll");case"podcast":return getLang("mail_added_podcast");default:return getLang("mail_added_"+e.type)}return""}function un(e){addClass(e,"im-send-btn_loading")}function cn(e){removeClass(e,"im-send-btn_loading")}function ln(e){var t=e.get(),n=Object(i.getPinnedMessage)(e);if(!n||!Object(T.isPinnedMessageVisibleInTab)(e,Object(i.getPeer)(e)))return"";var r=Object(w.oCacheGet)(e,n.userId);if(!r)return"";var a=dn(e,n);if(!a)if(!(a=n.text)&&n.attaches.length){var o=an(n.attaches);a=getTemplate("im_pinned_message_media",{text:sn(o[0],o)})}else a=qe(e,a,n&&n.kludges||{})||"";return a=a.replace(/<br\s?\/?>/gi," "),getTemplate("im_pinned_message",{date:getSmDate(n.date,t.timeshift),content:a,link:r.link,name:r.name})}function dn(e,t){var n="";if(t&&Object(s.isMoneyRequest)(t)&&void 0!==t.kludges.attach1_tr_amount){var r="%s "+t.kludges.attach1_currency;if("RUB"===t.kludges.attach1_currency&&(r=getLang("mail_money_amount_rub","raw")),t.kludges.attach1_total_amount){var a=langNumeric(t.kludges.attach1_tr_amount/1e3,"%s",!0),o=langNumeric(t.kludges.attach1_total_amount/1e3,r,!0);n=getLang("mail_money_request_collected_amount_from").replace("{amount}",a).replace("{total_amount}",o)}else{var i=langNumeric(t.kludges.attach1_tr_amount/1e3,r,!0);n=getLang("mail_money_request_collected_amount").replace("{amount}",i)}if(intval(t.kludges.attach1_held_amount)){var u=langNumeric(t.kludges.attach1_held_amount/1e3,r,!0);n+=" "+getLang("mail_money_request_held_amount").replace("{amount}",u)}t.text&&(n+='<span class="divider"></span>'+qe(e,t.text,t.kludges)),t.kludges.attach1_total_amount&&(n+=getTemplate("im_pinned_message_media_bar",{percent:Math.min(100,Math.floor(t.kludges.attach1_tr_amount/t.kludges.attach1_total_amount*100))}))}return n}function fn(e,t,n){var r=n.getAttribute("data-info");r&&Object(d.showTooltip)(n,{text:r,className:"_im_history_tooltip",appendParentCls:"_im_mess_stack",black:1,hidedt:1e3,shift:[0,4]})}function gn(e,t,n){var r=+n.getAttribute("data-time");r&&Object(d.showTooltip)(n,{text:getLang("mail_message_edited")+" "+getSmDate(r,e.get().timeshift),className:"_im_history_tooltip",appendParentCls:"_im_mess_stack",black:1,shift:[0,4]})}function hn(e,t,n){var r=n.target,a=r.closest("."+H),o=a.querySelector("."+B);if(o){var i,s=Number(o.getAttribute("data-msgid")),u=M.casperMessagesStore.getExpireTime(s),c="_im_bomb_tooltip_"+Math.round(1e4*Math.random()).toString(16);if(window.tooltips){var l=t.querySelectorAll(".im-mess-stack--bomb");Array.from(l).forEach(e=>{e!==r&&tooltips.hide(e,{fasthide:!0})})}var f=pn(e);Object(d.showTooltip)(r,{text:h(formatTime(u)),className:"_im_history_tooltip "+c,appendParentCls:H,black:1,shift:[12,4],onShowStart:g,onShowEnd(){i=setTimeout(g,500)},onHide(){clearTimeout(i)},force:!0,toup:r.getBoundingClientRect().top>f+37,hasover:!0}),setTimeout(g,500)}function g(){var e=a.querySelector(`.${c} .tt_text`);e&&(e.innerHTML=h(formatTime(M.casperMessagesStore.getExpireTime(s)))),i=setTimeout(g,500)}function h(e){return`<div class="wrapped">${e}</div>`}}function pn(e){var t=Object(i.getPeer)(e),n=Object(i.getTab)(e,t),r=Object(T.isPinnedMessageVisibleInTab)(e,Object(i.getPeer)(e))||n&&n.top_banner,a=Object(k.getPeerProfileHeight)();return 105+(r?mn(e):0)+a}function mn(e){var t=Object(i.getPinnedMessage)(e);return t&&Object(s.isMoneyRequest)(t)?62:52}function _n(e,t){e.bodyNode.addEventListener("mouseover",e=>{hasClass(e.target,"_im_edit_time")?gn(t,0,e.target):hasClass(e.target,"_im_page_info")&&fn(0,0,e.target)})}function bn(e,t,n,r,a){var o,i=e.get();_n(showTabbedBox("al_im.php",{act:"a_get_pinned_message_box",chat:n,gid:e.get().gid,hash:i.tabs[n].hash},{onDone:(n,a)=>{a&&(o=r(n,e,t,a))},params:{width:638,onHide:()=>{AudioMessagePlayer.loaded&&AudioMessagePlayer.detachPlayer(!0)},onDestroy:()=>{o&&o.unmount()}}},a),e)}function vn(e,t,n){var r=e.get();_n(showTabbedBox("al_im.php",{act:"a_get_replied_message_box",chat:r.peer,msgid:t,gid:r.gid,hash:r.tabs[r.peer].hash},{onDone:(e,t)=>{},params:{width:638,onHide:()=>{AudioMessagePlayer.loaded&&AudioMessagePlayer.detachPlayer(!0)},onDestroy:()=>{}}},n),e)}function yn(e,t){return!(!Object(c.isChatPeer)(e.peerId)||!e.memberIds)&&e.memberIds.indexOf(t)>=0}function On(e){return!Object(c.isChatPeer)(e.peerId)||e.data.kicked?0:e.membersCount}function wn(e,t){var n=Object(w.oCacheGet)(e,t.peerId),r=Object(i.getTab)(e,t.peerId)||{};return n&&(t.photo=t.photo||n.photo,t.name=t.name||n.name,t.href=t.link||n.link,t.sex=t.sex||n.sex),t.last_touched=r.last_touched||0,t.verified=!!t.verified,t.lastmsg=t.lastmsg||t.lastmsg_meta&&t.lastmsg_meta[0]||!1,t.folders=t.folders||null,t.unread=t.unread||0,t.last_seen=t.last_seen||{platform:0,time:0,mobile:0,can_see:0},t.online=t.last_seen&&t.last_seen.platform||0,t.out_up_to=null!=t.out_up_to?t.out_up_to:t.in_up_to||0,Object(c.isChatPeer)(t.peerId)&&(t.memberIds=t.memberIds||r.memberIds||null),t}function Tn(e,t){for(var n in t)t.hasOwnProperty(n)&&wn(e,t[n])}function jn(e,t){var n=[],r=t.find(e=>"mail"===e[0]),a=r?r[1].split(";"):[];for(a.length>100&&(r[1]=a.slice(0,100).join(";"));e.length>4096;){var o=e.substr(0,4096).lastIndexOf(" ");-1==o&&(o=4096),n.push({msgText:trim(e.substr(0,o))}),e=trim(e.substr(o))}for(e.length&&n.push({msgText:e,attaches:t}),n.length||n.push({attaches:t}),a=a.slice(100);a.length;a=a.slice(100))n.push({attaches:[["mail",a.slice(0,100).join(";")]]});return n}function En(e){return e.length>4096}function Dn(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=Object.assign(Cn(t,r),{act:"a_chat_preview"}),i=!1;showBox("al_im.php",o,{stat:["boxes.css"],params:{dark:1,hideButtons:!0,onHide(){e.set(n),i&&i.unmount()}},onFail:e=>(setTimeout(()=>Object(f.showFastBox)(getLang("global_error"),e),0),!0),onDone(t){i=y(t.bodyNode,e,a)}},{})}function Cn(e,t){return t?{chat_id:e.invite_chat_id,hash:e.invite_hash}:e}function Sn(){Object(f.showFastBox)(getLang("global_error"),getLang("mail_message_wait_until_uploaded"))}function Mn(e,t){var n=Object(i.getTab)(e,t.peerId)||{},r=e.get(),a=Object(c.isChatPeer)(t.peerId)&&Object(D.isUserAdminInChat)(n,r.id),o=Object(c.isChatPeer)(t.peerId)&&Object(D.isUserAdminInChat)(n,t.userId);if(!t)return!1;if(!Object(s.isOut)(t)&&(!a||o))return!1;if(333==t.peerId)return!1;if(Date.now()/1e3-t.date>86400)return!1;if(he(e,t.peerId,t.messageId))return!1;if(Object(c.isChatPeer)(t.peerId)){if(!Object(i.isChatActive)(n))return!1}else if(n.block_error>0)return!1;return!0}function kn(e,t){var n=Object(i.getTab)(e,t),r=-1!==n.memberIds.indexOf(n.ownerId),a=r?[n.ownerId]:[];return(a=a.concat(n.memberIds.filter(t=>t!==n.ownerId&&Object(w.oCacheExists)(e,t)).slice(0,r?4:5))).map(t=>Object(w.oCacheGet)(e,t))}function In(e,t){return t.map(t=>Object(w.oCacheGet)(e,t))}function Pn(e,t){return Object(i.getTab)(e,t).memberIds.reduce((t,n)=>{var r=Object(w.oCacheGet)(e,n);return t[r.id]=r,t},{})}function Ln(e,t){if("number"!=typeof e||0===e)return"";var n,r=[[31536e3,t?getLang("global_years_accusative","raw"):getLang("global_age_years","raw")],[2592e3,t?getLang("global_months_accusative","raw"):getLang("global_age_months","raw")],[604800,t?getLang("global_weeks_accusative","raw"):getLang("global_age_weeks","raw")],[86400,t?getLang("global_days_accusative","raw"):getLang("global_age_days","raw")],[3600,t?getLang("global_hours_accusative","raw"):getLang("global_hours","raw")],[60,t?getLang("global_minutes_accusative","raw"):getLang("global_minutes","raw")],[1,t?getLang("global_seconds_accusative","raw"):getLang("global_age_seconds","raw")]],a=e,o=[];if(r.forEach(e=>{var t=I(e,2),n=t[0],r=t[1],i=Math.floor(a/n);a%=n,i>=1&&o.push(langNumeric(i,r))}),1===(n=o.length))return o.pop();var i=o.slice(0,n-1).join(", "),s=o.pop();return getLang("global_and").replace(/{before}/gi,i).replace(/{after}/gi,s)}function An(e,t,n,a){a&&!he(e,n,a)&&(Object(i.getMessage)(e,n,a)?(e.setState({msgid:a}),Object(o.updateLocation)({msgid:a}),t()):e.get().longpoll.push([r.changePeer(n,a)]))}function Nn(e){var t=geByClass1("im-mess_is_editing");if(!t)return null;var n=e.get().tabs[e.get().peer],r=Object(i.parserMessage)(n.msgs[domData(t,"msgid")]);return r&&r.peerId==e.get().peer?r:null}function xn(e,t){if(Object(i.isClassicInterface)(e)){var n=document.getElementById("ui_rmenu_mr");n&&(Object(i.existsIncomingMessageRequest)(e)?n.classList.remove("unshown"):n.classList.add("unshown"))}else t(e)}function Rn(e){var t=Object(O.unpackStore)(e),n=Number(t.dialog_tab_cts[a.FOLDER_MESSAGE_REQUEST]),r=n>0?n:"",o=document.querySelector('._im_right_menu_counter[data-tab="mr"]');o&&(o.innerHTML=r)}function Fn(){for(var e=curBox();e;)e.hide(),e=curBox()}function Hn(e,t){return getLang("mail_invitation_sended_ago").replace("{when}",getDateText(e,t))}function Bn(e,t){var n=Object(i.getPeer)(e),r=Object(i.getMessage)(e,n,t);return Object(D.canPinOrUnpin)(e,n)&&!Object(s.hasPrivateStory)(r)&&!Object(s.isCasperMessage)(r)}function Yn(e,t){var n=Object(i.getPeer)(e);return!t.find(t=>{var r=Object(i.getMessage)(e,n,t);return Object(s.hasPrivateStory)(r)||Object(s.isCasperMessage)(r)})}function Gn(e,t){var n=Object(i.getPeer)(e);return!t.find(t=>{var r=Object(i.getMessage)(e,n,t);return Object(s.isCasperMessage)(r)})}function Un(e,t){var n=M.casperMessagesStore.isProcessed(e.messageId),r=M.casperMessagesStore.has(e.messageId),a=M.casperMessagesStore.getExpireTime(e.messageId)>M.MAX_DEVIATION;(!r&&!n||r&&a)&&t(e),r&&a&&M.casperMessagesStore.remove(e.messageId)}function qn(e){return e===vk.id}function Wn(e,t){return Object(c.isUserPeer)(t)&&!qn(t)&&!Object(i.isCommunityInterface)(e)&&!Re(t)}function zn(e,t){var n=e.get(),r=Object(i.isCommunityInterface)(e);return Object(c.isUserPeer)(t)&&!qn(t)&&!r&&!inArray(t,n.moneyTransferExcept)&&!Re(t)||Object(i.isCommunityPeer)(t)&&n.moneyTransferCommAvail&&Object(i.getCurrentTab)(e).moneyTransferAvail&&!r||r&&n.moneyRequestAvail&&!Object(c.isChatPeer)(t)||Object(c.isChatPeer)(t)&&Object(i.getCurrentTab)(e).moneyRequestAvail&&!Object(i.isCasperChat)(e,t)}function Vn(e,t,n){var r=geByClass1("_im_mess_"+n.messageId,t),a=r&&r.closest("._im_mess_stack");if(!r||!a)return t;var o,i,s,u=Array.from(a.querySelectorAll("._im_mess")),c=I((i=(o=a).previousElementSibling,s=o.nextElementSibling,[i&&1===i.nodeType?i:null,s&&1===s.nodeType?s:null]),2),l=c[0],d=c[1],f=l&&l.classList.contains("im-expired-message"),g=d&&d.classList.contains("im-expired-message"),h=f&&0===u.findIndex(e=>+e.getAttribute("data-msgid")===n.messageId),p=g&&u.findIndex(e=>+e.getAttribute("data-msgid")===n.messageId)===u.length-1,m=$n((h?+l.getAttribute("data-count"):0)+(p?+d.getAttribute("data-count"):0)+1,"_im_expired_message_"+n.messageId),_=se(m);if(h&&(_.classList.add(...l.classList),l.remove()),p&&(_.classList.add(...d.classList),d.remove()),1===u.length)a.replaceWith(_);else{var b=I(u.reduce((e,t)=>{var r=+t.getAttribute("data-msgid");return r<n.messageId&&e[0].push(t),r>n.messageId&&e[1].push(t),e},[[],[]]),2),v=b[0],y=b[1];a.replaceWith(se(Kn(e,v))||"",_,se(Kn(e,y))||"")}return t}function $n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return getTemplate("sImExpiredMessagePlaceholder",{text:langNumeric(e,getLang("mail_messages_expired","raw")).replace("{count}",e),count:e,id_classes:Object(l.classNames)(t)})}function Kn(e,t){if(0===t.length)return"";var n=+t[0].getAttribute("data-peer"),r=+t[0].getAttribute("data-msgid"),a=Object(i.getMessage)(e,n,r);return getTemplate("im_mess_stack",Object.assign(Xn(e,a),{messages:t.reduce((e,t)=>e+t.outerHTML,"")}))}function Xn(e,t){var n=Object(O.unpackStore)(e),r=t.peerId,a=t.messageId,o=Object(i.getTab)(e,r),u=Object(s.getUserId)(t),d=Object(s.getAdminId)(e,t),f=Object(w.oCacheGet)(n,d?-n.gid:u)||o,g=Object(c.isChatPeer)(r)?f.name:f.first_name,h=f.link||o.href,p=Object(c.isChatPeer)(r)&&f.covid_status?f.covid_status:"",m=getTemplate("im_mess_stack_name",{name:g+p,link:h,class:Object(s.isMoney)(t)?" im-mess-stack--lnk-money-transfer":""});if(Object(s.isGift)(t)&&(m+=getTemplate("sImGiftLabel",{content:langSex(f.sex||0,getLang("mail_gift_message_sent","raw"))})),Object(s.isMoney)(t)){var _=Object(s.isMoneyRequest)(t)?getLang("mail_money_request_message_sent","raw"):getLang("mail_money_tranfer_message_sent","raw");m+=getTemplate("sImMoneyTransferLabel",{content:langSex(f.sex||0,_)})}var b=function(e,t){var n=Object(O.unpackStore)(e),r=t.peerId,a=t.messageId,o=Object(c.isChatPeer)(r)&&Object(i.isCasperChat)(n,r)?"":(g=t.date,h=n.timeshift,langDate(1e3*g,"{hour}:{minute} {am_pm}",1e3*h,[],!0)),u=Object(s.getAdminId)(e,t),d=Object(i.isCommunityInterface)(e)?"/gim"+n.gid:"/im",f=t.local?getTemplate("im_stack_date",{date:o,link:`${d}?sel=${r}&msgid=${a}`}):o;var g,h;if(u&&n.admins[u]){var p=n.admins[u],m=u===vk.id?getLang("mail_by_you"):p[0];f+=" "+getTemplate("im_admin_link",{name:m,href:p[1]})}return f+function(e,t){if(!Object(s.isCasperMessage)(t))return"";var n=I(M.casperMessagesStore.getTimings(t.messageId),3),r=n[0],a=n[1],o=n[2],u=Math.max(r+a-o,0);return getTemplate("sImBomb",{classnames:Object(l.classNames)({"im-mess-stack--bomb_hidden":Object(i.isCasperChat)(e,t.peerId),"im-mess-stack--bomb_expiring":u<=M.EXPIRING_TIME,"im-mess-stack--bomb_expiring-soon":u<=M.EXPIRING_SOON_TIME})})}(n,t)}(e,t);return{photo:f.photo,href:h,cls:"",date_attr:"",link:`/im?sel=${r}&msgid=${a}`,name:stripHTML(m),stack_name:m,peerId:u,messageMeta:b,admin:d}}function Qn(e,t){var n=`._im_replied_message[data-msgid="${t.messageId}"] .im-replied--text`;Array.from(e.querySelectorAll(n)).forEach(e=>{e.innerHTML=getTemplate("im_dialog_media",{name:getLang("mail_expired_message")})})}function Zn(e){return Object(c.isChatPeer)(e.peerId)&&e.membersCount?langNumeric(e.membersCount,getLang("mail_im_n_chat_members","raw")):""}var Jn="im_message",er="im_header";function tr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;if(window.Calls&&window.Calls.call){var a=Object(c.isChatPeer)(t);if(a){var o=Object(i.getTab)(e,t);window.Calls.startGroupCall(t,o,r)}else{var s=Object(w.oCacheGet)(e,t);window.Calls.call(t,n,[s],void 0,r)}}}function nr(e,t){var n=e.get(),r=Object(i.getTab)(e,t);return!!n.isCallsEnabled&&(!(Object(c.isUserPeer)(t)&&!n.isCalls1To1Enabled)&&(!Object(i.isCommunityInterface)(e)&&(!(Object(c.isChatPeer)(t)&&r.membersCount<2)&&!!r.can_start_call)))}},Q3mP:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=n("ZxpX"),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},u=function(e){var t=e.inverted,n=e.size,r=e.className,u=s(e,["inverted","size","className"]),c=Object(o.classNames)("Progress",{"Progress--inverted":!!t},"Progress--size-"+n,r);return a.a.createElement("div",i({className:c},u),a.a.createElement("div",{className:"Progress__item"}),a.a.createElement("div",{className:"Progress__item"}),a.a.createElement("div",{className:"Progress__item"}))};u.defaultProps={inverted:!1,size:"s"},t.default=u},Q7oV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("HyFC");var o=(0,((r=a)&&r.__esModule?r:{default:r}).default)({LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"});t.default=o,e.exports=t.default},QXA5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,o.default)(e,n),a=(0,o.default)(t,n);return r.getTime()===a.getTime()};var r,a=n("cBpt"),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},QY22:function(e,t,n){var r,a,o;a=[n("17x9"),n("q1tI")],void 0===(o="function"==typeof(r=function(t,n){"use strict";var r,a,o;function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t=(o=t)&&o.__esModule?o:{default:o},n=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}}return n.default=e,t&&t.set(e,n),n}(n);var p={x:"clientWidth",y:"clientHeight"},m={x:"clientTop",y:"clientLeft"},_={x:"innerWidth",y:"innerHeight"},b={x:"offsetWidth",y:"offsetHeight"},v={x:"offsetLeft",y:"offsetTop"},y={x:"overflowX",y:"overflowY"},O={x:"scrollWidth",y:"scrollHeight"},w={x:"scrollLeft",y:"scrollTop"},T={x:"width",y:"height"},j=function(){},E=!!function(){if("undefined"==typeof window)return!1;var e=!1;try{document.createElement("div").addEventListener("test",j,{get passive(){return e=!0,!1}})}catch(e){}return e}()&&{passive:!0},D=function(e,t){var n=e.length,r=e.minSize,a=e.type,o=t.from,i=t.size,s=t.itemsPerRow,u=(i=Math.max(i,r))%s;return u&&(i+=s-u),i>n&&(i=n),(u=(o="simple"!==a&&o?Math.max(Math.min(o,n-i),0):0)%s)&&(o-=u,i+=u),o===t.from&&i==t.size?t:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{from:o,size:i})};e.exports=(a=r=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,c(t).call(this,e))).state=D(e,{itemsPerRow:1,from:e.initialIndex,size:0}),n.cache={},n.cachedScrollPosition=null,n.prevPrevState={},n.unstable=!1,n.updateCounter=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),d(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=D(e,t);return n===t?null:n}}]),d(t,[{key:"componentDidMount",value:function(){this.updateFrameAndClearCache=this.updateFrameAndClearCache.bind(this),window.addEventListener("resize",this.updateFrameAndClearCache),this.updateFrame(this.scrollTo.bind(this,this.props.initialIndex))}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.axis!==e.axis&&this.clearSizeCache(),!this.unstable){if(++this.updateCounter>40)return this.unstable=!0,console.error("ReactList failed to reach a stable state.");this.updateCounterTimeoutId||(this.updateCounterTimeoutId=setTimeout((function(){t.updateCounter=0,delete t.updateCounterTimeoutId}),0)),this.updateFrame()}}},{key:"maybeSetState",value:function(e,t){if(function(e,t){for(var n in t)if(e[n]!==t[n])return!1;return!0}(this.state,e))return t();this.setState(e,t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateFrameAndClearCache),this.scrollParent.removeEventListener("scroll",this.updateFrameAndClearCache,E),this.scrollParent.removeEventListener("mousewheel",j,E)}},{key:"getOffset",value:function(e){var t=this.props.axis,n=e[m[t]]||0,r=v[t];do{n+=e[r]||0}while(e=e.offsetParent);return n}},{key:"getEl",value:function(){return this.el||this.items}},{key:"getScrollPosition",value:function(){if("number"==typeof this.cachedScrollPosition)return this.cachedScrollPosition;var e=this.scrollParent,t=this.props.axis,n=w[t],r=e===window?document.body[n]||document.documentElement[n]:e[n],a=this.getScrollSize()-this.props.scrollParentViewportSizeGetter(this),o=Math.max(0,Math.min(r,a)),i=this.getEl();return this.cachedScrollPosition=this.getOffset(e)+o-this.getOffset(i),this.cachedScrollPosition}},{key:"setScroll",value:function(e){var t=this.scrollParent,n=this.props.axis;if(e+=this.getOffset(this.getEl()),t===window)return window.scrollTo(0,e);e-=this.getOffset(this.scrollParent),t[w[n]]=e}},{key:"getScrollSize",value:function(){var e=this.scrollParent,t=document,n=t.body,r=t.documentElement,a=O[this.props.axis];return e===window?Math.max(n[a],r[a]):e[a]}},{key:"hasDeterminateSize",value:function(){var e=this.props,t=e.itemSizeGetter;return"uniform"===e.type||t}},{key:"getStartAndEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.threshold,t=this.getScrollPosition(),n=Math.max(0,t-e),r=t+this.props.scrollParentViewportSizeGetter(this)+e;return this.hasDeterminateSize()&&(r=Math.min(r,this.getSpaceBefore(this.props.length))),{start:n,end:r}}},{key:"getItemSizeAndItemsPerRow",value:function(){var e=this.props,t=e.axis,n=e.useStaticSize,r=this.state,a=r.itemSize,o=r.itemsPerRow;if(n&&a&&o)return{itemSize:a,itemsPerRow:o};var i=this.items.children;if(!i.length)return{};var s=i[0],u=s[b[t]],c=Math.abs(u-a);if((isNaN(c)||c>=1)&&(a=u),!a)return{};for(var l=v[t],d=s[l],f=i[o=1];f&&f[l]===d;f=i[o])++o;return{itemSize:a,itemsPerRow:o}}},{key:"clearSizeCache",value:function(){this.cachedScrollPosition=null}},{key:"updateFrameAndClearCache",value:function(e){return this.clearSizeCache(),this.updateFrame(e)}},{key:"updateFrame",value:function(e){switch(this.updateScrollParent(),"function"!=typeof e&&(e=j),this.props.type){case"simple":return this.updateSimpleFrame(e);case"variable":return this.updateVariableFrame(e);case"uniform":return this.updateUniformFrame(e)}}},{key:"updateScrollParent",value:function(){var e=this.scrollParent;this.scrollParent=this.props.scrollParentGetter(this),e!==this.scrollParent&&(e&&(e.removeEventListener("scroll",this.updateFrameAndClearCache),e.removeEventListener("mousewheel",j)),this.clearSizeCache(),this.scrollParent.addEventListener("scroll",this.updateFrameAndClearCache,E),this.scrollParent.addEventListener("mousewheel",j,E))}},{key:"updateSimpleFrame",value:function(e){var t=this.getStartAndEnd().end,n=this.items.children,r=0;if(n.length){var a=this.props.axis,o=n[0],i=n[n.length-1];r=this.getOffset(i)+i[b[a]]-this.getOffset(o)}if(r>t)return e();var s=this.props,u=s.pageSize,c=s.length,l=Math.min(this.state.size+u,c);this.maybeSetState({size:l},e)}},{key:"updateVariableFrame",value:function(e){this.props.itemSizeGetter||this.cacheSizes();for(var t=this.getStartAndEnd(),n=t.start,r=t.end,a=this.props,o=a.length,i=a.pageSize,s=0,u=0,c=0,l=o-1;u<l;){var d=this.getSizeOfItem(u);if(null==d||s+d>n)break;s+=d,++u}for(var f=o-u;c<f&&s<r;){var g=this.getSizeOfItem(u+c);if(null==g){c=Math.min(c+i,f);break}s+=g,++c}this.maybeSetState(D(this.props,{from:u,itemsPerRow:1,size:c}),e)}},{key:"updateUniformFrame",value:function(e){var t=this.getItemSizeAndItemsPerRow(),n=t.itemSize,r=t.itemsPerRow;if(!n||!r)return e();var a=this.getStartAndEnd(),o=a.start,i=a.end,s=D(this.props,{from:Math.floor(o/n)*r,size:(Math.ceil((i-o)/n)+1)*r,itemsPerRow:r}),u=s.from,c=s.size;return this.maybeSetState({itemsPerRow:r,from:u,itemSize:n,size:c},e)}},{key:"getSpaceBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t[e])return t[e];var n=this.state,r=n.itemSize,a=n.itemsPerRow;if(r)return t[e]=Math.floor(e/a)*r;for(var o=e;o>0&&null==t[--o];);for(var i=t[o]||0,s=o;s<e;++s){t[s]=i;var u=this.getSizeOfItem(s);if(null==u)break;i+=u}return t[e]=i}},{key:"cacheSizes",value:function(){for(var e=this.cache,t=this.state.from,n=this.items.children,r=b[this.props.axis],a=0,o=n.length;a<o;++a)e[t+a]=n[a][r]}},{key:"getSizeOfItem",value:function(e){var t=this.cache,n=this.items,r=this.props,a=r.axis,o=r.itemSizeGetter,i=r.itemSizeEstimator,s=r.type,u=this.state,c=u.from,l=u.itemSize,d=u.size;if(l)return l;if(o)return o(e);if(e in t)return t[e];if("simple"===s&&e>=c&&e<c+d&&n){var f=n.children[e-c];if(f)return f[b[a]]}return i?i(e,t):void 0}},{key:"scrollTo",value:function(e){null!=e&&this.setScroll(this.getSpaceBefore(e))}},{key:"scrollAround",value:function(e){var t=this.getScrollPosition(),n=this.getSpaceBefore(e),r=n-this.props.scrollParentViewportSizeGetter(this)+this.getSizeOfItem(e),a=Math.min(r,n),o=Math.max(r,n);return t<=a?this.setScroll(a):t>o?this.setScroll(o):void 0}},{key:"getVisibleRange",value:function(){for(var e,t,n=this.state,r=n.from,a=n.size,o=this.getStartAndEnd(0),i=o.start,s=o.end,u={},c=r;c<r+a;++c){var l=this.getSpaceBefore(c,u),d=l+this.getSizeOfItem(c);null==e&&d>i&&(e=c),null!=e&&l<s&&(t=c)}return[e,t]}},{key:"renderItems",value:function(){for(var e=this,t=this.props,n=t.itemRenderer,r=t.itemsRenderer,a=this.state,o=a.from,i=a.size,s=[],u=0;u<i;++u)s.push(n(o+u,u));return r(s,(function(t){return e.items=t}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.axis,a=t.length,o=t.type,i=t.useTranslate3d,s=this.state,u=s.from,c=s.itemsPerRow,l=this.renderItems();if("simple"===o)return l;var d={position:"relative"},f={},g=Math.ceil(a/c)*c,h=this.getSpaceBefore(g,f);h&&(d[T[r]]=h,"x"===r&&(d.overflowX="hidden"));var p=this.getSpaceBefore(u,f),m="x"===r?p:0,_="y"===r?p:0,b=i?"translate3d(".concat(m,"px, ").concat(_,"px, 0)"):"translate(".concat(m,"px, ").concat(_,"px)"),v={msTransform:b,WebkitTransform:b,transform:b};return n.default.createElement("div",{style:d,ref:function(t){return e.el=t}},n.default.createElement("div",{style:v},l))}}]),t}(n.Component),h(r,"displayName","ReactList"),h(r,"propTypes",{axis:t.default.oneOf(["x","y"]),initialIndex:t.default.number,itemRenderer:t.default.func,itemSizeEstimator:t.default.func,itemSizeGetter:t.default.func,itemsRenderer:t.default.func,length:t.default.number,minSize:t.default.number,pageSize:t.default.number,scrollParentGetter:t.default.func,scrollParentViewportSizeGetter:t.default.func,threshold:t.default.number,type:t.default.oneOf(["simple","variable","uniform"]),useStaticSize:t.default.bool,useTranslate3d:t.default.bool}),h(r,"defaultProps",{axis:"y",itemRenderer:function(e,t){return n.default.createElement("div",{key:t},e)},itemsRenderer:function(e,t){return n.default.createElement("div",{ref:t},e)},length:0,minSize:1,pageSize:10,scrollParentGetter:function(e){for(var t=e.props.axis,n=e.getEl(),r=y[t];n=n.parentElement;)switch(window.getComputedStyle(n)[r]){case"auto":case"scroll":case"overlay":return n}return window},scrollParentViewportSizeGetter:function(e){var t=e.props.axis,n=e.scrollParent;return n===window?window[_[t]]:n[p[t]]},threshold:100,type:"simple",useStaticSize:!1,useTranslate3d:!1}),a)})?r.apply(t,a):r)||(e.exports=o)},QcBb:function(e,t,n){"use strict";n.r(t);n("91GP"),n("KKXr");var r=n("q1tI"),a=n("zxIV"),o=n("v+DW"),i=n("CQka"),s=n("XzvV"),u=n("X3vJ"),c=n("12ku"),l=n("gVOz"),d=n("4+be");var f=n("lcT2"),g=(n("17x9"),n("6krn")),h=n("6raB"),p=n("Ht+d"),m=n("TBLV"),_=n("MV/q"),b=n("dV62");class v extends r.Component{constructor(e){super(e),this.selectReason=e=>{this.state.submitLoading||this.setState({selectedReasonId:e})},this.updateComment=e=>{this.state.submitLoading||this.setState({comment:e})},this.submit=()=>{if(!this.state.submitLoading){this.setState({error:""});var e=v.controller,t={act:v.acts.report,group_id:this.props.groupId,reason_id:this.state.selectedReasonId,comment:this.state.comment,hash:this.props.hash};ajax.post(e,t,{onDone:()=>{v.destroy(),showDoneBox(Object(g.getLang)("reports_community_report_added_with_markup"))},onFail:e=>(this.setState({error:e}),!0),showProgress:()=>this.setState({submitLoading:!0}),hideProgress:()=>this.setState({submitLoading:!1})})}},this.state={submitLoading:!1,selectedReasonId:null,comment:"",error:""}}static destroy(){Object(b.destroyComponentInBox)()}renderHeader(){return r.createElement("div",{className:"ReportCommunityForm__header box_title_wrap"},r.createElement("div",{className:"box_x_button",role:"button",onClick:()=>v.destroy()}),r.createElement("div",{className:"box_title"},Object(g.getLang)("reports_community_form_box_header")))}renderFormInputs(){return r.createElement("div",{className:"ReportCommunityForm__inputs"},r.createElement("div",{className:"ReportCommunityForm__reasonsBlock"},r.createElement("h4",{className:"ReportCommunityForm__reasonsDescription subheader"},Object(g.getLang)("reports_community_form_box_reports_input_description")),r.createElement("div",{className:"ReportCommunityForm__reasons"},this.props.reasons.map(e=>{var t=this.state.selectedReasonId===e.id;return r.createElement(m.default,{key:e.id,checked:t,onChange:()=>this.selectReason(e.id),className:"ReportCommunityForm__reason"},e.label)}))),r.createElement("div",{className:"ReportCommunityForm__moderCommentBlock"},r.createElement("h4",{className:"ReportCommunityForm__moderCommentDescription subheader"},Object(g.getLang)("reports_community_form_box_moder_comment_input_description")),r.createElement("div",{className:"ReportCommunityForm__moderComment"},r.createElement(_.default,{placeholder:Object(g.getLang)("reports_community_comment_placeholder"),value:this.state.comment,onChange:e=>this.updateComment(e.target.value),grow:!1}))))}renderFormButtons(){var e=null===this.state.selectedReasonId;return r.createElement("div",{className:"ReportCommunityForm__boxControls box_controls"},r.createElement(h.default,{appearance:"primary",disabled:e,className:"ReportCommunityForm__submitButton flat_button",loading:this.state.submitLoading,onClick:this.submit},Object(g.getLang)("reports_community_form_box_report")),r.createElement(p.default,{appearance:"tertiary",className:"ReportCommunityForm__cancelButton flat_button",onClick:v.destroy},Object(g.getLang)("global_cancel")))}renderError(){return r.createElement("div",{className:"ReportCommunityForm__error"},r.createElement("b",{className:"ReportCommunityForm_errorSummary"},Object(g.getLang)("reports_report_is_not_accepted")),r.createElement("div",{className:"ReportCommunityForm__errorText"},this.state.error))}render(){return r.createElement("div",{className:"ReportCommunityForm"},this.renderHeader(),r.createElement("div",{className:"ReportCommunityForm__content"},r.createElement("div",{className:"ReportCommunityForm__boxBody box_body clear_fix"},this.state.error?this.renderError():"",this.renderFormInputs()),this.renderFormButtons()))}}v.controller="/al_groups.php",v.acts={report:"a_report"};var y=n("EasH");class O{static create(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=window,a=r.stManager,o=r.jsc,i=r.curBox,s=r.cur,u=r.nav;a.add([o("web/groups_create.js"),"groups_create.css"],()=>{window.GroupsCreate.showInfoBox("event",{parentId:e,parentHash:t,onSave:()=>{n?(s.reloadAfterClose=!1,i()&&i().hide(),s.reloadAfterClose=!0,this.show(e)):u.reload()}})})}static delete(e,t,n){var r=window,a=r.cur,o=r.tooltips,i=r.curBox;a.reloadAfterClose=!0,ajax.post("al_public.php",{act:"a_delete_event",pid:e,eid:t,hash:n},{onDone:t=>{o&&o.destroyAll(ge("public_event_cell"+e)),i().content(t)}})}static show(e){var t=window,n=t.cur,r=t.nav;Object(y.showBox)("al_public.php",{act:"a_get_events",pid:e}).setOptions({onHideAttempt:()=>(n.reloadAfterClose&&(r.reload({noscroll:!0}),n.reloadAfterClose=!1),!0)})}}var w=n("zTm1"),T=n("qJqe"),j=n("hJPO"),E=n("3xsS"),D=n("FkYl");function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S=!1,M={init:function(e){extend(cur,{module:"groups",hideOther:M.hideOther,otherActs:M.otherActs,options:e,oid:-e.group_id,postTo:-e.group_id,_back:{loc:e.loc,show:[],hide:[],text:e.back}}),ge("group_wall")&&wall.init(extend(e,{automore:1})),SimilarGroups.delRefFromUrl(),cur.nav.push(e=>Object(s.removeOutOfSerpClickLogging)(e,s.outOfSerpGroup,cur.oid)),cur.nav.push((function(e){e[0]&&clearTimeout(M.keyTO)})),e.cntKey&&M.subscribe(e.cntKey),e.age_disclaimer&&M.showDisclaimer(e,"group"),e.enableLinkTracking&&Object(i.initGroupLinksTracking)(),e.gwn&&!Array.isArray(e.gwn)&&Object(l.default)(e.gwn),Object(u.initGroupsMenu)(e.group_id),S&&(SimilarGroups.reInit(),S=!1,SimilarGroups.show(T.OPEN_BLOCK_MODE_SUBSCRIBE));var t=document.querySelector("#easy_promote_market_link");Object(w.showEasyMarketPromoteTooltip)(t),e.inviteLinkId&&Object(j.showInviteLinkBox)(e.inviteLinkId),M.initPageActionsMenu({opts:e})},inviteToChat:function(e,t){stManager.add([jsc("web/group_invite_chat.js"),"group_invite_chat.css",jsc("web/indexer.js")],(function(){window.showGroupChatInviteBox(e)})),t&&t.preventDefault()},inviteToChatPreload:function(){stManager.add([jsc("web/group_invite_chat.js"),"group_invite_chat.css",jsc("web/indexer.js")],(function(){}))},showDisclaimer:function(e,t){var n=!1,r=showFastBox({title:getLang("groups_age_warning"),width:470,hideOnBGClick:!1,onHide:function(){n||(e.age_disclaimer_back?history.back():location.href="/")},forceNoBtn:1},'<div class="group_age_disclaimer">'+getLang("groups_age_disclaimer")+'<br><div class="checkbox group_age_checkbox" onclick="checkbox(this); disableButton(curBox().proceedButton, !isChecked(this))"><div></div>'+getLang("groups_age_accepted")+"</div></div>");r.removeButtons();var a=r.addButton(getLang("global_cancel"),r.hide,"no",!0);addClass(a,"group_age_disclaimer_close"),r.proceedButton=r.addButton(getLang("groups_age_approve"),(function(){n=!0,removeClass(ge(t),"hidden"),r.hide(),e.age_disclaimer_hash?ajax.post("al_groups.php",{act:"a_set_user_age",hash:e.age_disclaimer_hash}):setCookie("remixage18",1),cur.zNavInfo&&zNav(cur.zNavInfo.info,cur.zNavInfo.opts)}),"yes",!0);var o=geByClass1("box_controls",domPN(r.bodyNode));addClass(o,"group_age_disclaimer_box"),replaceClass(domFC(o),"fl_r","fl_l"),disableButton(r.proceedButton,1)},switchTab:function(e,t,n){return!!checkEvent(n)||("wiki"==t&&hasClass(e,"ui_tab_sel")?nav.go(e,n):(ge("page_info_wrap").className="page_info_wrap "+t,uiTabs.switchTab(e)))},toggleFave:function(e,t,n,r){null!=cur.toggleFaveAct&&(n=cur.toggleFaveAct),ajax.post("fave.php",{act:n?"a_add_group":"a_delete_group",gid:-cur.oid,hash:t},{onDone:function(t){val(e,t),cur.toggleFaveAct=!n,toggleClass(e,"on")},showProgress:window.Page&&Page.actionsDropdownLock.pbind(e),hideProgress:window.Page&&Page.actionsDropdownUnlock.pbind(e)}),cancelEvent(r)},hideHelpStep:function(e,t,n,r){var a=domClosest("page_block",e);return e&&e.tt&&e.tt.hide&&e.tt.hide({fasthide:!0}),a&&slideUp(a,200,re.pbind(a)),ajax.post("/al_public.php",{act:"a_hide_help_step",pid:t,step:"help_step_advice",hash:n}),r.cancelBubble=!0,cancelEvent(r)},showInviteBox:function(e,t){return this.inviteBox=Object(y.showBox)("al_page.php",{act:"a_invite_box",gid:t},{params:{bodyStyle:"padding: 0px;",width:560}},e),!this.inviteBox},copyInviteLink:e=>(Object(j.copyInviteLinkHref)(e),!1),subscribe:function(e){window.Notifier&&Notifier.addKey(e,M.updates),M.keyTO=setTimeout(M.subscribe,3e4)},toggleFeedIgnored:function(e,t,n){ajax.post("al_feed.php",{act:cur.options.ignored_news?"a_unignore_owner":"a_ignore_owner",owner_id:cur.oid,hash:t,from:"group"},{onDone:function(t){val(e,t),cur.options.ignored_news=!cur.options.ignored_news},showProgress:window.Page&&Page.actionsDropdownLock.pbind(e),hideProgress:window.Page&&Page.actionsDropdownUnlock.pbind(e)}),cancelEvent(n)},__debug_toggleDntrStatus:E.donutDebugGroupActions.toggleDntrStatus,__debug_donutResetSubscription:E.donutDebugGroupActions.donutResetSubscription,__debug_donutForcePayment:E.donutDebugGroupActions.donutForcePayment,showLinks:function(){Object(y.showBox)("al_groups.php",{act:"show_links",oid:cur.oid}).setOptions({onHideAttempt:function(){return cur.reloadAfterClose&&(nav.reload({noscroll:!0}),cur.reloadAfterClose=!1),!0}})},showMusicians(){Object(y.showBox)("al_groups.php",{act:"show_musicians",oid:cur.oid})},createEvent:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];O.create(e,t,n)},deleteEvent:function(e,t,n){O.delete(e,t,n)},showEvents:function(){O.show(cur.options.public_id||-cur.oid)},updateCnt:function(e){e=parseInt(e);var t=ge("page_menu_group_gim");if(t){var n=geByClass1("ui_rmenu_count",t);n&&(n.textContent=e,toggleClass(n,"unshown",0===e))}},updates:function(e,t){each(t.events,(function(e,t){var n=t.split("<!>");switch(n[1]){case"update_cnt":M.updateCnt(n[4]);break;case"update_chat_activity":!function(e){var t=Object(a.ge)("group_section_chats"),n=Object(a.geByClass1)("group_chat_label_activity",t),r="";e&&(r=Object(d.getLang)("groups_chats_activity_status",e));var o=hasClass(t,"no_activity");r?o&&removeClass(t,"no_activity"):o||addClass(t,"no_activity"),Object(a.setInnerText)(n,r)}(n[4])}}))},initPageActionsMenu:D.initPageActionsMenu,updateActions:function(e,t,n){val("page_actions",e);var r=geByClass1("_page_actions_container");r&&t&&domPN(r).replaceChild(se(t),r),void 0!==n&&val("group_moder_info",n)},enter:function(e,t,n,r,a,o){var i,u;if(e=ge(e),(o=o||{}).showProgress||o.hideProgress)i=o.showProgress,u=o.hideProgress;else if(hasClass(e,"flat_button"))i=lockButton.pbind(e),u=unlockButton.pbind(e);else{if(e.firstChild&&"progress"===e.firstChild.className)return;i=()=>{e.oldhtml=e.innerHTML,e.innerHTML='<span class="progress" style="display: block"></span>'},u=()=>{e.innerHTML=e.oldhtml}}window.Page&&hasClass(e,"page_actions_btn")&&Page.actionsDropdownHide(domPS(e),1);var c={act:"enter",gid:t,hash:n,context:r},l=domData(e,"trackcode");l&&(c.trackcode=l),ajax.post("al_groups.php",c,{onDone:function(e,t,n){var r=!!document.querySelector(".WideScreenAppPage");if(Object(s.tryLogOutOfSerpClick)(s.outOfSerpGroup,cur.oid,s.clickTypeJoinGroupOut),void 0===n.hidden_similar_group&&(S=!0),a)return a.apply(window,arguments);M.updateActions(e,t),toggle("page_actions",e);var o=geByClass1("_groups_invite_block");o&&slideUp(o,200),r||nav.reload({noframe:!0,noscroll:!0})},onFail:e=>{if(e){var t=showFastBox({title:getLang("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},e);return setTimeout(t.hide,3e3),!0}},showProgress:i,hideProgress:u})},confirm:function(e,t,n,r,a){var o=showFastBox({title:getLang("global_warning")},getLang(e),getLang("group_leave_group"),(function(){o.hide(),M.leave(t,n,r,a)}),getLang("global_cancel"))},onGroupLeaveDonutConfirmation:(e,t,n)=>{Object(E.onGroupLeaveDonutConfirmation)(M,e,t,n)},leave:function(e,t,n,r,a,o){var i,u;if(e=ge(e),hasClass(e,"flat_button"))i=lockButton.pbind(e),u=unlockButton.pbind(e);else{if(e.firstChild&&"progress"==e.firstChild.className)return;i=function(){e.oldhtml=e.innerHTML,e.innerHTML='<span class="progress" style="display: block"></span>'},u=function(){e.innerHTML=e.oldhtml}}window.Page&&hasClass(e,"page_actions_btn")&&Page.actionsDropdownHide(domPS(e),1),ajax.post("al_groups.php",C({act:"leave",gid:t,hash:n,context:r},o),{onDone:function(e,t){if(a)return a();Object(s.tryLogOutOfSerpClick)(s.outOfSerpGroup,cur.oid,s.clickTypeLeaveGroupOut),M.updateActions(e,t),toggle("page_actions",e);var n=geByClass1("_groups_invite_block");n&&slideUp(n,200),nav.reload({noframe:!0})},showProgress:i,hideProgress:u})},otherActs:function(e){if(clearTimeout(cur.hideOtherTimer),!e)return!1;e.blur();var t=ge("page_other_acts");return isVisible(t)||(t.style.marginLeft="-1px",t.style.marginTop="-21px",show(t)),!1},hideOther:function(e){if(e>0)cur.hideOtherTimer=setTimeout(cur.hideOther,e);else{var t=ge("page_other_acts");-1==e?hide(t):fadeOut(t,200)}},toggleTop:function(e,t,n,r,a){ajax.post("al_groups.php",{act:"a_toggle_top",gid:t,hash:n,nocis:a},{onDone:function(t){e.innerHTML=t},showProgress:window.Page&&Page.actionsDropdownLock.pbind(e),hideProgress:window.Page&&Page.actionsDropdownUnlock.pbind(e)})},toggleStickers:function(e,t,n,r){ajax.post("al_groups.php",{act:"a_toggle_stickers",gid:t,hash:n},{onDone:function(t){e.innerHTML=t},showProgress:window.Page&&Page.actionsDropdownLock.pbind(e),hideProgress:window.Page&&Page.actionsDropdownUnlock.pbind(e)})},toggleFastAccess:function(e,t,n){function r(n){var r=n?getLang("groups_fast_menu_access_invert"):getLang("groups_fast_menu_access");val(e,r),e.setAttribute("data-value",n),"groups_list"==cur.module&&window.GroupsList&&GroupsList.updateGroupField(t,11,n)}var a=1^intval(e.getAttribute("data-value")),o=hasClass(e,"page_actions_item")||hasClass(e,"ui_actions_menu_item"),i=window.GroupsAdminTips&&window.GroupsAdminTips.isShownSection()&&window.GroupsAdminTips.isShownItem(window.GroupsAdminTips.ITEM_LEFT_LINK)?1:0;return ajax.post("al_settings.php",{act:"a_toggle_admin_fast",gid:t,hash:n,update_menu:1,update_admin_tips:i},{onDone:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o&&r(e),geByTag1("ol",ge("side_bar")).innerHTML=t,window.Notifier&&Notifier.resetCommConnection(),i&&window.GroupsAdminTips&&null!==n&&window.GroupsAdminTips.refreshSection(n)},onFail:function(e){return o||r(0),"too_much_groups"===e&&(showFastBox(getLang("global_error"),getLang("groups_left_menu_full",5)),!0)}.bind(),showProgress:o&&function(){hasClass(e,"page_actions_item")?window.Page&&Page.actionsDropdownLock(e):lockActionsMenuItem(e)},hideProgress:o&&function(){hasClass(e,"page_actions_item")?window.Page&&Page.actionsDropdownUnlock(e):unlockActionsMenuItem(e)}}),o||r(a),!1},showMapBox:function(e,t,n){window.showZeroZoneBox&&showZeroZoneBox("places",(function(){events.showMapBox(e,t,n)}))||showTabbedBox("/al_places.php",{act:"show_photo_place",place_id:e},{stat:["places.css","map.css","maps.js","ui_controls.css","ui_controls.js"]})},uploadPhotos:function(e,t){if(!((window.XMLHttpRequest||window.XDomainRequest)&&(window.FormData||window.FileReader&&(window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary||window.ArrayBuffer&&window.Uint8Array&&(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder))))||!t)return nav.go(e,t);if(checkEvent(t))return!0;cur.onPhotoInputChange=function(n){return window.filesToUpload=n,nav.go(e,t)};var n=ge("page_upload_photos_input");return n||(n=se('<input id="page_upload_photos_input" class="file page_upload_photos_input" type="file" onchange="cur.onPhotoInputChange(this.files);" multiple="true" accept="image/jpeg,image/png,image/gif" name="photo" />')),n.click(t),!1},getFlattenedCategories:function(e,t){var n=t[0][e],r=t[1];if(void 0===r)return n;for(var a=[],o=0;o<n.length;o++){var i=n[o];i[3]="section",a=a.concat([i]),r[i[0]]&&(i[5]="1",a=a.concat(r[i[0]]))}for(o=0;o<a.length;o++)a[o][3]=a[o][3]?a[o][3]+" sectioned":"sectioned";return a},initCategories:function(e){e.prefix=e.prefix||"group_category_",e.groupClass=e.groupClass||0,cur.groupCategoriesDD=cur.groupCategoriesDD||{},cur.groupCategoriesDD[e.prefix]=cur.groupCategoriesDD[e.prefix]||{};for(var t=e.categories[e.groupClass],n=0;n<2;++n){var r=[],a=cur.groupCategoriesDD[e.prefix],o=a[n];if(0==n)r=t[n][0];else if(n>0){var i=a[n-1].val();""!=i&&t[n]&&(r=this.getFlattenedCategories(i,t.slice(1))||[])}o&&o.container&&o.container.compareDocumentPosition&&o.container.compareDocumentPosition(bodyNode)&Node.DOCUMENT_POSITION_DISCONNECTED&&(o.destroy(),o=null),o?(o.setData(r),o.currenDataItems=r,o.setOptions({defaultItems:r}),o.clear()):o=new Dropdown(ge(e.prefix+n),r,{width:300,dark:!0,multiselect:!1,autocomplete:!0,introText:getLang("groups_start_typing_subject"),zeroPlaceholder:!0,indexkeys:[1,4],includeSectionsOnMatch:!0,preventDuplicates:!0,noResult:"",placeholder:getLang("groups_choose_subject"),onChange:function(n,r){if(0==n&&r){var o=M.getFlattenedCategories(r,t.slice(1))||[];a[n+1].setData(o),a[n+1].currenDataItems=o,a[n+1].setOptions({defaultItems:o});for(var i=n+1;i<2;++i)a[i].clear(),a[i].disable(i>n+1||!o.length),toggle(ge(e.prefix+"wrap_"+i),!(i>n+1||!o.length))}e.onChange&&e.onChange(n,r)}.pbind(n)}),e.selected[n]&&-1!=e.selected[n]?1==n&&e.selected[2]?o.val(e.selected[2]):o.val(e.selected[n]):n>0&&(-1==e.selected[n-1]||!r.length)&&(o.disable(!0),hide(ge(e.prefix+"wrap_"+n))),cur.groupCategoriesDD[e.prefix][n]=o}},categoriesGetDropdown:function(e,t){return t=t||"group_category_",cur.groupCategoriesDD&&cur.groupCategoriesDD[t]&&cur.groupCategoriesDD[t][e]},getDetailedCategories:function(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r][0]==t){n=r;break}var a=-1;for(r=n;r>=0;r--)if(Number(e[r][0])<3e3){a=r;break}return-1==n||-1==a?[0,0]:a==n?[e[n][0],0]:[e[a][0],e[n][0]]},categoriesValue:function(e){for(var t=[],n=0;n<2;++n){var r=this.categoriesGetDropdown(n,e);if(0==n)t.push(r?intval(r.val()):0);else{var a=r?intval(r.val()):0;t=t.concat(this.getDetailedCategories(r.dataItems,a))}}return t},deinitCategories:function(e){for(var t=0;t<3;++t){var n=this.categoriesGetDropdown(t,e);n&&n.destroy()}cur.groupCategoriesDD&&delete cur.groupCategoriesDD[e]},saveNewCategories:function(e,t){var n={act:"set_new_categories",gid:e,hash:t};if(M.categoriesGetDropdown(0)){var r=M.categoriesValue();extend(n,{category_0:r[0],category_1:r[1],category_2:r[2]})}var a=ge("group_set_categories_submit");hide("group_set_categories_error_wrap"),hide("group_set_categories_success_wrap"),ajax.post("al_groups.php",n,{onDone:function(e){val("group_set_categories_success",e),show("group_set_categories_success_wrap")},onFail:function(e){return val("group_set_categories_error",e),show("group_set_categories_error_wrap"),!0},showProgress:lockButton.pbind(a),hideProgress:unlockButton.pbind(a)})},hideTopNotice:function(e,t,n){var r="gtop_"+e,a={act:"hide_top_notice",notice:e,group_id:t,hash:n};return ajax.post("al_groups.php",a),slideUp(ge(r),150,re.pbind(r)),!1},goToTopNoticeMoreLink:function(e,t,n,r,a){return Object(s.statlogsValueEvent)("groups_top_notice",1,t,"accept",a),!(!checkEvent(e)&&!r)||nav.go(n)},processActionButton:function(e,t,n,r,a,o){return!!isButtonLocked(e)||(ajax.post("al_groups.php",{act:"proxy_cta_button",action:t,resource:n,group_id:r,hash:a},{onDone:function(){unlockButton(e)}}),!o||o(e))},setMainAddressId:function(e){Object(a.geByClass)("address_its_main").forEach(t=>{Object(o.checkbox)(t,t===e)})},hightlightTipModule:function(e){var t=ge(e.module);if(t&&hasClass(t,"module")){cur.__narrowBarForceNotFixed=!0,scrollToY(getXY(t)[1]-100,200);var n=()=>{cur.hightlighedModule.hideTT(),enableBodyScroll(),delete cur.__narrowBarForceNotFixed,updateNarrow(),e.onClose&&e.onClose()};cur.hightlighedModule=new c.default(t,e.text,{highlight:!0,width:250,offset:[0,-17],side:"bottom",withCloseButton:!0,onBGClick:n,onCloseButtonClick:n}),cur.hightlighedModule.show(),disableBodyScroll()}},hightlightPodcasts:function(e){setTimeout(()=>{M.hightlightTipModule({module:"podcast",text:getLang("groups_onboarding_podcast"),onClose:()=>{ajax.post("al_index.php",{act:"hide_feature_tt",hash:e,type:"podcasts_onboarding"})}}),setTimeout(()=>{cur.hightlighedModule&&window.onboardingBG&&triggerEvent(window.onboardingBG,"click")},1e4)},1500)},joinChat:function(e,t,n,r){Object(f.joinChatBox)(e,t,n,r)},showReportGroupForm:e=>{Object(b.showComponentInBox)(r.createElement(v,{groupId:-cur.oid,reasons:cur.communityReportReasons,hash:e}))},hideEvergreenNotice(e,t,n){e.closest(".page_block").style.display="none",ajax.post("al_groups.php",{act:"evergreen_notice_hide",group_id:t,hash:n},{onFail:e=>console.log(e)})},openEvergreenLongread(){nav.go("/@adminsclub-evergreen")}};window.Groups=M;try{window.stManager.done(window.jsc("web/groups.js"))}catch(e){}},S2bU:function(e,t,n){"use strict";n.r(t),n.d(t,"replaceHyperLinks",(function(){return i})),n.d(t,"replaceEmailLinks",(function(){return s})),n.d(t,"replaceMentions",(function(){return u})),n.d(t,"replaceMassMentions",(function(){return c})),n.d(t,"replaceHashtags",(function(){return f})),n.d(t,"linksReplacer",(function(){return g}));var r,a=n("h++7"),o=n("t7n3");function i(e,t){for(var n,r=0,o=e;null!==(n=a.MESSAGE_REGEXP.exec(e));){var i=(n=l(n))[0].length,s=n.index+i,u=e[n.index-1],c=e[s-1],f=void 0!==u&&/([\w\$А-Яа-яёЁєЄҐґЇїІіЈј\—\-\_@;.])/i.test(u),g=void 0!==c&&/([:;$])/i.test(c);if(!f&&!g){var h=d(n),p=h.domain.toLowerCase();if(p.length<=a.MAX_DOMAIN_LENGTH&&a.TOP_DOMAINS.includes(p)){var m=t(h);o=o.slice(0,n.index+r)+m+o.slice(s+r),r+=m.length-i}}}return o}function s(e,t){return e.replace(a.EMAIL,t||function(e){return'<a href="mailto:'+e+'">'+e+"</a>"})}function u(e,t){return e.replace(a.MENTION,t||function(e,t,n,r,a){return'<a href="/'+(t+n)+'" class="mem_link" mention="'+Object(o.clean)(r||"")+'" mention_id="'+Object(o.clean)(t+n)+'" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)">'+a+"</a>"})}function c(e,t){return e.replace(a.RE_MASSMENTION,(function(e){return t?t(e,"","",e,e):'<span class="mem_pseudolink" data-mention="'+e.slice(1).toLowerCase()+'">'+e+"</span>"}))}function l(e){if(!e[0]||!e[6])return e;var t=e[0].length-1,n=e[6].length-1;return"."===e[0][t]&&"."===e[6][n]&&(e[0]=e[0].slice(0,t),e[6]=e[6].slice(0,n)),e}function d(e){return{full:e[0],protocol:e[1]||"http://",url:e[2],domain:e[4],query:e[6]||""}}function f(e,t){return e.replace((r||(r=new RegExp(a.RE_HASHTAG_EXTRACTION_PATTERN,"ig")),r),(function(e,n,r,a,o){return(n||"")+t(r+(o||""))}))}function g(e,t){var n=t.url,r=t.full,i=t.protocol,s=t.query,u=t.domain;try{r=decodeURIComponent(r)}catch(e){}if(r.length>55&&(r=r.substr(0,53)+".."),r=Object(o.clean)(r).replace(/&amp;/g,"&"),!e&&u.match(a.OUR_DOMAINS)){var c=n=Object(o.replaceEntities)(n).replace(a.ENTITIES,encodeURIComponent),l=n.indexOf("#/"),d="";l>=0?c=n.substr(l+1):(l=n.indexOf("#!"))>=0&&(c="/"+n.substr(l+2).replace(/^\//,""));var f=c.match(a.VK_DOMAIN);return f&&f[1].length<32&&(d=' mention_id="'+f[1]+'" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)"'),'<a href="'+function(e){return e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(i+n+s)+'" target="_blank" rel="noopener"'+d+">"+r+"</a>"}var g=Object(o.replaceEntities)(n+s).toString();return'<a href="'+("away.php?utf=1&to="+encodeURIComponent(i+g))+'" target="_blank" rel="noopener" onclick="'+("return goAway('"+Object(o.clean)((i+n+s).replace(/'/g,"\\'"))+"', {}, event);")+'">'+r+"</a>"}},Siog:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("rwOc")),a=o(n("2cCT"));function o(e){return e&&e.__esModule?e:{default:e}}var i={narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s={short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},u={uppercase:["AM","PM"],lowercase:["am","pm"],long:["a.m.","p.m."]};var c={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},weekday:(0,r.default)(i,"long"),weekdays:(0,a.default)(i,"long"),month:(0,r.default)(s,"long"),months:(0,a.default)(s,"long"),timeOfDay:(0,r.default)(u,"long",(function(e){return e/12>=1?1:0})),timesOfDay:(0,a.default)(u,"long")};t.default=c,e.exports=t.default},SslY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.rangeShape=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),a=s(n("17x9")),o=s(n("TSYQ")),i=n("b/SL");function s(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e,n){var a,s,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,u=p(t).call(this,e,n),a=!u||"object"!==c(u)&&"function"!=typeof u?m(s):u,b(m(a),"handleKeyEvent",(function(e){var t=a.props,n=t.day,r=t.onMouseDown,o=t.onMouseUp;[13,32].includes(e.keyCode)&&("keydown"===e.type?r(n):o(n))})),b(m(a),"handleMouseEvent",(function(e){var t=a.props,n=t.day,r=t.disabled,o=t.onPreviewChange,i=t.onMouseEnter,s=t.onMouseDown,u=t.onMouseUp,c={};if(r)o();else{switch(e.type){case"mouseenter":i(n),o(n),c.hover=!0;break;case"blur":case"mouseleave":c.hover=!1;break;case"mousedown":c.active=!0,s(n);break;case"mouseup":e.stopPropagation(),c.active=!1,u(n);break;case"focus":o(n)}Object.keys(c).length&&a.setState(c)}})),b(m(a),"getClassNames",(function(){var e,t=a.props,n=t.isPassive,r=t.isToday,i=t.isWeekend,s=t.isStartOfWeek,u=t.isEndOfWeek,c=t.isStartOfMonth,l=t.isEndOfMonth,d=t.disabled,f=t.styles;return(0,o.default)(f.day,(b(e={},f.dayPassive,n),b(e,f.dayDisabled,d),b(e,f.dayToday,r),b(e,f.dayWeekend,i),b(e,f.dayStartOfWeek,s),b(e,f.dayEndOfWeek,u),b(e,f.dayStartOfMonth,c),b(e,f.dayEndOfMonth,l),b(e,f.dayHovered,a.state.hover),b(e,f.dayActive,a.state.active),e))})),b(m(a),"renderPreviewPlaceholder",(function(){var e,t=a.props,n=t.preview,s=t.day,u=t.styles;if(!n)return null;var c=n.startDate?(0,i.endOfDay)(n.startDate):null,l=n.endDate?(0,i.startOfDay)(n.endDate):null,d=(!c||(0,i.isAfter)(s,c))&&(!l||(0,i.isBefore)(s,l)),f=!d&&(0,i.isSameDay)(s,c),g=!d&&(0,i.isSameDay)(s,l);return r.default.createElement("span",{className:(0,o.default)((e={},b(e,u.dayStartPreview,f),b(e,u.dayInPreview,d),b(e,u.dayEndPreview,g),e)),style:{color:n.color}})})),b(m(a),"renderSelectionPlaceholders",(function(){var e=a.props,t=e.styles,n=e.ranges,s=e.day;return"date"===a.props.displayMode?(0,i.isSameDay)(a.props.day,a.props.date)?r.default.createElement("span",{className:t.selected,style:{color:a.props.color}}):null:n.reduce((function(e,t){var n=t.startDate,r=t.endDate;if(n&&r&&(0,i.isBefore)(r,n)){var a=[r,n];n=a[0],r=a[1]}n=n?(0,i.endOfDay)(n):null,r=r?(0,i.startOfDay)(r):null;var o=(!n||(0,i.isAfter)(s,n))&&(!r||(0,i.isBefore)(s,r)),u=!o&&(0,i.isSameDay)(s,n),c=!o&&(0,i.isSameDay)(s,r);return o||u||c?[].concat(g(e),[f({isStartEdge:u,isEndEdge:c,isInRange:o},t)]):e}),[]).map((function(e,n){var i;return r.default.createElement("span",{key:n,className:(0,o.default)((i={},b(i,t.startEdge,e.isStartEdge),b(i,t.endEdge,e.isEndEdge),b(i,t.inRange,e.isInRange),i)),style:{color:e.color||a.props.color}})}))})),a.state={hover:!1,active:!1},a}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){return r.default.createElement("button",l({type:"button",onMouseEnter:this.handleMouseEvent,onMouseLeave:this.handleMouseEvent,onFocus:this.handleMouseEvent,onMouseDown:this.handleMouseEvent,onMouseUp:this.handleMouseEvent,onBlur:this.handleMouseEvent,onPauseCapture:this.handleMouseEvent,onKeyDown:this.handleKeyEvent,onKeyUp:this.handleKeyEvent,className:this.getClassNames(this.props.styles)},this.props.disabled||this.props.isPassive?{tabIndex:-1}:{},{style:{color:this.props.color}}),this.renderSelectionPlaceholders(),this.renderPreviewPlaceholder(),r.default.createElement("span",{className:this.props.styles.dayNumber},r.default.createElement("span",null,(0,i.format)(this.props.day,this.props.dayDisplayFormat))))}}])&&h(n.prototype,a),s&&h(n,s),t}(r.Component);v.defaultProps={};var y=a.default.shape({startDate:a.default.object,endDate:a.default.object,color:a.default.string,key:a.default.string,autoFocus:a.default.bool,disabled:a.default.bool,showDateDisplay:a.default.bool});t.rangeShape=y,v.propTypes={day:a.default.object.isRequired,dayDisplayFormat:a.default.string,date:a.default.object,ranges:a.default.arrayOf(y),preview:a.default.shape({startDate:a.default.object,endDate:a.default.object,color:a.default.string}),onPreviewChange:a.default.func,previewColor:a.default.string,disabled:a.default.bool,isPassive:a.default.bool,isToday:a.default.bool,isWeekend:a.default.bool,isStartOfWeek:a.default.bool,isEndOfWeek:a.default.bool,isStartOfMonth:a.default.bool,isEndOfMonth:a.default.bool,color:a.default.string,displayMode:a.default.oneOf(["dateRange","date"]),styles:a.default.object,onMouseDown:a.default.func,onMouseUp:a.default.func,onMouseEnter:a.default.func};var O=v;t.default=O},Syd7:function(e,t,n){"use strict";n.r(t),n.d(t,"getPeerProfileHeight",(function(){return X})),n.d(t,"mount",(function(){return Z}));var r=n("q1tI"),a=n("i8i4"),o=n("rHUl"),i=n("P13b"),s=(n("91GP"),n("17x9"),n("ZxpX")),u=n("ErRf"),c=n("nAFc"),l=n("ERyv"),d=n("4+be"),f=n("6krn"),g=n("754W"),h=n("6aSF"),p=n("XpgC"),m=n("vT4u"),_=n("EasH"),b=f.default.getLang;class v extends r.Component{constructor(){super(...arguments),this.onAdTagAlertClick=()=>{Object(_.showFastBox)(b("mail_ad_tag_no_access_box_title"),b("mail_ad_tag_no_access_box_text"))}}render(){var e=this.props.data;if(e.adId){var t=`ads?act=office&union_id=${e.adId}&utm_medium=community_messages_ad_tag&utm_source=dialog`;return r.createElement("div",{className:"PeerProfileTagsListItem PeerProfileTagsListItem--adTag"},e.hasAdAccess&&r.createElement("a",{className:"PeerProfileTagsListItem__adTagLink",href:t,target:"_blank"},r.createElement("span",{className:"PeerProfileTagsListItem__adTagText"},b("mail_ad_tag_text_prefix")," ",e.adId)),!e.hasAdAccess&&r.createElement("button",{className:"PeerProfileTagsListItem__adTagAlert",onClick:this.onAdTagAlertClick},r.createElement("span",{className:"PeerProfileTagsListItem__adTagText"},b("mail_ad_tag_no_access_text"))))}return r.createElement("div",{className:"PeerProfileTagsListItem",style:{backgroundColor:e.color}},r.createElement("span",null,Object(c.decodeHTMLEntities)(e.name)))}}var y=v,O=f.default.getLang;class w extends r.Component{constructor(e){super(e),this.onExtraClick=()=>{this.setState({isTagsCollapsed:!1})},this.state={isTagsCollapsed:!0}}render(){var e=this.props,t=e.peerTags,n=e.tags,a=e.isPeerProfileCollapsed,o=e.adId,i=e.hasAdAccess,s=e.toggleProfile,u=n.filter(e=>t.includes(e.id));o&&u.unshift({adId:o,hasAdAccess:i});var c=0;a&&this.state.isTagsCollapsed&&u.length>5&&(c=u.splice(5).length);return u=u.map((e,t)=>r.createElement(y,{key:t,data:e})),r.createElement("div",{className:"PeerProfileTagsList"},u.length>0&&u,c>0&&r.createElement("div",{className:"PeerProfileTagsListItem PeerProfileTagsListItem--extra",onClick:this.onExtraClick},"+ "+O("mail_im_peer_profile_extra_tags",c)),!u.length&&r.createElement("div",{className:"PeerProfileTagsListItem--empty"},O("mail_im_peer_profile_tags_empty")," ",r.createElement("span",{className:"PeerProfileTagsList__linkDivider"},"·")," ",r.createElement(g.default,{className:"PeerProfileTagsList__toggleProfileLink",onClick:s},O(a?"mail_im_peer_profile_toggle_tags_on":"mail_im_peer_profile_toggle_tags_off"))))}}var T=w,j=n("0Rlc");var E=function(e){var t=e.data,n=e.onCheckboxChange;return r.createElement("div",{className:"PeerProfileTagsGridItem",onClick:e=>{e&&e.preventDefault(),n(t.id,!t.isChecked)}},r.createElement(j.default,{className:"PeerProfileTagsGridItem__checkbox",checked:t.isChecked,onChange:(e,r)=>n(t.id,r)},r.createElement("span",{className:"PeerProfileTagsGridItem__color",style:{backgroundColor:t.color}}),r.createElement("span",{className:"PeerProfileTagsGridItem__name",title:t.name},Object(c.decodeHTMLEntities)(t.name))))};class D extends r.Component{constructor(){super(...arguments),this.onCheckboxChange=(e,t)=>{this.props.onPeerTagsChange(e,t)}}render(){var e=this.props.tags;return r.createElement("div",{className:"PeerProfileTagsGrid"},e.map((e,t)=>r.createElement(E,{key:t,data:e,onCheckboxChange:this.onCheckboxChange})))}}var C=D,S=n("r7nW"),M=n("Ht+d"),k=n("6raB"),I=n("0toi"),P=f.default.getLang;class L extends r.Component{constructor(e){super(e),this.onKeyDown=e=>"Enter"!==e.key||(e.preventDefault(),!1),this.inputRef=r.createRef()}componentDidMount(){this.props.data.id||this.inputRef.current.focus()}render(){var e=this.props,t=e.index,n=e.data,a=e.onNameChange,o=e.onRemove;return r.createElement("div",{className:"PeerProfileTagsModalField"},r.createElement("input",{type:"hidden",value:n.id?n.id:""}),r.createElement("input",{type:"text",className:"PeerProfileTagsModalField__input",value:Object(c.decodeHTMLEntities)(n.name),ref:this.inputRef,onChange:e=>a(e,t),onKeyDown:this.onKeyDown,maxLength:20,placeholder:P("mail_im_peer_profile_manage_tags_placeholder")}),r.createElement("span",{className:"PeerProfileTagsModalField__color",style:{backgroundColor:n.color}}),r.createElement(p.default,{position:"t",text:P("mail_im_peer_profile_manage_tags_remove")},r.createElement("span",{className:"PeerProfileTagsModalField__remove",onClick:()=>o(t)})))}}var A=L;function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var x=f.default.getLang,R=["#4bb34b","#5c9ce6","#e64646","#792ec0","#63b9ba","#ffa000","#ffc107","#76787a","#9e8d6b","#45678f","#539b9c","#454647","#7a6c4f","#6bc76b","#5181b8","#ff5c5c","#a162de","#7ececf","#aaaeb3","#bbaa84"],F=R[0];class H extends r.Component{constructor(e){var t;super(e),t=this,this.generateEmptyTag=()=>({name:"",color:this.state&&this.state.tags.length?this.getAvailableColor():F,state:"new"}),this.getAvailableColor=()=>{var e=[...this.state.tags].reduce((e,t)=>("deleted"!==t.state&&(e[t.color]=!0),e),{});return R.find(t=>!e[t])},this.onAddLinkClick=e=>{e&&e.preventDefault(),this.state.tags.filter(e=>"deleted"!==e.state).length>=20||this.setState(e=>({tags:[...e.tags,this.generateEmptyTag()]}),()=>{this.inputsRef.current.scrollIntoView({block:"end"})})},this.onNameChange=(e,t)=>{var n=e.target.value;this.setState({tags:this.state.tags.map((e,r)=>r===t?N({},e,{name:n,state:e.state||"changed"}):e)})},this.onRemove=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.state.tags,a=r[e];!n&&a.id&&a.uses>0?t.setState({isConfirmationModalOpen:!0,indexToRemove:e}):t.setState({tags:t.state.tags.filter((t,n)=>n!==e),deletedTags:[...t.state.deletedTags,N({},a,{state:"deleted"})]})},this.onSubmit=e=>{e&&e.preventDefault();var t=[...this.state.tags,...this.state.deletedTags].reduce((e,t)=>(t.name.trim()&&t.state&&e.push({id:t.id,name:t.name,color:t.color,state:t.state}),e),[]);this.setState({isLoading:!0}),this.props.onSave(t)},this.toggleConfirmationModal=(e,t)=>{e&&e.preventDefault(),this.setState({isConfirmationModalOpen:t})},this.state={tags:e.tags.length?e.tags.map(e=>N({},e)):[this.generateEmptyTag()],deletedTags:[],isLoading:!1,isConfirmationModalOpen:!1,indexToRemove:null},this.inputsRef=r.createRef()}render(){var e=this.state,t=e.tags,n=e.isConfirmationModalOpen,a=t[e.indexToRemove],o=Object(s.classNames)("PeerProfileTagsModal",{"PeerProfileTagsModal--hidden":n});return r.createElement(r.Fragment,null,r.createElement(S.default,{onClose:this.props.onClose,className:o,disableBackdropClick:!0,disableEscapeClose:!0},r.createElement("form",{onSubmit:this.onSubmit},r.createElement(I.default.Header,{title:x("mail_im_peer_profile_manage_tags_box_title"),onClose:this.props.onClose,appearance:"blue"}),r.createElement(I.default.Body,null,r.createElement(h.default,{className:"PeerProfileTagsModal__scroll",neverHide:!0},r.createElement("div",{className:"PeerProfileTagsModal__tagsInputs",ref:this.inputsRef},this.state.tags.map((e,t)=>r.createElement(A,{index:t,key:t,data:e,onNameChange:this.onNameChange,onRemove:this.onRemove})),this.state.tags.length<20?r.createElement(g.default,{className:"PeerProfileTagsModal__addLink",onClick:this.onAddLinkClick},x("mail_im_peer_profile_manage_tags_add_link")):""))),r.createElement(I.default.Footer,{actionButtons:[r.createElement(M.default,{key:"cancel",appearance:"tertiary",onClick:this.props.onClose},x("global_cancel")),r.createElement(k.default,{key:"save",onClick:this.onSubmit,loading:this.state.isLoading},x("global_save"))]}))),n&&r.createElement(I.default,{title:x("global_warning"),appearance:"blue",actionButtons:[r.createElement(M.default,{key:"cancel",appearance:"tertiary",onClick:e=>this.toggleConfirmationModal(e,!1)},x("global_cancel")),r.createElement(M.default,{key:"delete",onClick:e=>{this.toggleConfirmationModal(e,!1),this.onRemove(this.state.indexToRemove,!0)}},x("global_delete"))],onClose:e=>this.toggleConfirmationModal(e,!1),className:"PeerProfileConfirmationModal"},Object(d.langStr)(1===a.uses?x("mail_im_peer_profile_tag_delete_confirmation_text_single"):x("mail_im_peer_profile_tag_delete_confirmation_text",a.uses,!0),"tag_name",Object(c.decodeHTMLEntities)(a.name))))}}var B=H,Y=n("MV/q"),G=f.default.getLang;class U extends r.Component{constructor(e){var t;super(e),t=this,this.onChange=e=>{var t=e.target.value;this.setState({note:t})},this.onSubmit=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&e.preventDefault();var r=t.state.note&&t.state.note.trim();n||r?(t.setState({isLoading:!0}),t.props.onNoteSave(r)):t.setState({note:""})},this.toggleConfirmationModal=(e,t)=>{e&&e.preventDefault(),this.setState({isConfirmationModalOpen:t})},this.state={note:e.note||"",isLoading:!1,isConfirmationBoxOpen:!1,isConfirmationModalOpen:!1},this.inputRef=r.createRef()}componentDidMount(){this.inputRef.current.element.focus()}render(){var e=Object(s.classNames)("PeerProfileNoteModal",{"PeerProfileNoteModal--hidden":this.state.isConfirmationModalOpen}),t=[...this.props.note?[r.createElement(M.default,{key:"delete",appearance:"link",onClick:e=>this.toggleConfirmationModal(e,!0),className:"PeerProfileNoteModal__deleteButton"},G("mail_im_peer_profile_note_delete_link"))]:[],r.createElement(M.default,{key:"cancel",appearance:"tertiary",onClick:this.props.onClose},G("global_cancel")),r.createElement(k.default,{key:"save",onClick:this.onSubmit,loading:this.state.isLoading},G("global_save"))];return r.createElement(r.Fragment,null,r.createElement(S.default,{onClose:this.props.onClose,className:e,disableBackdropClick:!0,disableEscapeClose:!0},r.createElement("form",{onSubmit:this.onSubmit},r.createElement(I.default.Header,{title:G("mail_im_peer_profile_note_box_title"),onClose:this.props.onClose,appearance:"blue"}),r.createElement(I.default.Body,null,r.createElement(Y.default,{className:"PeerProfileNoteModal__input",value:Object(c.decodeHTMLEntities)(this.state.note),placeholder:G("mail_im_peer_profile_note_box_placeholder"),onChange:this.onChange,style:{height:21},maxLength:96,ref:this.inputRef})),r.createElement(I.default.Footer,{actionButtons:t}))),this.state.isConfirmationModalOpen&&r.createElement(I.default,{title:G("global_warning"),appearance:"blue",actionButtons:[r.createElement(M.default,{key:"cancel",appearance:"tertiary",onClick:e=>this.toggleConfirmationModal(e,!1)},G("global_cancel")),r.createElement(M.default,{key:"delete",onClick:e=>{this.toggleConfirmationModal(e,!1),this.setState({note:""},()=>this.onSubmit(null,!0))}},G("global_delete"))],onClose:e=>this.toggleConfirmationModal(e,!1),className:"PeerProfileConfirmationModal"},G("mail_im_peer_profile_note_delete_confirmation_text")))}}var q=U;function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=f.default.getLang;class V extends r.PureComponent{constructor(e){super(e),this.toggleProfile=()=>{this.setState({isCollapsed:!this.state.isCollapsed})},this.onPeerTagsChange=(e,t)=>{var n=this.props.store,r=n.get().peer;this.setState(n=>({peerTags:t?[].concat(n.peerTags,e):n.peerTags.filter(t=>t!==e)}),()=>{n.set(m.peerProfileToggleTag.bind(null,e,t,t?"bind":"unbind",r,[...this.state.peerTags])).catch(e=>Object(l.imWeirdCatch)("PeerProfile.toggleTag",e))})},this.onSave=e=>{this.setState({tags:e},()=>{this.props.store.set(m.peerProfileManageTags.bind(null,[...this.state.tags])).then(e=>{var t=e.get().peer_profile_tags;this.setState({isCollapsed:0===t.length,tags:t,isTagsModalOpened:!1}),showDoneBox(z("mail_im_peer_profile_manage_tags_success"),{out:1e3})}).catch(e=>Object(l.imWeirdCatch)("PeerProfile.manageTags",e))})},this.onNoteSave=e=>{var t=this.props.store,n=t.get().peer;t.set(m.peerProfileSaveNote.bind(null,n,e)).then(()=>{this.setState({note:e,isNoteModalOpened:!1}),showDoneBox(z(e?"mail_im_peer_profile_save_note_success":"mail_im_peer_profile_delete_note_success"),{out:1e3})}).catch(e=>Object(l.imWeirdCatch)("PeerProfile.saveNote",e))},this.toggleModal=(e,t,n)=>{switch(e&&e.preventDefault(),n){case"tags":this.setState({isTagsModalOpened:t});break;case"note":this.setState({isNoteModalOpened:t})}t&&Object(u.cancelStackPush)("peer_profile_modal",()=>{Object(u.cancelStackFilter)("peer_profile_modal"),this.toggleModal(null,!1,n)})};var t=e.store.get(),n=t.peer,r=Object(o.getTab)(t,n),a=r.peer_profile_info||{};this.state={isCollapsed:!0,tags:t.peer_profile_tags||[],peerTags:r.peer_tags||[],note:a.note,isTagsModalOpened:!1,isNoteModalOpened:!1}}render(){var e=this.props.store.get(),t=Object(o.getTab)(e,e.peer),n=this.state,a=n.isCollapsed,i=n.tags,u=n.peerTags,l=n.note,f=n.isTagsModalOpened,m=n.isNoteModalOpened,_=i.length>0,b=_?i.reduce((e,t)=>(e[t.id]=!0,e),{}):[],v=u.filter(e=>b[e]),y=t.peer_profile_info,O=y&&(y.city||y.age),w=Object(s.classNames)("PeerProfile__wrapper",{"PeerProfile__wrapper--collapsed":a});return r.createElement("div",{className:w},r.createElement(h.default,{className:"PeerProfile__scroll",neverHide:!0},r.createElement("dl",{className:"PeerProfile__container"},r.createElement("dt",{className:"PeerProfile__label"},z("mail_im_peer_profile_tags_label_text")),r.createElement("dd",{className:"PeerProfile__content PeerProfile__tags"},a&&!_&&!t.ad_id&&r.createElement(g.default,{className:"PeerProfile__manageTagsLink",onClick:e=>this.toggleModal(e,!0,"tags")},z("mail_im_peer_profile_manage_tags")),(_||t.ad_id)&&r.createElement(T,{tags:i,peerTags:v,isPeerProfileCollapsed:a,adId:t.ad_id,hasAdAccess:t.has_ad_access,toggleProfile:this.toggleProfile}),!a&&r.createElement(C,{tags:[...i].map(e=>W({},e,{isChecked:u.includes(e.id)})),onPeerTagsChange:this.onPeerTagsChange}),!a&&r.createElement(g.default,{className:"PeerProfile__manageTagsLink",onClick:e=>this.toggleModal(e,!0,"tags")},z("mail_im_peer_profile_manage_tags")),f&&r.createElement(B,{tags:i,onSave:this.onSave,onClose:e=>this.toggleModal(e,!1,"tags")})),r.createElement("dt",{className:"PeerProfile__label"},z("mail_im_peer_profile_info_label_text")),r.createElement("dd",{className:"PeerProfile__content PeerProfile__info"},O&&r.createElement(r.Fragment,null,y.city&&r.createElement("span",{className:"PeerProfile__infoItem"},Object(c.decodeHTMLEntities)(y.city)),y.age&&r.createElement("span",{className:"PeerProfile__infoItem"},Object(c.decodeHTMLEntities)(y.age)),y.likes_cnt&&r.createElement(p.default,{className:"PeerProfile__infoTooltip",position:"t",text:z("mail_peer_profile_likes_replies_tooltip"),appearance:"light"},r.createElement("span",{className:"PeerProfile__infoItem"},y.likes_cnt&&r.createElement("span",{className:"PeerProfile__infoItem"},Object(c.decodeHTMLEntities)(y.likes_cnt)),y.replies_cnt&&r.createElement("span",{className:"PeerProfile__infoItem"},Object(c.decodeHTMLEntities)(y.replies_cnt))))),!O&&r.createElement("span",null,z("mail_im_peer_profile_info_empty"))),e.is_peer_profile_note_enabled&&r.createElement(r.Fragment,null,r.createElement("dt",{className:"PeerProfile__label"},z("mail_im_peer_profile_note_label_text")),r.createElement("dd",{className:"PeerProfile__content PeerProfile__note"},!l&&r.createElement(g.default,{onClick:e=>this.toggleModal(e,!0,"note")},z("mail_im_peer_profile_note_add_link")),!!l&&r.createElement(r.Fragment,null,r.createElement("span",{className:"PeerProfile__noteText"},Object(c.decodeHTMLEntities)(l)),r.createElement("span",{className:"PeerProfile__noteDivider"}," · "),r.createElement(g.default,{onClick:e=>this.toggleModal(e,!0,"note")},z("mail_im_peer_profile_note_edit_link"))),m&&r.createElement(q,{note:l,onNoteSave:this.onNoteSave,onClose:e=>this.toggleModal(e,!1,"note")}))),r.createElement("dt",{className:"PeerProfile__label"},z("mail_im_peer_profile_join_date_label_text")),r.createElement("dd",{className:"PeerProfile__content"},y&&y.join_date?Object(c.decodeHTMLEntities)(y.join_date):Object(d.langSex)(t.sex,z("mail_im_peer_profile_join_date_empty_text","raw"))))),(_||t.ad_id)&&r.createElement("button",{className:"PeerProfile__toggler",onClick:this.toggleProfile}))}}var $=V;function K(){return document.querySelector("#PeerProfile")}function X(){var e=K();return e?e.offsetHeight:0}function Q(e,t){if(t){var n=parseInt(getStyle(e,"padding-top"));e.style.paddingTop=n+X()+"px"}else e.style.removeProperty("padding-top")}function Z(e){return{render(t){var n=t.get(),s=K(),u=n.peer,c=Object(o.getTab)(n,u);n.is_peer_profile_enabled&&s&&Object(i.isFullyLoadedTab)(n,u)&&!Object(o.isChannelPeer)(c)&&!Object(o.isCommunityChat)(t,u)&&(s.innerHTML&&a.unmountComponentAtNode(s),a.render(r.createElement($,{store:t}),s,()=>{Q(e,!0)}))},destroy(){var t=K();t&&(a.unmountComponentAtNode(t),Q(e,!1))}}}},TBLV:function(e,t,n){"use strict";n.r(t);n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),a=(n("17x9"),n("ZxpX"));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=e=>{var t=e.className,n=e.children,s=i(e,["className","children"]),u=Object(a.classNames)("Radio",t,{"Radio--disabled":e.disabled});return r.createElement("label",{className:u},r.createElement("input",o({className:"Radio__input Radio__visuallyHidden",type:"radio"},s)),r.createElement("span",{className:"Radio__control"}),Boolean(n)&&r.createElement("span",{className:"Radio__text"},n))};s.defaultProps={className:"",name:void 0,onChange:void 0,checked:void 0,defaultChecked:void 0,autoFocus:!1,disabled:!1,children:null},t.default=s},TSYQ:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var i=a.apply(null,r);i&&e.push(i)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},UX9e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n,r){var a=r||{},o=a.type?String(a.type):t,i=e[o]||e[t],s=n[1];return i.findIndex((function(e){return e.test(s)}))}},e.exports=t.default},UXbF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DateRange",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Calendar",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"DateRangePicker",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"DefinedRange",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"defaultInputRanges",{enumerable:!0,get:function(){return s.defaultInputRanges}}),Object.defineProperty(t,"defaultStaticRanges",{enumerable:!0,get:function(){return s.defaultStaticRanges}}),Object.defineProperty(t,"createStaticRanges",{enumerable:!0,get:function(){return s.createStaticRanges}});var r=u(n("XMEW")),a=u(n("+R+6")),o=u(n("53aN")),i=u(n("BUpX")),s=n("6Ysw");function u(e){return e&&e.__esModule?e:{default:e}}},WbBG:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},WtjO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return parseInt(e[1],10)},e.exports=t.default},Wu9C:function(e,t,n){"use strict";n.r(t),n.d(t,"isPinnedMessageVisibleInTab",(function(){return f})),n.d(t,"pinnedMessageHide",(function(){return g})),n.d(t,"pinnedMessageUnHide",(function(){return h})),n.d(t,"pinnedMessageUnpin",(function(){return p})),n.d(t,"mount",(function(){return y}));var r=n("ofcU"),a=n("vT4u"),o=n("P13b");function i(e){return{unmount(){Object(r.destroyModule)(e)}}}function s(e,t,n,a){var s=Object(r.createMutations)(i).bindMutations,u=t=>{n().messageKeyboardButtonClick(t),e.hide()};return s(Object(r.createModule)({handlers:(t,n)=>{n(e.bodyNode,"click",o.MESSAGE_KEYBOARD_BUTTON_CLASS,u)}}))}var u=n("rHUl"),c=n("aong"),l=n("uytb"),d=n("FWc3");function f(e,t){if(Object(c.unpackStore)(e).searchShown)return!1;var n=Object(u.getTab)(e,t),r=n&&Object(u.parserMessage)(n.pinned);return!!r&&n.pinHideId!=r.chat_local_id}function g(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Object(u.getTab)(e,t),o=a&&Object(u.parserMessage)(a.pinned);a&&o&&(a.pinHideId=o.chat_local_id,cur.imDb.update(l.PIN_HIDDEN_ID_OP,[a.peerId,a.pinHideId]),_(n,t,e),re(geByClass1("_im_pinned_tt")),r&&window.Notifier&&Notifier.lcSend("pin_hide",{hide:1,peer:t}),statlogsValueEvent("im_pinned_messages","hide"))}function h(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Object(u.getTab)(e,t);a&&a.pinHideId&&(delete a.pinHideId,cur.imDb.update(l.PIN_HIDDEN_ID_OP,[a.peerId,void 0]),_(n,t,e),r&&window.Notifier&&Notifier.lcSend("pin_hide",{hide:0,peer:t}),statlogsValueEvent("im_pinned_messages","show"))}function p(e,t,n){var r=_.bind(null,n,t),i=Object(o.showUnpinDialog)(()=>{i.hideProgress(),i.hide(),e.set(a.unpinMessageOptimistic.bind(null,t)).then(r).then(e=>e.set(a.unpinMessage.bind(null,t))).then(r)})}function m(e,t,n){var r=e.get().peer,a=Object(u.parserMessage)(Object(u.getTab)(e,r).pinned);if(n.target.classList.contains("_im_pin_hide"))a&&g(e,r,t);else if("A"!==n.target.tagName){var i=a&&a.messageId;i&&!Object(o.isAlreadyDeleted)(e,r,i)?Object(o.focusOnMessage)(e,t().focusOnMessage,r,i):Object(o.showPinnedBox)(e,t,r,s,n),statlogsValueEvent("im_pinned_messages","open")}}function _(e,t,n){return e().updateChatTopic(t,n),Object(a.setActions)(n.get()),e().updateActions(n),n}function b(e){Object(d.showTooltip)(e.target,{text:getLang("mail_hide_unpin_hover"),black:1,needLeft:1,shift:[8,4],forcetoup:!0,className:"_im_pinned_tt",appendEl:bodyNode})}function v(e){return{unmount(){Object(r.destroyModule)(e)}}}function y(e,t,n){var a=Object(r.createMutations)(v).bindMutations,o=m.bind(null,t,n),i=b.bind(null);return a(Object(r.createModule)({handlers:(t,n)=>{n(e,"click","_im_pinned_message",o),n(e,"mouseover","_im_pin_hide",i)}}))}},X3vJ:function(e,t,n){"use strict";n.r(t),n.d(t,"initGroupsMenu",(function(){return g}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("KKXr");var r=n("D1OX"),a=n("Egk5"),o=n("XzvV"),i=n("zxIV"),s=n("/PiP"),u=n("Ia1d"),c=n("pp2G"),l=n("XuKo");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){window.onDomReady((function(){var t=ge("group_section_menu_gallery");if(t){var n=Object(i.geByClass)("ui_gallery_item",t),f={markOutside:!0};(!n||n.length<4)&&(f.scrollX=!1,f.scrollY=!1),Object(i.domQuery1)(".ui_gallery_item ._transparent",t)&&(f.scrollX=!1,f.scrollY=!1);var g=new r.UIGallery(t,f);(g?g.getItems():[]).forEach(t=>{var n=t.firstElementChild;if(n&&(Object(a.addEvent)(n,"click",t=>{var r=n.getAttribute("data-hash"),i=Number(n.getAttribute("data-id")),f=Number(n.getAttribute("data-type")),g=Number(n.getAttribute("data-pos")),h=n.getAttribute("data-object-id");if(r&&i&&f&&h&&(Object(o.statlogsValueEvent)("groups_menu_item_click",r,e,i,f,g),!Object(a.checkEvent)(t))){var p=null;switch(f){case 1:var m={w:"wall"+h};(p=n.getAttribute("data-click")?JSON.parse(n.getAttribute("data-click")):{}).reply&&(m.reply=p.reply),Object(s.showWiki)(m,!1,t);break;case 5:Object(u.showVideo)(""+h,"",{autoplay:1},t);break;case 16:-1===h.indexOf("_")?nav.change({z:"tag"+h},t):nav.change({z:"album"+h},t);break;case 4:Object(s.showPhoto)(""+h,"",{},t);break;case 3:Object(s.showWiki)({w:"product"+h,from:"group_module"},!1,t,{queue:1});break;case 8:case 17:p=n.getAttribute("data-click")?JSON.parse(n.getAttribute("data-click")):{};var _=d(h.split("_"),2),b=_[0],v=_[1],y=p.access_hash;c.AudioUtils.showAudioPlaylist(b,v,y,void 0,t);break;case 10:var O=d(h.split("_"),2),w=O[0],T=O[1],j=n.getAttribute("hrefparams"),E={};if(j){var D=j.split("=");D[1]&&(E.ref=D[1])}if(6441755===Number(w))window.Groups.inviteToChat(-Number(T));else{if((p=n.getAttribute("data-click")?JSON.parse(n.getAttribute("data-click")):{})&&p.forward){var C=p.forward.split("#");C=C?C[1]?C[1]:C[0]:"",E.w=`app${h}#${C}`}else E.w="app"+h;if(!p.show_wiki)return!0;Object(s.showWiki)(E)}break;case 25:Object(s.showPodcast)(null,h);break;case 26:var S=d(h.split("_"),2),M=S[0],k=S[1];Object(l.showNarrative)(M,k);break;default:return}Object(a.cancelEvent)(t)}}),10===Number(n.getAttribute("data-type")))){var r=d(n.getAttribute("data-object-id").split("_"),1)[0];6441755===Number(r)&&Object(a.addEvent)(n,"mouseover",()=>{window.Groups.inviteToChatPreload()})}})}}))}},XMEW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==g(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),a=d(n("17x9")),o=d(n("+R+6")),i=n("SslY"),s=n("u/mt"),u=n("b/SL"),c=d(n("TSYQ")),l=d(n("aoKj"));function d(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(e,n){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=b(t).call(this,e,n),r=!o||"object"!==g(o)&&"function"!=typeof o?v(a):o,O(v(r),"calcNewSelection",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r.props.focusedRange||r.state.focusedRange,a=r.props,o=a.ranges,i=a.onChange,c=a.maxDate,l=a.moveRangeOnFirstSelection,d=a.disabledDates,f=n[0],g=o[f];if(!g||!i)return{};var h,p=g.startDate,m=g.endDate;if(m||(m=new Date(p)),t)if(0===n[1]){var _=(0,u.differenceInCalendarDays)(m,p);p=e,m=l?(0,u.addDays)(e,_):e,c&&(m=(0,u.min)([m,c])),h=[n[0],1]}else m=e;else p=e.startDate,m=e.endDate;var b=0===n[1];if((0,u.isBefore)(m,p)){b=!b;var v=[m,p];p=v[0],m=v[1]}var y=d.filter((function(e){return(0,u.isWithinInterval)(e,{start:p,end:m})}));if(y.length>0&&(b?p=(0,u.addDays)((0,u.max)(y),1):m=(0,u.addDays)((0,u.min)(y),-1)),!h){var O=(0,s.findNextRangeIndex)(r.props.ranges,n[0]);h=[O,0]}return{wasValid:!(y.length>0),range:{startDate:p,endDate:m},nextFocusRange:h}})),O(v(r),"setSelection",(function(e,t){var n=r.props,a=n.onChange,o=n.ranges,i=n.onRangeFocusChange,s=(r.props.focusedRange||r.state.focusedRange)[0],u=o[s];if(u){var c=r.calcNewSelection(e,t);a(O({},u.key||"range".concat(s+1),m({},u,{},c.range))),r.setState({focusedRange:c.nextFocusRange,preview:null}),i&&i(c.nextFocusRange)}})),O(v(r),"handleRangeFocusChange",(function(e){r.setState({focusedRange:e}),r.props.onRangeFocusChange&&r.props.onRangeFocusChange(e)})),O(v(r),"updatePreview",(function(e){if(e){var t=r.props,n=t.rangeColors,a=t.ranges,o=r.props.focusedRange||r.state.focusedRange,i=a[o[0]].color||n[o[0]]||i;r.setState({preview:m({},e.range,{color:i})})}else r.setState({preview:null})})),r.state={focusedRange:e.initialFocusedRange||[(0,s.findNextRangeIndex)(e.ranges),0],preview:null},r.styles=(0,s.generateStyles)([l.default,e.classNames]),r}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this;return r.default.createElement(o.default,h({focusedRange:this.state.focusedRange,onRangeFocusChange:this.handleRangeFocusChange,preview:this.state.preview,onPreviewChange:function(t){e.updatePreview(t?e.calcNewSelection(t):null)}},this.props,{displayMode:"dateRange",className:(0,c.default)(this.styles.dateRangeWrapper,this.props.className),onChange:this.setSelection,updateRange:function(t){return e.setSelection(t,!1)},ref:function(t){e.calendar=t}}))}}])&&_(n.prototype,a),i&&_(n,i),t}(r.Component);w.defaultProps={classNames:{},ranges:[],moveRangeOnFirstSelection:!1,rangeColors:["#3d91ff","#3ecf8e","#fed14c"],disabledDates:[]},w.propTypes=m({},o.default.propTypes,{onChange:a.default.func,onRangeFocusChange:a.default.func,className:a.default.string,ranges:a.default.arrayOf(i.rangeShape),moveRangeOnFirstSelection:a.default.bool});var T=w;t.default=T},XpgC:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));n("91GP");var r=n("q1tI"),a=n("i8i4"),o=(n("17x9"),n("ZxpX")),i=n("clTp");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=e=>{var t=e.position,n=e.align,r=e.text,a=e.rect,o=e.marginTop,i=e.marginLeft,s=e.maxWidth,u=e.appearance,c=e.className,l=a.left,d=a.top;switch(t){case"t":l+=.5*a.width;break;case"r":l+=a.width,d+=.5*a.height;break;case"b":l+=.5*a.width,d+=a.height;break;case"l":d+=.5*a.height}return{tooltip:{position:t,align:n,text:r,x:l=Math.round(l+i),y:d=Math.round(d+o),maxWidth:s,appearance:u,className:c}}};class c extends r.Component{constructor(e){super(e),this.onMouseEnter=e=>{if(this.state.el){var t=this.props,n=t.text,r=t.position,a=t.align,o=t.marginTop,s=t.marginLeft,u=t.maxWidth,c=t.appearance,l=t.className,d=Object(i.default)(this.state.el);this.update({text:n,position:r,align:a,rect:d,marginTop:o,marginLeft:s,maxWidth:u,appearance:c,className:l})}},this.onMouseLeave=e=>this.update(),this.onTransitionEnd=e=>{"visibility"===e.propertyName&&this.state.tooltip&&this.setState({tooltip:void 0})},this.renderTooltip=()=>{if(!this.state.tooltip)return null;var e=this.state.tooltip,t=e.x,n=e.y,a=e.position,i=e.align,s=e.text,u=e.removed,c=e.maxWidth,l=e.appearance,d=e.className,f=Object(o.classNames)("Tooltip","Tooltip--"+a,"Tooltip--"+l,{"Tooltip--removed":!!u,["Tooltip--align-"+i]:"t"===a||"b"===a},d);return r.createElement("div",{className:f,style:{top:n,left:t},onTransitionEnd:this.onTransitionEnd},r.createElement("div",{className:"Tooltip__in",style:{maxWidth:c},dangerouslySetInnerHTML:{__html:s}}))},this.state={}}componentDidMount(){var e=a.findDOMNode(this);this.setState({el:e}),e.addEventListener("mouseenter",this.onMouseEnter),e.addEventListener("mouseleave",this.onMouseLeave)}componentWillUnmount(){this.state.el.removeEventListener("mouseenter",this.onMouseEnter),this.state.el.removeEventListener("mouseleave",this.onMouseLeave)}static getDerivedStateFromProps(e,t){return t.tooltip&&["text","position","align","maxWidth","appearance"].some(n=>e[n]!==t.tooltip[n])?u(s({},e,{rect:Object(i.default)(t.el)})):null}update(e){if(!e)return this.setState({tooltip:Object.assign({},this.state.tooltip,{removed:!0})});this.setState(u(e))}render(){var e=this.renderTooltip();return e?(this.defaultNode||"undefined"==typeof window||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),r.createElement(r.Fragment,null,this.props.children,a.createPortal(e,this.defaultNode))):this.props.children}}c.defaultProps={position:"b",align:"center",marginTop:0,marginLeft:0,appearance:"dark"}},Xu7z:function(e,t,n){"use strict";n.r(t);var r=n("sNPj");t.default=r.default},ZD4m:function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top}}function a(){var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}function o(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return n&&r?{width:n,height:r}:{width:e.offsetWidth,height:e.offsetHeight}}n.r(t),n.d(t,"getElementOffset",(function(){return r})),n.d(t,"getViewportSize",(function(){return a})),n.d(t,"getElementSize",(function(){return o})),n.d(t,"getJsonDataValue",(function(){return i}));var i=function(e,t){var n=e.getAttribute(t);if(n)try{return JSON.parse(n)}catch(e){return}}},aYHU:function(e,t,n){"use strict";n.r(t),n.d(t,"ajaxPostP",(function(){return o}));var r=n("3oLO"),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),new Promise((function(o,i){r.ajax.post(e,t,a(a({},n),{onDone:function(e){o(e)},onFail:function(e){return i(e),!0}}))}))}},ambf:function(e,t,n){"use strict";n.r(t),n.d(t,"MAX_DEVIATION",(function(){return i})),n.d(t,"EXPIRING_TIME",(function(){return s})),n.d(t,"EXPIRING_SOON_TIME",(function(){return u})),n.d(t,"EXPIRING",(function(){return c})),n.d(t,"EXPIRING_SOON",(function(){return l})),n.d(t,"EXPIRED",(function(){return d})),n.d(t,"casperMessagesStore",(function(){return m}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf");var r=n("MhhX");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=2e3,s=6e4,u=1e4,c="expiring",l="expiring_soon",d="expired",f=[],g={},h={},p=0,m={add(e){var t=a(b(e),3),n=t[0],r=t[1],o=t[2],i=Math.max(n+r-s-o,0),f=Math.max(n+r-u-o,0),p=Math.max(n+r-o,0),m=setTimeout(()=>{_({type:c,message:e})},i),v=setTimeout(()=>{_({type:l,message:e})},f),y=setTimeout(()=>{_({type:d,message:e}),h[e.messageId]=!0,delete g[e.messageId]},p);g[e.messageId]={message:e,expiringTime:i,expiredTime:p,timers:[m,v,y]}},remove(e){this.has(e)&&(g[e].timers.forEach(clearTimeout),delete g[e])},setTimeshift(e){p=1e3*(e||0)},getTimings:e=>g[e]?b(g[e].message):[0,0,0],getExpireTime(e){if(!g[e])return 0;var t=a(b(g[e].message),3),n=t[0],r=t[1],o=t[2];return Math.max(Math.floor((n+r-o)/1e3),0)},isProcessed:e=>!!h[e],subscribe(e){f.push(e)},unsubscribe(e){f=f.filter(t=>t!==e)},has:e=>!!g[e],destroy(){g={},f=[],h={}}};function _(e){f.forEach(t=>t(e))}function b(e){return[1e3*e.date+p,1e3*(Object(r.getMessageTTL)(e)||0),Date.now()]}},aoKj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={dateRangeWrapper:"rdrDateRangeWrapper",calendarWrapper:"rdrCalendarWrapper",dateDisplay:"rdrDateDisplay",dateDisplayItem:"rdrDateDisplayItem",dateDisplayItemActive:"rdrDateDisplayItemActive",monthAndYearWrapper:"rdrMonthAndYearWrapper",monthAndYearPickers:"rdrMonthAndYearPickers",nextPrevButton:"rdrNextPrevButton",month:"rdrMonth",weekDays:"rdrWeekDays",weekDay:"rdrWeekDay",days:"rdrDays",day:"rdrDay",dayNumber:"rdrDayNumber",dayPassive:"rdrDayPassive",dayToday:"rdrDayToday",dayStartOfWeek:"rdrDayStartOfWeek",dayEndOfWeek:"rdrDayEndOfWeek",daySelected:"rdrDaySelected",dayDisabled:"rdrDayDisabled",dayStartOfMonth:"rdrDayStartOfMonth",dayEndOfMonth:"rdrDayEndOfMonth",dayWeekend:"rdrDayWeekend",dayStartPreview:"rdrDayStartPreview",dayInPreview:"rdrDayInPreview",dayEndPreview:"rdrDayEndPreview",dayHovered:"rdrDayHovered",dayActive:"rdrDayActive",inRange:"rdrInRange",endEdge:"rdrEndEdge",startEdge:"rdrStartEdge",prevButton:"rdrPprevButton",nextButton:"rdrNextButton",selected:"rdrSelected",months:"rdrMonths",monthPicker:"rdrMonthPicker",yearPicker:"rdrYearPicker",dateDisplayWrapper:"rdrDateDisplayWrapper",definedRangesWrapper:"rdrDefinedRangesWrapper",staticRanges:"rdrStaticRanges",staticRange:"rdrStaticRange",inputRanges:"rdrInputRanges",inputRange:"rdrInputRange",inputRangeInput:"rdrInputRangeInput",dateRangePickerWrapper:"rdrDateRangePickerWrapper",staticRangeLabel:"rdrStaticRangeLabel",staticRangeSelected:"rdrStaticRangeSelected",monthName:"rdrMonthName",infiniteMonths:"rdrInfiniteMonths",monthsVertical:"rdrMonthsVertical",monthsHorizontal:"rdrMonthsHorizontal"}},"b/SL":function(e,t,n){"use strict";n.r(t),n.d(t,"addDays",(function(){return d})),n.d(t,"addHours",(function(){return g})),n.d(t,"addISOYears",(function(){return w})),n.d(t,"addMilliseconds",(function(){return f})),n.d(t,"addMinutes",(function(){return T})),n.d(t,"addMonths",(function(){return E})),n.d(t,"addQuarters",(function(){return D})),n.d(t,"addSeconds",(function(){return C})),n.d(t,"addWeeks",(function(){return S})),n.d(t,"addYears",(function(){return M})),n.d(t,"areIntervalsOverlapping",(function(){return k})),n.d(t,"closestIndexTo",(function(){return I})),n.d(t,"closestTo",(function(){return P})),n.d(t,"compareAsc",(function(){return L})),n.d(t,"compareDesc",(function(){return A})),n.d(t,"differenceInCalendarDays",(function(){return y})),n.d(t,"differenceInCalendarISOWeeks",(function(){return N})),n.d(t,"differenceInCalendarISOYears",(function(){return x})),n.d(t,"differenceInCalendarMonths",(function(){return R})),n.d(t,"differenceInCalendarQuarters",(function(){return H})),n.d(t,"differenceInCalendarWeeks",(function(){return B})),n.d(t,"differenceInCalendarYears",(function(){return Y})),n.d(t,"differenceInDays",(function(){return G})),n.d(t,"differenceInHours",(function(){return q})),n.d(t,"differenceInISOYears",(function(){return z})),n.d(t,"differenceInMilliseconds",(function(){return U})),n.d(t,"differenceInMinutes",(function(){return V})),n.d(t,"differenceInMonths",(function(){return $})),n.d(t,"differenceInQuarters",(function(){return K})),n.d(t,"differenceInSeconds",(function(){return X})),n.d(t,"differenceInWeeks",(function(){return Q})),n.d(t,"differenceInYears",(function(){return Z})),n.d(t,"eachDayOfInterval",(function(){return J})),n.d(t,"endOfDay",(function(){return ee})),n.d(t,"endOfHour",(function(){return te})),n.d(t,"endOfISOWeek",(function(){return re})),n.d(t,"endOfISOYear",(function(){return ae})),n.d(t,"endOfMinute",(function(){return oe})),n.d(t,"endOfMonth",(function(){return ie})),n.d(t,"endOfQuarter",(function(){return se})),n.d(t,"endOfSecond",(function(){return ue})),n.d(t,"endOfWeek",(function(){return ne})),n.d(t,"endOfYear",(function(){return ce})),n.d(t,"format",(function(){return He})),n.d(t,"formatDistance",(function(){return Ye})),n.d(t,"formatDistanceStrict",(function(){return Ge})),n.d(t,"formatRelative",(function(){return qe})),n.d(t,"getDate",(function(){return We})),n.d(t,"getDay",(function(){return ze})),n.d(t,"getDayOfYear",(function(){return $e})),n.d(t,"getDaysInMonth",(function(){return j})),n.d(t,"getDaysInYear",(function(){return Xe})),n.d(t,"getHours",(function(){return Qe})),n.d(t,"getISODay",(function(){return Ze})),n.d(t,"getISOWeek",(function(){return Je})),n.d(t,"getISOWeeksInYear",(function(){return et})),n.d(t,"getISOYear",(function(){return _})),n.d(t,"getMilliseconds",(function(){return tt})),n.d(t,"getMinutes",(function(){return nt})),n.d(t,"getMonth",(function(){return rt})),n.d(t,"getOverlappingDaysInIntervals",(function(){return at})),n.d(t,"getQuarter",(function(){return F})),n.d(t,"getSeconds",(function(){return ot})),n.d(t,"getTime",(function(){return it})),n.d(t,"getYear",(function(){return st})),n.d(t,"isAfter",(function(){return ut})),n.d(t,"isBefore",(function(){return ct})),n.d(t,"isEqual",(function(){return lt})),n.d(t,"isFirstDayOfMonth",(function(){return dt})),n.d(t,"isFriday",(function(){return ft})),n.d(t,"isLastDayOfMonth",(function(){return gt})),n.d(t,"isLeapYear",(function(){return Ke})),n.d(t,"isMonday",(function(){return ht})),n.d(t,"isSameDay",(function(){return pt})),n.d(t,"isSameHour",(function(){return _t})),n.d(t,"isSameISOWeek",(function(){return vt})),n.d(t,"isSameISOYear",(function(){return yt})),n.d(t,"isSameMinute",(function(){return wt})),n.d(t,"isSameMonth",(function(){return Tt})),n.d(t,"isSameQuarter",(function(){return Et})),n.d(t,"isSameSecond",(function(){return Ct})),n.d(t,"isSameWeek",(function(){return bt})),n.d(t,"isSameYear",(function(){return St})),n.d(t,"isSaturday",(function(){return Mt})),n.d(t,"isSunday",(function(){return kt})),n.d(t,"isThursday",(function(){return It})),n.d(t,"isTuesday",(function(){return Pt})),n.d(t,"isValid",(function(){return le})),n.d(t,"isWednesday",(function(){return Lt})),n.d(t,"isWeekend",(function(){return At})),n.d(t,"isWithinInterval",(function(){return Nt})),n.d(t,"lastDayOfISOWeek",(function(){return Rt})),n.d(t,"lastDayOfISOYear",(function(){return Ft})),n.d(t,"lastDayOfMonth",(function(){return Ht})),n.d(t,"lastDayOfQuarter",(function(){return Bt})),n.d(t,"lastDayOfWeek",(function(){return xt})),n.d(t,"lastDayOfYear",(function(){return Yt})),n.d(t,"max",(function(){return Gt})),n.d(t,"min",(function(){return Ut})),n.d(t,"parse",(function(){return Qt})),n.d(t,"setDate",(function(){return en})),n.d(t,"setDay",(function(){return tn})),n.d(t,"setDayOfYear",(function(){return nn})),n.d(t,"setHours",(function(){return rn})),n.d(t,"setISODay",(function(){return an})),n.d(t,"setISOWeek",(function(){return on})),n.d(t,"setISOYear",(function(){return O})),n.d(t,"setMilliseconds",(function(){return sn})),n.d(t,"setMinutes",(function(){return un})),n.d(t,"setMonth",(function(){return cn})),n.d(t,"setQuarter",(function(){return ln})),n.d(t,"setSeconds",(function(){return dn})),n.d(t,"setYear",(function(){return fn})),n.d(t,"startOfDay",(function(){return v})),n.d(t,"startOfHour",(function(){return mt})),n.d(t,"startOfISOWeek",(function(){return m})),n.d(t,"startOfISOYear",(function(){return b})),n.d(t,"startOfMinute",(function(){return Ot})),n.d(t,"startOfMonth",(function(){return gn})),n.d(t,"startOfQuarter",(function(){return jt})),n.d(t,"startOfSecond",(function(){return Dt})),n.d(t,"startOfWeek",(function(){return h})),n.d(t,"startOfYear",(function(){return Ve})),n.d(t,"subDays",(function(){return hn})),n.d(t,"subHours",(function(){return pn})),n.d(t,"subISOYears",(function(){return W})),n.d(t,"subMilliseconds",(function(){return mn})),n.d(t,"subMinutes",(function(){return Ue})),n.d(t,"subMonths",(function(){return _n})),n.d(t,"subQuarters",(function(){return bn})),n.d(t,"subSeconds",(function(){return vn})),n.d(t,"subWeeks",(function(){return yn})),n.d(t,"subYears",(function(){return On})),n.d(t,"toDate",(function(){return a}));var r={dateTimeDelimeter:/[T ]/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-])(\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function a(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},r=void 0===n.additionalDigits?2:Number(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date)return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var a=o(e),l=i(a.date,r),d=l.year,f=l.restDateString,g=s(f,d);if(g){var h,p=g.getTime(),m=0;return a.time&&(m=u(a.time)),a.timezone?h=c(a.timezone):(h=new Date(p+m).getTimezoneOffset(),h=new Date(p+m+6e4*h).getTimezoneOffset()),new Date(p+m+6e4*h)}return new Date(e)}function o(e){var t,n={},a=e.split(r.dateTimeDelimeter);if(r.plainTime.test(a[0])?(n.date=null,t=a[0]):(n.date=a[0],t=a[1]),t){var o=r.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}function i(e,t){var n,a=r.YYY[t],o=r.YYYYY[t];if(n=r.YYYY.exec(e)||o.exec(e)){var i=n[1];return{year:parseInt(i,10),restDateString:e.slice(i.length)}}if(n=r.YY.exec(e)||a.exec(e)){var s=n[1];return{year:100*parseInt(s,10),restDateString:e.slice(s.length)}}return{year:null}}function s(e,t){if(null===t)return null;var n,a,o;if(0===e.length)return(a=new Date(0)).setUTCFullYear(t),a;if(n=r.MM.exec(e))return a=new Date(0),o=parseInt(n[1],10)-1,a.setUTCFullYear(t,o),a;if(n=r.DDD.exec(e)){a=new Date(0);var i=parseInt(n[1],10);return a.setUTCFullYear(t,0,i),a}if(n=r.MMDD.exec(e)){a=new Date(0),o=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return a.setUTCFullYear(t,o,s),a}return(n=r.Www.exec(e))?l(t,parseInt(n[1],10)-1):(n=r.WwwD.exec(e))?l(t,parseInt(n[1],10)-1,parseInt(n[2],10)-1):null}function u(e){var t;return(t=r.HH.exec(e))?parseFloat(t[1].replace(",","."))%24*36e5:(t=r.HHMM.exec(e))?parseInt(t[1],10)%24*36e5+6e4*parseFloat(t[2].replace(",",".")):(t=r.HHMMSS.exec(e))?parseInt(t[1],10)%24*36e5+6e4*parseInt(t[2],10)+1e3*parseFloat(t[3].replace(",",".")):null}function c(e){var t,n;return(t=r.timezoneZ.exec(e))?0:(t=r.timezoneHH.exec(e))?(n=60*parseInt(t[2],10),"+"===t[1]?-n:n):(t=r.timezoneHHMM.exec(e))?(n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n):0}function l(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var a=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+a),r}function d(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t);return r.setDate(r.getDate()+o),r}function f(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n).getTime(),o=Number(t);return new Date(r+o)}function g(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return f(e,36e5*r,n)}function h(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=void 0===o?0:Number(o),s=void 0===n.weekStartsOn?i:Number(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=a(e,n),c=u.getDay(),l=(c<s?7:0)+c-s;return u.setDate(u.getDate()-l),u.setHours(0,0,0,0),u}function p(e){e=e||{};var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function m(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=p(t);return n.weekStartsOn=1,h(e,n)}function _(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getFullYear(),o=new Date(0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);var i=m(o,t),s=new Date(0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);var u=m(s,t);return n.getTime()>=i.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function b(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=_(e,t),r=new Date(0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);var a=m(r,t);return a}function v(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return n.setHours(0,0,0,0),n}function y(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=v(e,n),a=v(t,n),o=r.getTime()-6e4*r.getTimezoneOffset(),i=a.getTime()-6e4*a.getTimezoneOffset();return Math.round((o-i)/864e5)}function O(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t),i=y(r,b(r,n),n),s=new Date(0);return s.setFullYear(o,0,4),s.setHours(0,0,0,0),(r=b(s,n)).setDate(r.getDate()+i),r}function w(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return O(e,_(e,n)+r,n)}function T(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return f(e,6e4*r,n)}function j(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getFullYear(),o=n.getMonth(),i=new Date(0);return i.setFullYear(r,o+1,0),i.setHours(0,0,0,0),i.getDate()}function E(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t),i=r.getMonth()+o,s=new Date(0);s.setFullYear(r.getFullYear(),i,1),s.setHours(0,0,0,0);var u=j(s,n);return r.setMonth(i,Math.min(u,r.getDate())),r}function D(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t),a=3*r;return E(e,a,n)}function C(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return f(e,1e3*r,n)}function S(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t),a=7*r;return d(e,a,n)}function M(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return E(e,12*r,n)}function k(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=e||{},o=t||{},i=a(r.start,n).getTime(),s=a(r.end,n).getTime(),u=a(o.start,n).getTime(),c=a(o.end,n).getTime();if(!(i<=s&&u<=c))throw new RangeError("Invalid interval");return i<c&&u<s}function I(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n);if(isNaN(r))return NaN;var o,i,s=r.getTime();return(null==t?[]:"function"==typeof t.forEach?t:Array.prototype.slice.call(t)).forEach((function(e,t){var r=a(e,n);if(isNaN(r))return o=NaN,void(i=NaN);var u=Math.abs(s-r.getTime());(void 0===o||u<i)&&(o=t,i=u)})),o}function P(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n);if(isNaN(r))return new Date(NaN);var o,i,s=r.getTime();return(null==t?[]:"function"==typeof t.forEach?t:Array.prototype.slice.call(t)).forEach((function(e){var t=a(e,n);if(isNaN(t))return o=new Date(NaN),void(i=NaN);var r=Math.abs(s-t.getTime());(void 0===o||r<i)&&(o=t,i=r)})),o}function L(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n),i=r.getTime()-o.getTime();return i<0?-1:i>0?1:i}function A(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n),i=r.getTime()-o.getTime();return i>0?-1:i<0?1:i}function N(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=m(e,n),a=m(t,n),o=r.getTime()-6e4*r.getTimezoneOffset(),i=a.getTime()-6e4*a.getTimezoneOffset();return Math.round((o-i)/6048e5)}function x(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return _(e,n)-_(t,n)}function R(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n),i=r.getFullYear()-o.getFullYear(),s=r.getMonth()-o.getMonth();return 12*i+s}function F(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=Math.floor(n.getMonth()/3)+1;return r}function H(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n),i=r.getFullYear()-o.getFullYear(),s=F(r,n)-F(o,n);return 4*i+s}function B(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=h(e,n),a=h(t,n),o=r.getTime()-6e4*r.getTimezoneOffset(),i=a.getTime()-6e4*a.getTimezoneOffset();return Math.round((o-i)/6048e5)}function Y(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n);return r.getFullYear()-o.getFullYear()}function G(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n),i=L(r,o,n),s=Math.abs(y(r,o,n));r.setDate(r.getDate()-i*s);var u=L(r,o,n)===-i;return i*(s-u)}function U(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n);return r.getTime()-o.getTime()}function q(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=U(e,t,n)/36e5;return r>0?Math.floor(r):Math.ceil(r)}function W(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return w(e,-r,n)}function z(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n),i=L(r,o,n),s=Math.abs(x(r,o,n)),u=L(r=W(r,i*s,n),o,n)===-i;return i*(s-u)}function V(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=U(e,t,n)/6e4;return r>0?Math.floor(r):Math.ceil(r)}function $(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n),i=L(r,o,n),s=Math.abs(R(r,o,n));r.setMonth(r.getMonth()-i*s);var u=L(r,o,n)===-i;return i*(s-u)}function K(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=$(e,t,n)/3;return r>0?Math.floor(r):Math.ceil(r)}function X(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=U(e,t,n)/1e3;return r>0?Math.floor(r):Math.ceil(r)}function Q(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=G(e,t,n)/7;return r>0?Math.floor(r):Math.ceil(r)}function Z(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n),i=L(r,o,n),s=Math.abs(Y(r,o,n));r.setFullYear(r.getFullYear()-i*s);var u=L(r,o,n)===-i;return i*(s-u)}function J(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=a(n.start,t),o=a(n.end,t),i=o.getTime();if(!(r.getTime()<=i))throw new RangeError("Invalid interval");var s=[],u=r;for(u.setHours(0,0,0,0);u.getTime()<=i;)s.push(a(u,t)),u.setDate(u.getDate()+1);return s}function ee(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return n.setHours(23,59,59,999),n}function te(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return n.setMinutes(59,59,999),n}function ne(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=void 0===o?0:Number(o),s=void 0===n.weekStartsOn?i:Number(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=a(e,n),c=u.getDay(),l=6+(c<s?-7:0)-(c-s);return u.setDate(u.getDate()+l),u.setHours(23,59,59,999),u}function re(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=p(t);return n.weekStartsOn=1,ne(e,n)}function ae(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=_(e,t),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var a=m(r,t);return a.setMilliseconds(a.getMilliseconds()-1),a}function oe(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return n.setSeconds(59,999),n}function ie(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function se(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getMonth(),o=r-r%3+3;return n.setMonth(o,0),n.setHours(23,59,59,999),n}function ue(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return n.setMilliseconds(999),n}function ce(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function le(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return!isNaN(n)}var de={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};var fe=/MMMM|MM|DD|dddd/g;function ge(e){return e.replace(fe,(function(e){return e.slice(1)}))}var he,pe,me=(pe={LTS:(he={LT:"h:mm aa",LTS:"h:mm:ss aa",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY h:mm aa",LLLL:"dddd, MMMM D YYYY h:mm aa"}).LTS,LT:he.LT,L:he.L,LL:he.LL,LLL:he.LLL,LLLL:he.LLLL,l:he.l||ge(he.L),ll:he.ll||ge(he.LL),lll:he.lll||ge(he.LLL),llll:he.llll||ge(he.LLLL)},function(e){return pe[e]}),_e={lastWeek:"[last] dddd [at] LT",yesterday:"[yesterday at] LT",today:"[today at] LT",tomorrow:"[tomorrow at] LT",nextWeek:"dddd [at] LT",other:"L"};function be(e,t,n){return function(r,a){var o=a||{},i=o.type?String(o.type):t;return(e[i]||e[t])[n?n(Number(r)):Number(r)]}}function ve(e,t){return function(n){var r=n||{},a=r.type?String(r.type):t;return e[a]||e[t]}}var ye={narrow:["Su","Mo","Tu","We","Th","Fr","Sa"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Oe={short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},we={uppercase:["AM","PM"],lowercase:["am","pm"],long:["a.m.","p.m."]};function Te(e,t){return function(n,r){var a=r||{},o=a.type?String(a.type):t,i=e[o]||e[t];return String(n).match(i)}}function je(e,t){return function(n,r){var a=r||{},o=a.type?String(a.type):t,i=e[o]||e[t],s=n[1];return i.findIndex((function(e){return e.test(s)}))}}var Ee,De={formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof de[e]?de[e]:1===t?de[e].one:de[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:me,formatRelative:function(e,t,n,r){return _e[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},weekday:be(ye,"long"),weekdays:ve(ye,"long"),month:be(Oe,"long"),months:ve(Oe,"long"),timeOfDay:be(we,"long",(function(e){return e/12>=1?1:0})),timesOfDay:ve(we,"long")},match:{ordinalNumbers:(Ee=/^(\d+)(th|st|nd|rd)?/i,function(e){return String(e).match(Ee)}),ordinalNumber:function(e){return parseInt(e[1],10)},weekdays:Te({narrow:/^(su|mo|tu|we|th|fr|sa)/i,short:/^(sun|mon|tue|wed|thu|fri|sat)/i,long:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},"long"),weekday:je({any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},"any"),months:Te({short:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,long:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},"long"),month:je({any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},"any"),timesOfDay:Te({short:/^(am|pm)/i,long:/^([ap]\.?\s?m\.?)/i},"long"),timeOfDay:je({any:[/^a/i,/^p/i]},"any")},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ce(e,t){var n=a(e,t),r=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var o=r-n.getTime();return Math.floor(o/864e5)+1}function Se(e,t){var n=a(e,t),r=n.getUTCDay(),o=(r<1?7:0)+r-1;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}function Me(e,t){var n=a(e,t),r=n.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(r+1,0,4),o.setUTCHours(0,0,0,0);var i=Se(o,t),s=new Date(0);s.setUTCFullYear(r,0,4),s.setUTCHours(0,0,0,0);var u=Se(s,t);return n.getTime()>=i.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function ke(e,t){var n=Me(e,t),r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),Se(r,t)}function Ie(e,t){var n=a(e,t),r=Se(n,t).getTime()-ke(n,t).getTime();return Math.round(r/6048e5)+1}var Pe={M:function(e){return e.getUTCMonth()+1},Mo:function(e,t){var n=e.getUTCMonth()+1;return t.locale.localize.ordinalNumber(n,{unit:"month"})},MM:function(e){return Ae(e.getUTCMonth()+1,2)},MMM:function(e,t){return t.locale.localize.month(e.getUTCMonth(),{type:"short"})},MMMM:function(e,t){return t.locale.localize.month(e.getUTCMonth(),{type:"long"})},Q:function(e){return Math.ceil((e.getUTCMonth()+1)/3)},Qo:function(e,t){var n=Math.ceil((e.getUTCMonth()+1)/3);return t.locale.localize.ordinalNumber(n,{unit:"quarter"})},D:function(e){return e.getUTCDate()},Do:function(e,t){return t.locale.localize.ordinalNumber(e.getUTCDate(),{unit:"dayOfMonth"})},DD:function(e){return Ae(e.getUTCDate(),2)},DDD:function(e){return Ce(e)},DDDo:function(e,t){return t.locale.localize.ordinalNumber(Ce(e),{unit:"dayOfYear"})},DDDD:function(e){return Ae(Ce(e),3)},dd:function(e,t){return t.locale.localize.weekday(e.getUTCDay(),{type:"narrow"})},ddd:function(e,t){return t.locale.localize.weekday(e.getUTCDay(),{type:"short"})},dddd:function(e,t){return t.locale.localize.weekday(e.getUTCDay(),{type:"long"})},d:function(e){return e.getUTCDay()},do:function(e,t){return t.locale.localize.ordinalNumber(e.getUTCDay(),{unit:"dayOfWeek"})},E:function(e){return e.getUTCDay()||7},W:function(e){return Ie(e)},Wo:function(e,t){return t.locale.localize.ordinalNumber(Ie(e),{unit:"isoWeek"})},WW:function(e){return Ae(Ie(e),2)},YY:function(e){return Ae(e.getUTCFullYear(),4).substr(2)},YYYY:function(e){return Ae(e.getUTCFullYear(),4)},GG:function(e){return String(Me(e)).substr(2)},GGGG:function(e){return Me(e)},H:function(e){return e.getUTCHours()},HH:function(e){return Ae(e.getUTCHours(),2)},h:function(e){var t=e.getUTCHours();return 0===t?12:t>12?t%12:t},hh:function(e){return Ae(Pe.h(e),2)},m:function(e){return e.getUTCMinutes()},mm:function(e){return Ae(e.getUTCMinutes(),2)},s:function(e){return e.getUTCSeconds()},ss:function(e){return Ae(e.getUTCSeconds(),2)},S:function(e){return Math.floor(e.getUTCMilliseconds()/100)},SS:function(e){return Ae(Math.floor(e.getUTCMilliseconds()/10),2)},SSS:function(e){return Ae(e.getUTCMilliseconds(),3)},Z:function(e,t){return Le((t._originalDate||e).getTimezoneOffset(),":")},ZZ:function(e,t){return Le((t._originalDate||e).getTimezoneOffset())},X:function(e,t){var n=t._originalDate||e;return Math.floor(n.getTime()/1e3)},x:function(e,t){return(t._originalDate||e).getTime()},A:function(e,t){return t.locale.localize.timeOfDay(e.getUTCHours(),{type:"uppercase"})},a:function(e,t){return t.locale.localize.timeOfDay(e.getUTCHours(),{type:"lowercase"})},aa:function(e,t){return t.locale.localize.timeOfDay(e.getUTCHours(),{type:"long"})}};function Le(e,t){t=t||"";var n=e>0?"-":"+",r=Math.abs(e),a=r%60;return n+Ae(Math.floor(r/60),2)+t+Ae(a,2)}function Ae(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return n}var Ne=Pe;function xe(e,t,n){var r=a(e,n),o=Number(t);return r.setUTCMinutes(r.getUTCMinutes()+o),r}var Re=/(\[[^[]*])|(\\)?(LTS|LT|LLLL|LLL|LL|L|llll|lll|ll|l)/g,Fe=/(\[[^[]*])|(\\)?(x|ss|s|mm|m|hh|h|do|dddd|ddd|dd|d|aa|a|ZZ|Z|YYYY|YY|X|Wo|WW|W|SSS|SS|S|Qo|Q|Mo|MMMM|MMM|MM|M|HH|H|GGGG|GG|E|Do|DDDo|DDDD|DDD|DD|D|A|.)/g;function He(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(t),o=n||{},i=o.locale||De;if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var s=i.formatters||{},u=i.formattingTokensRegExp||Fe,c=i.formatLong,l=a(e,o);if(!le(l,o))return"Invalid Date";var d=l.getTimezoneOffset(),f=xe(l,-d,o),g=p(o);g.locale=i,g.formatters=Ne,g._originalDate=l;var h=r.replace(Re,(function(e){return"["===e[0]?e:"\\"===e[0]?Be(e):c(e)})).replace(u,(function(e){var t=s[e]||Ne[e];return t?t(f,g):Be(e)}));return h}function Be(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|]$/g,""):e.replace(/\\/g,"")}function Ye(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=n||{},o=r.locale||De;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var i=L(e,t,r);if(isNaN(i))return"Invalid Date";var s,u,c=p(r);c.addSuffix=Boolean(r.addSuffix),c.comparison=i,i>0?(s=a(t,r),u=a(e,r)):(s=a(e,r),u=a(t,r));var l,d=X(u,s,r),f=u.getTimezoneOffset()-s.getTimezoneOffset(),g=Math.round(d/60)-f;if(g<2)return r.includeSeconds?d<5?o.formatDistance("lessThanXSeconds",5,c):d<10?o.formatDistance("lessThanXSeconds",10,c):d<20?o.formatDistance("lessThanXSeconds",20,c):d<40?o.formatDistance("halfAMinute",null,c):d<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):0===g?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",g,c);if(g<45)return o.formatDistance("xMinutes",g,c);if(g<90)return o.formatDistance("aboutXHours",1,c);if(g<1440){var h=Math.round(g/60);return o.formatDistance("aboutXHours",h,c)}if(g<2520)return o.formatDistance("xDays",1,c);if(g<43200){var m=Math.round(g/1440);return o.formatDistance("xDays",m,c)}if(g<86400)return l=Math.round(g/43200),o.formatDistance("aboutXMonths",l,c);if((l=$(u,s,r))<12){var _=Math.round(g/43200);return o.formatDistance("xMonths",_,c)}var b=l%12,v=Math.floor(l/12);return b<3?o.formatDistance("aboutXYears",v,c):b<9?o.formatDistance("overXYears",v,c):o.formatDistance("almostXYears",v+1,c)}function Ge(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=n||{},o=r.locale||De;if(!o.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var i=L(e,t,r);if(isNaN(i))return"Invalid Date";var s,u,c=p(r);c.addSuffix=Boolean(r.addSuffix),c.comparison=i,i>0?(s=a(t,r),u=a(e,r)):(s=a(e,r),u=a(t,r));var l,d=void 0===r.roundingMethod?"floor":String(r.roundingMethod);if("floor"===d)l=Math.floor;else if("ceil"===d)l=Math.ceil;else{if("round"!==d)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");l=Math.round}var f,g=X(u,s,n),h=u.getTimezoneOffset()-s.getTimezoneOffset(),m=l(g/60)-h;if("s"===(f=void 0===r.unit?m<1?"s":m<60?"m":m<1440?"h":m<43200?"d":m<525600?"M":"Y":String(r.unit)))return o.formatDistance("xSeconds",g,c);if("m"===f)return o.formatDistance("xMinutes",m,c);if("h"===f){var _=l(m/60);return o.formatDistance("xHours",_,c)}if("d"===f){var b=l(m/1440);return o.formatDistance("xDays",b,c)}if("M"===f){var v=l(m/43200);return o.formatDistance("xMonths",v,c)}if("Y"===f){var y=l(m/525600);return o.formatDistance("xYears",y,c)}throw new RangeError("unit must be 's', 'm', 'h', 'd', 'M' or 'Y'")}function Ue(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return T(e,-r,n)}function qe(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n),i=n||{},s=i.locale||De;if(!s.localize)throw new RangeError("locale must contain localize property");if(!s.formatLong)throw new RangeError("locale must contain formatLong property");if(!s.formatRelative)throw new RangeError("locale must contain formatRelative property");var u,c=y(r,o,i);if(isNaN(c))return"Invalid Date";u=c<-6?"other":c<-1?"lastWeek":c<0?"yesterday":c<1?"today":c<2?"tomorrow":c<7?"nextWeek":"other";var l=Ue(r,r.getTimezoneOffset(),i),d=Ue(o,r.getTimezoneOffset(),i),f=s.formatRelative(u,l,d,i);return He(r,f,i)}function We(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getDate();return r}function ze(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getDay();return r}function Ve(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=new Date(0);return r.setFullYear(n.getFullYear(),0,1),r.setHours(0,0,0,0),r}function $e(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=y(n,Ve(n,t),t),o=r+1;return o}function Ke(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getFullYear();return r%400==0||r%4==0&&r%100!=0}function Xe(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return isNaN(n)?NaN:Ke(n,t)?366:365}function Qe(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getHours();return r}function Ze(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getDay();return 0===r&&(r=7),r}function Je(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=m(n,t).getTime()-b(n,t).getTime();return Math.round(r/6048e5)+1}function et(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=b(e,t),r=b(S(n,60,t),t),a=r.valueOf()-n.valueOf();return Math.round(a/6048e5)}function tt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getMilliseconds();return r}function nt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getMinutes();return r}function rt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getMonth();return r}function at(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=e||{},o=t||{},i=a(r.start,n).getTime(),s=a(r.end,n).getTime(),u=a(o.start,n).getTime(),c=a(o.end,n).getTime();if(!(i<=s&&u<=c))throw new RangeError("Invalid interval");var l=i<c&&u<s;if(!l)return 0;var d=u<i?i:u,f=c>s?s:c,g=f-d;return Math.ceil(g/864e5)}function ot(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getSeconds();return r}function it(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getTime();return r}function st(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getFullYear();return r}function ut(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n);return r.getTime()>o.getTime()}function ct(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n);return r.getTime()<o.getTime()}function lt(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n);return r.getTime()===o.getTime()}function dt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return 1===a(e,t).getDate()}function ft(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return 5===a(e,t).getDay()}function gt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return ee(n,t).getTime()===ie(n,t).getTime()}function ht(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return 1===a(e,t).getDay()}function pt(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=v(e,n),a=v(t,n);return r.getTime()===a.getTime()}function mt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return n.setMinutes(0,0,0),n}function _t(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=mt(e,n),a=mt(t,n);return r.getTime()===a.getTime()}function bt(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=h(e,n),a=h(t,n);return r.getTime()===a.getTime()}function vt(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=p(n);return r.weekStartsOn=1,bt(e,t,r)}function yt(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=b(e,n),a=b(t,n);return r.getTime()===a.getTime()}function Ot(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return n.setSeconds(0,0),n}function wt(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Ot(e,n),a=Ot(t,n);return r.getTime()===a.getTime()}function Tt(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n);return r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()}function jt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getMonth(),o=r-r%3;return n.setMonth(o,1),n.setHours(0,0,0,0),n}function Et(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=jt(e,n),a=jt(t,n);return r.getTime()===a.getTime()}function Dt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return n.setMilliseconds(0),n}function Ct(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Dt(e,n),a=Dt(t,n);return r.getTime()===a.getTime()}function St(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=a(t,n);return r.getFullYear()===o.getFullYear()}function Mt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return 6===a(e,t).getDay()}function kt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return 0===a(e,t).getDay()}function It(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return 4===a(e,t).getDay()}function Pt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return 2===a(e,t).getDay()}function Lt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return 3===a(e,t).getDay()}function At(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getDay();return 0===r||6===r}function Nt(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=t||{},o=a(e,n).getTime(),i=a(r.start,n).getTime(),s=a(r.end,n).getTime();if(!(i<=s))throw new RangeError("Invalid interval");return o>=i&&o<=s}function xt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=void 0===o?0:Number(o),s=void 0===n.weekStartsOn?i:Number(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var u=a(e,t),c=u.getDay(),l=6+(c<s?-7:0)-(c-s);return u.setHours(0,0,0,0),u.setDate(u.getDate()+l),u}function Rt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=p(t);return n.weekStartsOn=1,xt(e,n)}function Ft(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=_(e,t),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var a=m(r,t);return a.setDate(a.getDate()-1),a}function Ht(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(0,0,0,0),n}function Bt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getMonth(),o=r-r%3+3;return n.setMonth(o,0),n.setHours(0,0,0,0),n}function Yt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(0,0,0,0),n}function Gt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n;return(null==e?[]:"function"==typeof e.forEach?e:Array.prototype.slice.call(e)).forEach((function(e){var r=a(e,t);(void 0===n||n<r||isNaN(r))&&(n=r)})),n}function Ut(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n;return(null==e?[]:"function"==typeof e.forEach?e:Array.prototype.slice.call(e)).forEach((function(e){var r=a(e,t);(void 0===n||n>r||isNaN(r))&&(n=r)})),n}var qt={M:/^(1[0-2]|0?\d)/,D:/^(3[0-1]|[0-2]?\d)/,DDD:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,W:/^(5[0-3]|[0-4]?\d)/,YYYY:/^(\d{1,4})/,H:/^(2[0-3]|[0-1]?\d)/,m:/^([0-5]?\d)/,Z:/^([+-])(\d{2}):(\d{2})/,ZZ:/^([+-])(\d{2})(\d{2})/,singleDigit:/^(\d)/,twoDigits:/^(\d{2})/,threeDigits:/^(\d{3})/,fourDigits:/^(\d{4})/,anyDigits:/^(\d+)/};function Wt(e){return parseInt(e[1],10)}var zt={YY:{unit:"twoDigitYear",match:qt.twoDigits,parse:function(e){return Wt(e)}},YYYY:{unit:"year",match:qt.YYYY,parse:Wt},GG:{unit:"isoYear",match:qt.twoDigits,parse:function(e){return Wt(e)+1900}},GGGG:{unit:"isoYear",match:qt.YYYY,parse:Wt},Q:{unit:"quarter",match:qt.singleDigit,parse:Wt},Qo:{unit:"quarter",match:function(e,t){return t.locale.match.ordinalNumbers(e,{unit:"quarter"})},parse:function(e,t){return t.locale.match.ordinalNumber(e,{unit:"quarter"})}},M:{unit:"month",match:qt.M,parse:function(e){return Wt(e)-1}},Mo:{unit:"month",match:function(e,t){return t.locale.match.ordinalNumbers(e,{unit:"month"})},parse:function(e,t){return t.locale.match.ordinalNumber(e,{unit:"month"})-1}},MM:{unit:"month",match:qt.twoDigits,parse:function(e){return Wt(e)-1}},MMM:{unit:"month",match:function(e,t){return t.locale.match.months(e,{type:"short"})},parse:function(e,t){return t.locale.match.month(e,{type:"short"})}},MMMM:{unit:"month",match:function(e,t){return t.locale.match.months(e,{type:"long"})||t.locale.match.months(e,{type:"short"})},parse:function(e,t){var n=t.locale.match.month(e,{type:"long"});return null==n&&(n=t.locale.match.month(e,{type:"short"})),n}},W:{unit:"isoWeek",match:qt.W,parse:Wt},Wo:{unit:"isoWeek",match:function(e,t){return t.locale.match.ordinalNumbers(e,{unit:"isoWeek"})},parse:function(e,t){return t.locale.match.ordinalNumber(e,{unit:"isoWeek"})}},WW:{unit:"isoWeek",match:qt.twoDigits,parse:Wt},d:{unit:"dayOfWeek",match:qt.singleDigit,parse:Wt},do:{unit:"dayOfWeek",match:function(e,t){return t.locale.match.ordinalNumbers(e,{unit:"dayOfWeek"})},parse:function(e,t){return t.locale.match.ordinalNumber(e,{unit:"dayOfWeek"})}},dd:{unit:"dayOfWeek",match:function(e,t){return t.locale.match.weekdays(e,{type:"narrow"})},parse:function(e,t){return t.locale.match.weekday(e,{type:"narrow"})}},ddd:{unit:"dayOfWeek",match:function(e,t){return t.locale.match.weekdays(e,{type:"short"})||t.locale.match.weekdays(e,{type:"narrow"})},parse:function(e,t){var n=t.locale.match.weekday(e,{type:"short"});return null==n&&(n=t.locale.match.weekday(e,{type:"narrow"})),n}},dddd:{unit:"dayOfWeek",match:function(e,t){return t.locale.match.weekdays(e,{type:"long"})||t.locale.match.weekdays(e,{type:"short"})||t.locale.match.weekdays(e,{type:"narrow"})},parse:function(e,t){var n=t.locale.match.weekday(e,{type:"long"});return null==n&&null==(n=t.locale.match.weekday(e,{type:"short"}))&&(n=t.locale.match.weekday(e,{type:"narrow"})),n}},E:{unit:"dayOfISOWeek",match:qt.singleDigit,parse:function(e){return Wt(e)}},D:{unit:"dayOfMonth",match:qt.D,parse:Wt},Do:{unit:"dayOfMonth",match:function(e,t){return t.locale.match.ordinalNumbers(e,{unit:"dayOfMonth"})},parse:function(e,t){return t.locale.match.ordinalNumber(e,{unit:"dayOfMonth"})}},DD:{unit:"dayOfMonth",match:qt.twoDigits,parse:Wt},DDD:{unit:"dayOfYear",match:qt.DDD,parse:Wt},DDDo:{unit:"dayOfYear",match:function(e,t){return t.locale.match.ordinalNumbers(e,{unit:"dayOfYear"})},parse:function(e,t){return t.locale.match.ordinalNumber(e,{unit:"dayOfYear"})}},DDDD:{unit:"dayOfYear",match:qt.threeDigits,parse:Wt},A:{unit:"timeOfDay",match:function(e,t){return t.locale.match.timesOfDay(e,{type:"short"})},parse:function(e,t){return t.locale.match.timeOfDay(e,{type:"short"})}},aa:{unit:"timeOfDay",match:function(e,t){return t.locale.match.timesOfDay(e,{type:"long"})||t.locale.match.timesOfDay(e,{type:"short"})},parse:function(e,t){var n=t.locale.match.timeOfDay(e,{type:"long"});return null==n&&(n=t.locale.match.timeOfDay(e,{type:"short"})),n}},H:{unit:"hours",match:qt.H,parse:Wt},HH:{unit:"hours",match:qt.twoDigits,parse:Wt},h:{unit:"timeOfDayHours",match:qt.M,parse:Wt},hh:{unit:"timeOfDayHours",match:qt.twoDigits,parse:Wt},m:{unit:"minutes",match:qt.m,parse:Wt},mm:{unit:"minutes",match:qt.twoDigits,parse:Wt},s:{unit:"seconds",match:qt.m,parse:Wt},ss:{unit:"seconds",match:qt.twoDigits,parse:Wt},S:{unit:"milliseconds",match:qt.singleDigit,parse:function(e){return 100*Wt(e)}},SS:{unit:"milliseconds",match:qt.twoDigits,parse:function(e){return 10*Wt(e)}},SSS:{unit:"milliseconds",match:qt.threeDigits,parse:Wt},Z:{unit:"timezone",match:qt.Z,parse:function(e){var t=e[1],n=60*parseInt(e[2],10)+parseInt(e[3],10);return"+"===t?n:-n}},ZZ:{unit:"timezone",match:qt.ZZ,parse:function(e){var t=e[1],n=60*parseInt(e[2],10)+parseInt(e[3],10);return"+"===t?n:-n}},X:{unit:"timestamp",match:qt.anyDigits,parse:function(e){return 1e3*Wt(e)}},x:{unit:"timestamp",match:qt.anyDigits,parse:Wt}};zt.a=zt.A;var Vt=zt;var $t={twoDigitYear:{priority:10,set:function(e,t){var n=100*Math.floor(e.date.getUTCFullYear()/100)+t;return e.date.setUTCFullYear(n,0,1),e.date.setUTCHours(0,0,0,0),e}},year:{priority:10,set:function(e,t){return e.date.setUTCFullYear(t,0,1),e.date.setUTCHours(0,0,0,0),e}},isoYear:{priority:10,set:function(e,t,n){var r,o,i,s,u,c,l,d;return e.date=ke((r=e.date,o=t,s=a(r,i=n),u=Number(o),c=ke(s,i),l=Math.floor((s.getTime()-c.getTime())/864e5),(d=new Date(0)).setUTCFullYear(u,0,4),d.setUTCHours(0,0,0,0),(s=ke(d,i)).setUTCDate(s.getUTCDate()+l),s),n),e}},quarter:{priority:20,set:function(e,t){return e.date.setUTCMonth(3*(t-1),1),e.date.setUTCHours(0,0,0,0),e}},month:{priority:30,set:function(e,t){return e.date.setUTCMonth(t,1),e.date.setUTCHours(0,0,0,0),e}},isoWeek:{priority:40,set:function(e,t,n){var r,o,i,s,u,c;return e.date=Se((r=e.date,o=t,s=a(r,i=n),u=Number(o),c=Ie(s,i)-u,s.setUTCDate(s.getUTCDate()-7*c),s),n),e}},dayOfWeek:{priority:50,set:function(e,t,n){return e.date=function(e,t,n){var r=n||{},o=r.locale,i=o&&o.options&&o.options.weekStartsOn,s=void 0===i?0:Number(i),u=void 0===r.weekStartsOn?s:Number(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=a(e,n),l=Number(t),d=((l%7+7)%7<u?7:0)+l-c.getUTCDay();return c.setUTCDate(c.getUTCDate()+d),c}(e.date,t,n),e.date.setUTCHours(0,0,0,0),e}},dayOfISOWeek:{priority:50,set:function(e,t,n){return e.date=function(e,t,n){var r=Number(t);r%7==0&&(r-=7);var o=a(e,n),i=((r%7+7)%7<1?7:0)+r-o.getUTCDay();return o.setUTCDate(o.getUTCDate()+i),o}(e.date,t,n),e.date.setUTCHours(0,0,0,0),e}},dayOfMonth:{priority:50,set:function(e,t){return e.date.setUTCDate(t),e.date.setUTCHours(0,0,0,0),e}},dayOfYear:{priority:50,set:function(e,t){return e.date.setUTCMonth(0,t),e.date.setUTCHours(0,0,0,0),e}},timeOfDay:{priority:60,set:function(e,t,n){return e.timeOfDay=t,e}},hours:{priority:70,set:function(e,t,n){return e.date.setUTCHours(t,0,0,0),e}},timeOfDayHours:{priority:70,set:function(e,t,n){var r=e.timeOfDay;return null!=r&&(t=function(e,t){if(0===t){if(12===e)return 0}else if(12!==e)return 12+e;return e}(t,r)),e.date.setUTCHours(t,0,0,0),e}},minutes:{priority:80,set:function(e,t){return e.date.setUTCMinutes(t,0,0),e}},seconds:{priority:90,set:function(e,t){return e.date.setUTCSeconds(t,0),e}},milliseconds:{priority:100,set:function(e,t){return e.date.setUTCMilliseconds(t),e}},timezone:{priority:110,set:function(e,t){return e.date=new Date(e.date.getTime()-6e4*t),e}},timestamp:{priority:120,set:function(e,t){return e.date=new Date(t),e}}},Kt=/(\[[^[]*])|(\\)?(LTS|LT|LLLL|LLL|LL|L|llll|lll|ll|l)/g,Xt=/(\[[^[]*])|(\\)?(x|ss|s|mm|m|hh|h|do|dddd|ddd|dd|d|aa|a|ZZ|Z|YYYY|YY|X|Wo|WW|W|SSS|SS|S|Qo|Q|Mo|MMMM|MMM|MM|M|HH|H|GGGG|GG|E|Do|DDDo|DDDD|DDD|DD|D|A|.)/g;function Qt(e,t,n,r){if(arguments.length<3)throw new TypeError("3 arguments required, but only "+arguments.length+" present");var o=String(e),i=r||{},s=void 0===i.weekStartsOn?0:Number(i.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=i.locale||De,c=u.parsers||{},l=u.units||{};if(!u.match)throw new RangeError("locale must contain match property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");var d=String(t).replace(Kt,(function(e){return"["===e[0]?e:"\\"===e[0]?Jt(e):u.formatLong(e)}));if(""===d)return""===o?a(n,i):new Date(NaN);var f=p(i);f.locale=u;var g,h=d.match(u.parsingTokensRegExp||Xt),m=h.length,_=[{priority:110,set:Zt,index:0}];for(g=0;g<m;g++){var b=h[g],v=c[b]||Vt[b];if(v){var y;if(!(y=v.match instanceof RegExp?v.match.exec(o):v.match(o,f)))return new Date(NaN);var O=v.unit,w=l[O]||$t[O];_.push({priority:w.priority,set:w.set,value:v.parse(y,f),index:_.length});var T=y[0];o=o.slice(T.length)}else{var j=h[g].match(/^\[.*]$/)?h[g].replace(/^\[|]$/g,""):h[g];if(0!==o.indexOf(j))return new Date(NaN);o=o.slice(j.length)}}var E=_.map((function(e){return e.priority})).sort((function(e,t){return e-t})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return _.filter((function(t){return t.priority===e})).reverse()})).map((function(e){return e[0]})),D=a(n,i);if(isNaN(D))return new Date(NaN);var C=Ue(D,D.getTimezoneOffset()),S={date:C},M=E.length;for(g=0;g<M;g++){var k=E[g];S=k.set(S,k.value,f)}return S.date}function Zt(e){var t=e.date,n=t.getTime(),r=t.getTimezoneOffset();return r=new Date(n+6e4*r).getTimezoneOffset(),e.date=new Date(n+6e4*r),e}function Jt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|]$/g,""):e.replace(/\\/g,"")}function en(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t);return r.setDate(o),r}function tn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=n||{},o=r.locale,i=o&&o.options&&o.options.weekStartsOn,s=void 0===i?0:Number(i),u=void 0===r.weekStartsOn?s:Number(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=a(e,r),l=Number(t),f=c.getDay(),g=l%7,h=(g+7)%7,p=(h<u?7:0)+l-f;return d(c,p,r)}function nn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t);return r.setMonth(0),r.setDate(o),r}function rn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t);return r.setHours(o),r}function an(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t),i=Ze(r,n),s=o-i;return d(r,s,n)}function on(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t),i=Je(r,n)-o;return r.setDate(r.getDate()-7*i),r}function sn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t);return r.setMilliseconds(o),r}function un(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t);return r.setMinutes(o),r}function cn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t),i=r.getFullYear(),s=r.getDate(),u=new Date(0);u.setFullYear(i,o,15),u.setHours(0,0,0,0);var c=j(u,n);return r.setMonth(o,Math.min(s,c)),r}function ln(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t),i=Math.floor(r.getMonth()/3)+1,s=o-i;return cn(r,r.getMonth()+3*s,n)}function dn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t);return r.setSeconds(o),r}function fn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=a(e,n),o=Number(t);return isNaN(r)?new Date(NaN):(r.setFullYear(o),r)}function gn(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=a(e,t);return n.setDate(1),n.setHours(0,0,0,0),n}function hn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return d(e,-r,n)}function pn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return g(e,-r,n)}function mn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return f(e,-r,n)}function _n(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return E(e,-r,n)}function bn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return D(e,-r,n)}function vn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return C(e,-r,n)}function yn(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return S(e,-r,n)}function On(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(t);return M(e,-r,n)}},bHqI:function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),a=n.length;if(r.length!==a)return!1;for(var o=0;o<a;o++){var i=n[o];if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1}return!0}function a(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}n.r(t),n.d(t,"shallowEqualArrays",(function(){return a})),n.d(t,"shallowEqualObjects",(function(){return r}))},bIHZ:function(e,t,n){"use strict";n.r(t),n.d(t,"updateLocation",(function(){return a})),n.d(t,"updateLazyLocation",(function(){return o}));var r=n("t7n3");function a(e){var t=Object(r.extend)({},window.nav.objLoc,e);Object.keys(t).filter((function(e){return""===t[e]})).forEach((function(e){delete t[e]}));var n=window.nav.toStr(t);window.nav.setLoc(n)}function o(){var e={};return{scheduleNav:function(t){e=Object(r.extend)(e,t)},commitNav:function(){a(e),e={}},scheduleNavWithTimeOut:function(t,n){void 0===n&&(n=100),e=Object(r.extend)(e,t),setTimeout((function(){a(e),e={}}),n)}}}},cBpt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,i=void 0===a?0:Number(a),s=void 0===n.weekStartsOn?i:Number(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=(0,o.default)(e,n),c=u.getUTCDay(),l=(c<s?7:0)+c-s;return u.setUTCDate(u.getUTCDate()-l),u.setUTCHours(0,0,0,0),u};var r,a=n("2Oix"),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},clTp:function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,a=window.pageYOffset||r.scrollTop||n.scrollTop,o=window.pageXOffset||r.scrollLeft||n.scrollLeft,i=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0;return{top:Math.round(t.top+a-i),left:Math.round(t.left+o-s),width:e.offsetWidth,height:e.offsetHeight}}n.r(t),n.d(t,"default",(function(){return r}))},csxR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var a=r.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+a.join("|")+"|.)","g")};var r=["x","ss","s","mm","m","hh","h","do","dddd","ddd","dd","d","aa","a","ZZ","Z","YYYY","YY","X","Wo","WW","W","SSS","SS","S","Qo","Q","Mo","MMMM","MMM","MM","M","HH","H","GGGG","GG","E","Do","DDDo","DDDD","DDD","DD","D","A"];e.exports=t.default},dV62:function(e,t,n){"use strict";n.r(t),n.d(t,"rootId",(function(){return a})),n.d(t,"registerReactApplication",(function(){return o})),n.d(t,"showComponentInBox",(function(){return i})),n.d(t,"destroyComponentInBox",(function(){return s}));var r=n("i8i4"),a="react_root";function o(e,t){window.applicationInitFunctions[e]=t,window.reactInitQueue[e]&&window.reactInitQueue[e].length&&(window.reactInitQueue[e].forEach(t=>{window.initReactApplication(e,t)}),window.reactInitQueue[e]=[])}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.onDestroy||(t.onDestroy=s),window.showFastBox(t);var n=document.querySelectorAll(".box_layout"),a=n[n.length-1];r.render(e,a),u()}function s(e){var t=document.querySelector(".box_layout");t&&r.unmountComponentAtNode(t);var n=window.curBox();n&&n.hide(e)}function u(){var e=document.querySelector(".popup_box_container");boxRefreshCoords(e)}window.applicationInitFunctions||(window.applicationInitFunctions={}),window.reactInitQueue||(window.reactInitQueue={}),window.initReactApplication=(e,t)=>{window.applicationInitFunctions[e]?window.applicationInitFunctions[e](t):(window.reactInitQueue[e]||(window.reactInitQueue[e]=[]),window.reactInitQueue[e].push(t))}},f01n:function(e,t,n){"use strict";n.r(t),n.d(t,"DELETE",(function(){return i})),n.d(t,"SET_FLAGS",(function(){return s})),n.d(t,"REPLACE_FLAGS",(function(){return u})),n.d(t,"RESET_FLAGS",(function(){return c})),n.d(t,"ADD_MESSAGE",(function(){return l})),n.d(t,"READ_INBOUND",(function(){return d})),n.d(t,"READ_OUTBOUND",(function(){return f})),n.d(t,"GOT_ONLINE",(function(){return g})),n.d(t,"GOT_OFFLINE",(function(){return h})),n.d(t,"CHAT_CHANGED",(function(){return p})),n.d(t,"CONVERSATION_UPDATED",(function(){return m})),n.d(t,"TYPING",(function(){return _})),n.d(t,"RECORDING_AUDIO",(function(){return b})),n.d(t,"VIDEO_CALL",(function(){return v})),n.d(t,"UNREAD_COUNT",(function(){return y})),n.d(t,"NOTIFY_SETTINGS_CHANGED",(function(){return O})),n.d(t,"KEYBOARD_CALLBACK_RECEIVED",(function(){return w})),n.d(t,"EMPTY",(function(){return T})),n.d(t,"RESET_DIRECTORIES",(function(){return j})),n.d(t,"REPLACE_DIRECTORIES",(function(){return E})),n.d(t,"SET_DIRECTORIES",(function(){return D})),n.d(t,"RESYNC",(function(){return C})),n.d(t,"REFRESH_LP_KEY",(function(){return S})),n.d(t,"TRANSITION",(function(){return M})),n.d(t,"RESET_PEER",(function(){return k})),n.d(t,"MUTEX",(function(){return I})),n.d(t,"CHANGE_PEER",(function(){return P})),n.d(t,"CHANGE_TAB",(function(){return L})),n.d(t,"FAILED_MESSAGE",(function(){return A})),n.d(t,"RESEND",(function(){return N})),n.d(t,"DELETE_DIALOG",(function(){return x})),n.d(t,"EDIT_MESSAGE",(function(){return R})),n.d(t,"REPLACE_MESSAGE",(function(){return F})),n.d(t,"INVALIDATE_MESSAGE",(function(){return H})),n.d(t,"AUDIO_START",(function(){return B})),n.d(t,"WAITING_FOR_RECONNECT",(function(){return Y})),n.d(t,"RECONNECTING",(function(){return G})),n.d(t,"RECONNECTED",(function(){return U})),n.d(t,"INCOMING_CALL",(function(){return q})),n.d(t,"FLAG_UNREAD",(function(){return W})),n.d(t,"FLAG_OUTBOUND",(function(){return z})),n.d(t,"FLAG_IMPORTANT",(function(){return V})),n.d(t,"FLAG_CHAT",(function(){return $})),n.d(t,"FLAG_FRIENDS",(function(){return K})),n.d(t,"FLAG_SPAM",(function(){return X})),n.d(t,"FLAG_DELETED",(function(){return Q})),n.d(t,"FLAG_MEDIA",(function(){return Z})),n.d(t,"FLAG_STEALTH",(function(){return J})),n.d(t,"FLAG_HAS_REPLY",(function(){return ee})),n.d(t,"FLAG_AUDIO_MESSAGE_LISTENED",(function(){return te})),n.d(t,"FLAG_DELETE_BY_TTL",(function(){return ne})),n.d(t,"FOLDER_IMPORTANT",(function(){return re})),n.d(t,"FOLDER_UNRESPOND",(function(){return ae})),n.d(t,"FOLDER_HAS_BANNER",(function(){return oe})),n.d(t,"FOLDER_AD_TAG",(function(){return ie})),n.d(t,"FOLDER_MARKED_UNREAD",(function(){return se})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_TITLE_CHANGED",(function(){return ue})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_AVATAR_CHANGED",(function(){return ce})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED",(function(){return le})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED",(function(){return de})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_PINNED",(function(){return fe})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_USER_JOINED",(function(){return ge})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_USER_LEFT",(function(){return he})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_USER_KICKED",(function(){return pe})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED",(function(){return me})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED",(function(){return _e})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED",(function(){return be})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED",(function(){return ve})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED",(function(){return ye})),n.d(t,"MESSAGE_REQUEST_STATUS_NEW",(function(){return Oe})),n.d(t,"deleteEvent",(function(){return we})),n.d(t,"replaceFlagsEvent",(function(){return Te})),n.d(t,"setFlagsEvent",(function(){return je})),n.d(t,"resetFlagsEvent",(function(){return Ee})),n.d(t,"addMessageEvent",(function(){return De})),n.d(t,"editMessageEvent",(function(){return Ce})),n.d(t,"replaceMessageEvent",(function(){return Se})),n.d(t,"invalidateMessageEvent",(function(){return Me})),n.d(t,"editMessageLocallyEvent",(function(){return ke})),n.d(t,"readInboundEvent",(function(){return Ie})),n.d(t,"readOutboundEvent",(function(){return Pe})),n.d(t,"gotOnlineEvent",(function(){return Le})),n.d(t,"gotOfflineEvent",(function(){return Ae})),n.d(t,"resetDirectoriesEvent",(function(){return Ne})),n.d(t,"replaceDirectoriesEvent",(function(){return xe})),n.d(t,"setDirectoriesEvent",(function(){return Re})),n.d(t,"deleteDialogEvent",(function(){return Fe})),n.d(t,"chatChangedEvent",(function(){return He})),n.d(t,"chatUpdatedEvent",(function(){return Be})),n.d(t,"typingEvent",(function(){return Ye})),n.d(t,"recordingAudioEvent",(function(){return Ge})),n.d(t,"videoCallEvent",(function(){return Ue})),n.d(t,"unreadCountEvent",(function(){return qe})),n.d(t,"notifySettingsChangedEvent",(function(){return We})),n.d(t,"incomingCallEvent",(function(){return ze})),n.d(t,"refreshMessageEvent",(function(){return Ve})),n.d(t,"audioStartEvent",(function(){return $e})),n.d(t,"keyboardCallbackReceivedEvent",(function(){return Ke})),n.d(t,"emptyEvent",(function(){return Xe})),n.d(t,"transitionEvent",(function(){return Qe})),n.d(t,"resyncEvent",(function(){return Ze})),n.d(t,"refreshLpKeyEvent",(function(){return Je})),n.d(t,"waitingForReconnectEvent",(function(){return et})),n.d(t,"reconnectingEvent",(function(){return tt})),n.d(t,"reconnectedEvent",(function(){return nt})),n.d(t,"resetPeer",(function(){return rt})),n.d(t,"changePeer",(function(){return at})),n.d(t,"changeTab",(function(){return ot})),n.d(t,"failedMessage",(function(){return it})),n.d(t,"mutexEvent",(function(){return st})),n.d(t,"resendEvent",(function(){return ut}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("OEbY");var r=n("rudk");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i="event_delete",s="event_set_flags",u="event_replace_flags",c="event_reset_flags",l="event_add_message",d="event_read_inbound",f="event_read_outbound",g="event_got_online",h="event_got_offline",p="event_chat_changed",m="event_chat_updated",_="event_typing",b="event_recoding_audio",v="event_video_call",y="event_unread_count",O="event_notify_settings_changed",w="event_keyboard_callback_received",T="event_empty",j="event_reset_directories",E="event_replace_directories",D="event_set_directories",C="event_resync",S="event_refresh_lp_key",M="transition_event",k="reset_peer",I="mutex",P="change_peer",L="event_change_tab",A="event_failed_message",N="event_resend",x="event_delete_dialog",R="event_edit_message",F="event_replace_message",H="event_invalidate_event",B="event_audio_start",Y="event_waiting_for_reconnect",G="event_reconnecting",U="event_reconnected",q="incoming_call",W=1,z=2,V=8,$=16,K=32,X=64,Q=128,Z=512,J=65536,ee=1<<21,te=4096,ne=1<<22,re=1,ae=2,oe=8,ie=32768,se=1<<20,ue=1,ce=2,le=3,de=4,fe=5,ge=6,he=7,pe=8,me=9,_e=10,be=11,ve=12,ye=13,Oe=3;function we(e){var t=a(e,2)[1];return{type:i,localId:t}}function Te(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:u,messageId:n,mask:r,peerId:o}}function je(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:s,messageId:n,flags:r,peerId:o}}function Ee(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:c,messageId:n,flags:r,peerId:o}}function De(e){var t=a(e,11),n=t[1],o=t[2],i=t[3],s=t[4],u=t[5],c=t[6],d=t[7],f=t[8],g=t[9],h=t[10],p=extend(c,d||void 0);return{type:l,messageId:intval(n),flags:intval(o),peerId:intval(i),date:intval(s),attaches:Object(r.convertKludgesToAttaches)(p,n),subject:c.title||"",text:u,kludges:p,randomId:intval(f),userId:Object(r.isChatPeer)(i)?intval(p.from):intval(i),update_time:h,chat_local_id:g}}function Ce(e){var t=De(e);return t.type=R,t}function Se(e){var t=De(e);return t.type=F,t}function Me(e){var t=De(e);return t.type=H,t}function ke(e){return extend({},e,{type:R})}function Ie(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:d,peerId:n,upToId:r,unread:o}}function Pe(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:f,peerId:n,upToId:r,unread:o}}function Le(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:g,userId:-n,platform:r,lastSeenTs:o}}function Ae(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:h,userId:-n,reason:r,lastSeenTs:o}}function Ne(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:j,peerId:n,mask:r,local:void 0!==o&&o}}function xe(e){var t=a(e,3),n=t[1],r=t[2];return{type:E,peerId:n,mask:r}}function Re(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:D,peerId:n,mask:r,local:void 0!==o&&o}}function Fe(e){var t=a(e,3),n=t[1],r=t[2];return{type:x,peerId:n,localId:r}}function He(e){var t=a(e,3),n=t[1],r=t[2];return{type:p,chatId:n,self:r}}function Be(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:m,peerId:r,updateType:n,updateArg:o}}function Ye(e){var t=a(e,5),n=t[1],r=t[2],o=t[3],i=t[4];return{type:_,peerId:n,userIds:r,totalCount:o,ts:i}}function Ge(e){var t=a(e,5),n=t[1],r=t[2],o=t[3],i=t[4];return{type:b,peerId:n,userIds:r,totalCount:o,ts:i}}function Ue(e){var t=a(e,3),n=t[1],r=t[2];return{type:v,userId:n,callId:r}}function qe(e){var t=a(e,4),n=t[1],r=t[2],o=t[3];return{type:y,count:n,countNotMuted:r,showOnlyNotMuted:o}}function We(e){var t=a(e,2)[1],n=void 0===t?{}:t;return{type:O,peerId:n.peer_id,sound:n.sound,disabledUntil:n.disabled_until}}function ze(e){var t=a(e,2)[1];return{type:q,payload:t}}function Ve(e){var t=a(e,2)[1],n=void 0===t?{}:t,r=De([!1,n.id,n.flags,n.peer_id,n.date,n.message,extend(n.kludges,{title:n.title||""}),{},n.random_id,n.chat_local_id,n.update_time]);return r.type=R,r}function $e(e){var t=a(e,2)[1],n=void 0===t?{}:t;return{type:B,uuid:n.uuid,deviceName:n.device_name||""}}function Ke(e){var t=a(e,2)[1],n=t.event_id,r=t.owner_id,o=t.peer_id,i=t.action;return{type:w,event_id:n,owner_id:r,peer_id:o,action:i}}function Xe(e){return{type:T,params:e}}function Qe(e){return{type:M,state:e}}function Ze(){return{type:C}}function Je(e){var t=a(e,3),n=t[1],r=t[2];return{type:S,key:n,url:r}}function et(e){var t=a(e,2)[1];return{type:Y,timeout:t}}function tt(){return{type:G}}function nt(){return{type:U}}function rt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:k,cancelSearch:e,removeActivePeer:t}}function at(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return{type:P,peerId:e,msgid:t,forward:n,cancelSearch:r,entryPoint:a}}function ot(e){return{type:L,tab:e}}function it(e,t,n){return{type:A,message:t,peer:e,error:n}}function st(e){var t=a(e,6),n=(t[0],t[1]),r=t[2],o=t[3],i=t[4],s=t[5];return{type:I,free:!!intval(n)||intval(i)===vk.id,resource:r,peerId:intval(o),who:intval(i),name:s}}function ut(e,t){return{type:N,message:t,peerId:e}}},f2hD:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUBLE_SIGN",(function(){return a})),n.d(t,"NBSP_SIGN",(function(){return o})),n.d(t,"FIGURE_DASH",(function(){return i})),n.d(t,"MDASH_SIGN",(function(){return s})),n.d(t,"NDASH_SIGN",(function(){return u})),n.d(t,"ADS_SHORT_MONTH_OF_LIST",(function(){return c})),n.d(t,"ADS_SHORT_MONTH_LIST",(function(){return l})),n.d(t,"ADS_MONTH_OF_LIST",(function(){return d})),n.d(t,"ADS_MONTH_LIST",(function(){return f})),n.d(t,"ADS_UNION_TYPE_TARG_AD",(function(){return g})),n.d(t,"ADS_UNION_TYPE_TARG_CAMPAIGN",(function(){return h})),n.d(t,"ADS_UNION_TYPE_TARG_CLIENT",(function(){return p})),n.d(t,"ADS_UNION_TYPE_TARG_AGENCY",(function(){return m})),n.d(t,"ADS_UNION_TYPE_POSTS_OFFICE",(function(){return _})),n.d(t,"ADS_UNION_TYPE_OFFERS_OFFICE",(function(){return b})),n.d(t,"ADS_OFFICE_STUB_FADE_TIME",(function(){return v})),n.d(t,"ADS_OFFICE_TITLE_LENGTH_MAX",(function(){return y})),n.d(t,"FLOAT_FORMAT_PRECISION",(function(){return O})),n.d(t,"PERCENT_FORMAT_PRECISION",(function(){return w})),n.d(t,"ADS_FORMATTING_PERCENT_FLOAT",(function(){return T})),n.d(t,"ADS_FORMATTING_CURRENCY_INT_SIGN",(function(){return j})),n.d(t,"ADS_FORMATTING_CURRENCY_SIGN",(function(){return E})),n.d(t,"ADS_FORMATTING_DELIM_FLOAT",(function(){return D})),n.d(t,"ADS_FORMATTING_DELIM_INT",(function(){return C})),n.d(t,"ADS_FORMATTING_PLAIN",(function(){return S})),n.d(t,"ADS_FORMATTING_DATE",(function(){return M})),n.d(t,"ADS_FORMATTING_COUNT",(function(){return k})),n.d(t,"COST_TYPE_CPM",(function(){return I})),n.d(t,"COST_TYPE_CPC",(function(){return P})),n.d(t,"COST_TYPE_CPA",(function(){return L})),n.d(t,"COST_TYPE_OCPM",(function(){return A})),n.d(t,"AD_GOAL_TYPE_UNKNOWN",(function(){return N})),n.d(t,"AD_GOAL_TYPE_VIEW",(function(){return x})),n.d(t,"AD_GOAL_TYPE_CLICK",(function(){return R})),n.d(t,"AD_GOAL_TYPE_LEAD_FORM_SEND",(function(){return F})),n.d(t,"AD_GOAL_TYPE_VIDEO_PLAY_3S",(function(){return H})),n.d(t,"AD_GOAL_TYPE_GROUP_JOIN",(function(){return B})),n.d(t,"AD_FORMAT_SUBTYPE_UNDEFINED",(function(){return Y})),n.d(t,"AD_FORMAT_SUBTYPE_LEAD_FORM_GOAL_SNIPPET",(function(){return G})),n.d(t,"AD_FORMAT_SUBTYPE_GROUP_JOIN_SNIPPET",(function(){return U}));var r=n("Fm3J"),a="₽",o=" ",i="‒",s="—",u="–",c=["",Object(r.getLangDeferred)("month1sm_of"),Object(r.getLangDeferred)("month2sm_of"),Object(r.getLangDeferred)("month3sm_of"),Object(r.getLangDeferred)("month4sm_of"),Object(r.getLangDeferred)("month5_of"),Object(r.getLangDeferred)("month6_of"),Object(r.getLangDeferred)("month7_of"),Object(r.getLangDeferred)("month8sm_of"),Object(r.getLangDeferred)("month9sm_of"),Object(r.getLangDeferred)("month10sm_of"),Object(r.getLangDeferred)("month11sm_of"),Object(r.getLangDeferred)("month12sm_of")],l=["",Object(r.getLangDeferred)("global_month1sm_ab"),Object(r.getLangDeferred)("global_month2sm_ab"),Object(r.getLangDeferred)("Month3"),Object(r.getLangDeferred)("global_month4sm_ab"),Object(r.getLangDeferred)("Month5"),Object(r.getLangDeferred)("Month6"),Object(r.getLangDeferred)("Month7"),Object(r.getLangDeferred)("global_month8sm_ab"),Object(r.getLangDeferred)("global_month9sm_ab"),Object(r.getLangDeferred)("global_month10sm_ab"),Object(r.getLangDeferred)("global_month11sm_ab"),Object(r.getLangDeferred)("global_month12sm_ab")],d=["",Object(r.getLangDeferred)("month1_of"),Object(r.getLangDeferred)("month2_of"),Object(r.getLangDeferred)("month3_of"),Object(r.getLangDeferred)("month4_of"),Object(r.getLangDeferred)("month5_of"),Object(r.getLangDeferred)("month6_of"),Object(r.getLangDeferred)("month7_of"),Object(r.getLangDeferred)("month8_of"),Object(r.getLangDeferred)("month9_of"),Object(r.getLangDeferred)("month10_of"),Object(r.getLangDeferred)("month11_of"),Object(r.getLangDeferred)("month12_of")],f=["",Object(r.getLangDeferred)("Month1"),Object(r.getLangDeferred)("Month2"),Object(r.getLangDeferred)("Month3"),Object(r.getLangDeferred)("Month4"),Object(r.getLangDeferred)("Month5"),Object(r.getLangDeferred)("Month6"),Object(r.getLangDeferred)("Month7"),Object(r.getLangDeferred)("Month8"),Object(r.getLangDeferred)("Month9"),Object(r.getLangDeferred)("Month10"),Object(r.getLangDeferred)("Month11"),Object(r.getLangDeferred)("Month12")],g=0,h=1,p=2,m=3,_=4,b=5,v=300,y=60,O=2,w=3,T="percent_float",j="currency_int_sign",E="currency_sign",D="delim_float",C="delim_int",S="plain",M="date_view",k="count_view",I=1,P=2,L=3,A=4,N=0,x=1,R=2,F=3,H=4,B=5,Y=0,G=1,U=2},gVOz:function(e,t,n){"use strict";n.r(t),n.d(t,"WarningNotification",(function(){return l})),n.d(t,"default",(function(){return d}));n("91GP");var r=n("q1tI"),a=(n("17x9"),n("dV62")),o=n("Ht+d"),i=n("kHqu"),s=n("6raB"),u=n("6krn");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class l extends r.Component{constructor(e){super(e),this.clickProceed=()=>{this.sendViewSignal(),this.props.onClose()},this.clickBack=()=>{this.setState({isLoading:!0}),window.history.length>1?window.history.back():window.nav.go("/")},this.state={isLoading:!1}}sendViewSignal(){var e=this.props,t={act:"hide_warning_notification",notification_id:e.notification_id,group_id:e.group_id,user_id:e.user_id,hash:e.hash};ajax.post("al_groups.php",t,{})}renderImage(){var e="/images/groups/warning_notification";return r.createElement("img",{alt:Object(u.getLang)("groups_warning_notification_web_img_alt"),src:e+".png",srcSet:e+"_2x.png 2x",className:"WarningNotification__image"})}render(){var e=this.props,t=this.state,n=this.renderImage();return r.createElement("div",{className:"WarningNotification__box"},r.createElement("div",{className:"WarningNotification__image-container"},n),r.createElement("div",{className:"WarningNotification__title WarningNotification__component--centered",dangerouslySetInnerHTML:{__html:e.title_html}}),r.createElement("div",{className:"WarningNotification__text WarningNotification__component--centered",dangerouslySetInnerHTML:{__html:e.text_html}}),r.createElement(s.default,{loading:t.isLoading,onClick:this.clickBack,className:"WarningNotification__button WarningNotification__button--back WarningNotification__component--centered"},Object(u.getLang)("global_back")),r.createElement(o.default,{onClick:this.clickProceed,appearance:"link",className:"WarningNotification__button WarningNotification__button--proceed WarningNotification__component--centered"},Object(u.getLang)("groups_warning_notification_proceed")))}}function d(e){var t=()=>{d(e)};cur._back.show.push(t),cur._back.onArticleNavBack=t;var n=()=>{Object(a.destroyComponentInBox)(!0)};cur.zNavInfo&&(n=()=>{Object(a.destroyComponentInBox)(!0),Object(i.zNav)(cur.zNavInfo.info,cur.zNavInfo.opts)});var o={containerClass:"WarningNotification",width:655,height:538,onHideAttempt:e=>Boolean(e)};Object(a.showComponentInBox)(r.createElement(l,c({onClose:n},e)),o)}},"h++7":function(e,t,n){"use strict";n.r(t),n.d(t,"OUR_DOMAINS",(function(){return r})),n.d(t,"ENTITIES",(function(){return a})),n.d(t,"VK_DOMAIN",(function(){return o})),n.d(t,"MENTION",(function(){return i})),n.d(t,"MENTION_RAW",(function(){return s})),n.d(t,"ARROW_UP",(function(){return u})),n.d(t,"ARROW_DOWN",(function(){return c})),n.d(t,"PAGE_UP",(function(){return l})),n.d(t,"PAGE_DOWN",(function(){return d})),n.d(t,"END_KEY",(function(){return f})),n.d(t,"HOME",(function(){return g})),n.d(t,"ENTER",(function(){return h})),n.d(t,"ESC",(function(){return p})),n.d(t,"UNPRINTABLE_KEYS",(function(){return m})),n.d(t,"UP_DOWN_CONTROLS",(function(){return _})),n.d(t,"PRINTABLE",(function(){return b})),n.d(t,"FOLDER_UNREAD",(function(){return v})),n.d(t,"FOLDER_ALL",(function(){return y})),n.d(t,"FOLDER_UNRESPOND",(function(){return O})),n.d(t,"FOLDER_IMPORTANT",(function(){return w})),n.d(t,"FOLDER_MESSAGE_REQUEST",(function(){return T})),n.d(t,"FOLDER_MESSAGE_REQUEST_REJECTED",(function(){return j})),n.d(t,"FOLDER_AD_TAG",(function(){return E})),n.d(t,"FOLDER_MARKED_UNREAD",(function(){return D})),n.d(t,"FOLDERS",(function(){return C})),n.d(t,"FOLDER_MASKS",(function(){return S})),n.d(t,"TOP_DOMAINS",(function(){return M})),n.d(t,"MAX_DOMAIN_LENGTH",(function(){return k})),n.d(t,"EMAIL",(function(){return I})),n.d(t,"MESSAGE_REGEXP",(function(){return P})),n.d(t,"RE_HASHTAG_EXTRACTION_PATTERN",(function(){return A})),n.d(t,"MASS_MENTION_ALIASES",(function(){return N})),n.d(t,"RE_MASSMENTION",(function(){return x})),n.d(t,"LINE_FEED",(function(){return R}));n("Oyvg");var r=/^([a-zA-Z0-9\.\_\-]+\.)?(vkontakte\.ru|vk\.com|vkadre\.ru|vshtate\.ru|userapi\.com|vk\.me)$/,a=/([^a-zA-Z0-9#%;_\-.\/?&=\[\]])/g,o=/^(?:https?:\/\/)?(?:vk\.com|vkontakte\.ru)?\/([a-zA-Z0-9\._]+)\??$/,i=/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g,s=/(^|[\s.,:\'\";>\)\(])(\*|@)([A-Za-z0-9_\.]{2,32})\s*\((.+?)\)/g,u=38,c=40,l=33,d=34,f=35,g=36,h=13,p=27,m=[u,c,l,d,h,p,f,g],_=[l,d,c,u,g,f],b="printable",v="unread",y="all",O="unrespond",w="important",T="mr",j="mr_rejected",E="ad_tag",D="marked_unread",C=[y,v,O,w,T,E],S={[O]:2,[w]:1,[T]:256,[j]:512,[E]:32768,[D]:1<<20},M=[].concat("aaa,aarp,abarth,abb,abbott,abbvie,abc,able,abogado,abudhabi,ac,academy,accenture,accountant,accountants,aco,active,actor,ad,adac,ads,adult,ae,aeg,aero,aetna,af,afamilycompany,afl,africa,ag,agakhan,agency,ai,aig,aigo,airbus,airforce,airtel,akdn,al,alfaromeo,alibaba,alipay,allfinanz,allstate,ally,alsace,alstom,am,americanexpress,americanfamily,amex,amfam,amica,amsterdam,an,analytics,android,anquan,anz,ao,aol,apartments,app,apple,aq,aquarelle,ar,aramco,archi,army,arpa,art,arte,as,asda,asia,associates,at,athleta,attorney,au,auction,audi,audible,audio,auspost,author,auto,autos,avianca,aw,aws,ax,axa,az,azure,ba,baby,baidu,banamex,bananarepublic,band,bank,bar,barcelona,barclaycard,barclays,barefoot,bargains,baseball,basketball,bauhaus,bayern,bb,bbc,bbt,bbva,bcg,bcn,bd,be,beats,beauty,beer,bentley,berlin,best,bestbuy,bet,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,bl,black,blackfriday,blanco,blockbuster,blog,bloomberg,blue,bm,bms,bmw,bn,bnl,bnpparibas,bo,boats,boehringer,bofa,bom,bond,boo,book,booking,boots,bosch,bostik,boston,bot,boutique,box,bq,br,bradesco,bridgestone,broadway,broker,brother,brussels,bs,bt,budapest,bugatti,build,builders,business,buy,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,call,calvinklein,cam,camera,camp,cancerresearch,canon,capetown,capital,capitalone,car,caravan,cards,care,career,careers,cars,cartier,casa,case,caseih,cash,casino,cat,catering,catholic,cba,cbn,cbre,cbs,cc,cd,ceb,center,ceo,cern,cf,cfa,cfd,cg,ch,chanel,channel,chase,chat,cheap,chintai,chloe,christmas,chrome,chrysler,church,ci,cipriani,circle,cisco,citadel,citi,citic,city,cityeats,ck,cl,claims,cleaning,click,clinic,clinique,clothing,cloud,club,clubmed,cm,cn,co,coach,codes,coffee,college,cologne,com,comcast,commbank,community,company,compare,computer,comsec,condos,construction,consulting,contact,contractors,cooking,cookingchannel,cool,coop,corsica,country,coupon,coupons,courses,cr,credit,creditcard,creditunion,cricket,crown,crs,cruise,cruises,csc,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,data,date,dating,datsun,day,dclk,dds,de,deal,dealer,deals,degree,delivery,dell,deloitte,delta,democrat,dental,dentist,desi,design,dev,dhl,diamonds,diet,digital,direct,directory,discount,discover,dish,diy,dj,dk,dm,dnp,do,docs,doctor,dodge,dog,doha,domains,dot,download,drive,dtv,dubai,duck,dunlop,duns,dupont,durban,dvag,dvr,dz,earth,eat,ec,eco,edeka,edu,education,ee,eg,eh,email,emerck,energy,engineer,engineering,enterprises,epost,epson,equipment,er,ericsson,erni,es,esq,estate,esurance,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,extraspace,fage,fail,fairwinds,faith,family,fan,fans,farm,farmers,fashion,fast,fedex,feedback,ferrari,ferrero,fi,fiat,fidelity,fido,film,final,finance,financial,fire,firestone,firmdale,fish,fishing,fit,fitness,fj,fk,flickr,flights,flir,florist,flowers,fly,fm,fo,foo,food,foodnetwork,football,ford,forex,forsale,forum,foundation,fox,fr,free,fresenius,frl,frogans,frontdoor,frontier,ftr,fujitsu,fujixerox,fun,fund,furniture,futbol,fyi,ga,gal,gallery,gallo,gallup,game,games,gap,garden,gb,gbiz,gd,gdn,ge,gea,gent,genting,george,gf,gg,ggee,gh,gi,gift,gifts,gives,giving,gl,glade,glass,gle,global,globo,gm,gmail,gmbh,gmo,gmx,gn,godaddy,gold,goldpoint,golf,goo,goodhands,goodyear,goog,google,gop,got,gov,gp,gq,gr,grainger,graphics,gratis,green,gripe,group,gs,gt,gu,guardian,gucci,guge,guide,guitars,guru,gw,gy,hair,hamburg,hangout,haus,hbo,hdfc,hdfcbank,health,healthcare,help,helsinki,here,hermes,hgtv,hiphop,hisamitsu,hitachi,hiv,hk,hkt,hm,hn,hockey,holdings,holiday,homedepot,homegoods,homes,homesense,honda,honeywell,horse,hospital,host,hosting,hot,hoteles,hotmail,house,how,hr,hsbc,ht,htc,hu,hughes,hyatt,hyundai,ibm,icbc,ice,icu,id,ie,ieee,ifm,ikano,il,im,imamat,imdb,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insurance,insure,int,intel,international,intuit,investments,io,ipiranga,iq,ir,irish,is,iselect,ismaili,ist,istanbul,it,itau,itv,iveco,iwc,jaguar,java,jcb,jcp,je,jeep,jetzt,jewelry,jio,jlc,jll,jm,jmp,jnj,jo,jobs,joburg,jot,joy,jp,jpmorgan,jprs,juegos,juniper,kaufen,kddi,ke,kerryhotels,kerrylogistics,kerryproperties,kfh,kg,kh,ki,kia,kim,kinder,kindle,kitchen,kiwi,km,kn,koeln,komatsu,kosher,kp,kpmg,kpn,kr,krd,kred,kuokgroup,kw,ky,kyoto,kz,la,lacaixa,ladbrokes,lamborghini,lamer,lancaster,lancia,lancome,land,landrover,lanxess,lasalle,lat,latino,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,lefrak,legal,lego,lexus,lgbt,li,liaison,lidl,life,lifeinsurance,lifestyle,lighting,like,lilly,limited,limo,lincoln,linde,link,lipsy,live,living,lixil,lk,loan,loans,local,locker,locus,loft,lol,london,lotte,lotto,love,lpl,lplfinancial,lr,ls,lt,ltd,ltda,lu,lundbeck,lupin,luxe,luxury,lv,ly,ma,macys,madrid,maif,maison,makeup,man,management,mango,market,marketing,markets,marriott,marshalls,maserati,mattel,mba,mc,mcd,mcdonalds,mckinsey,md,me,med,media,meet,melbourne,meme,memorial,men,menu,meo,metlife,mf,mg,mh,miami,microsoft,mil,mini,mint,mit,mitsubishi,mk,ml,mlb,mls,mm,mma,mn,mo,mobi,mobile,mobily,moda,moe,moi,mom,monash,money,monster,montblanc,mopar,mormon,mortgage,moscow,moto,motorcycles,mov,movie,movistar,mp,mq,mr,ms,msd,mt,mtn,mtpc,mtr,mu,museum,mutual,mv,mw,mx,my,mz,na,nab,nadex,nagoya,name,nationwide,natura,navy,nba,nc,ne,nec,net,netbank,netflix,network,neustar,new,newholland,news,next,nextdirect,nexus,nf,nfl,ng,ngo,nhk,ni,nico,nike,nikon,ninja,nissan,nissay,nl,no,nokia,northwesternmutual,norton,now,nowruz,nowtv,np,nr,nra,nrw,ntt,nu,nyc,nz,obi,observer,off,office,okinawa,olayan,olayangroup,oldnavy,ollo,om,omega,one,ong,onl,online,onyourside,ooo,open,oracle,orange,org,organic,orientexpress,origins,osaka,otsuka,ott,ovh,pa,page,pamperedchef,panasonic,panerai,paris,pars,partners,parts,party,passagens,pay,pccw,pe,pet,pf,pfizer,pg,ph,pharmacy,philips,phone,photo,photography,photos,physio,piaget,pics,pictet,pictures,pid,pin,ping,pink,pioneer,pizza,pk,pl,place,play,playstation,plumbing,plus,pm,pn,pnc,pohl,poker,politie,porn,post,pr,pramerica,praxi,press,prime,pro,prod,productions,prof,progressive,promo,properties,property,protection,pru,prudential,ps,pt,pub,pw,pwc,py,qa,qpon,quebec,quest,qvc,racing,radio,raid,re,read,realestate,realtor,realty,recipes,red,redstone,redumbrella,rehab,reise,reisen,reit,reliance,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rexroth,rich,richardli,ricoh,rightathome,ril,rio,rip,rmit,ro,rocher,rocks,rodeo,rogers,room,rs,rsvp,ru,ruhr,run,rw,rwe,ryukyu,sa,saarland,safe,safety,sakura,sale,salon,samsclub,samsung,sandvik,sandvikcoromant,sanofi,sap,sapo,sarl,sas,save,saxo,sb,sbi,sbs,sc,sca,scb,schaeffler,schmidt,scholarships,school,schule,schwarz,science,scjohnson,scor,scot,sd,se,seat,secure,security,seek,select,sener,services,ses,seven,sew,sex,sexy,sfr,sg,sh,shangrila,sharp,shaw,shell,shia,shiksha,shoes,shop,shopping,shouji,show,showtime,shriram,si,silk,sina,singles,site,sj,sk,ski,skin,sky,skype,sl,sling,sm,smart,smile,sn,sncf,so,soccer,social,softbank,software,sohu,solar,solutions,song,sony,soy,space,spiegel,spot,spreadbetting,sr,srl,srt,ss,st,stada,staples,star,starhub,statebank,statefarm,statoil,stc,stcgroup,stockholm,storage,store,stream,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiftcover,swiss,sx,sy,sydney,symantec,systems,sz,tab,taipei,talk,taobao,target,tatamotors,tatar,tattoo,tax,taxi,tc,tci,td,tdk,team,tech,technology,tel,telecity,telefonica,temasek,tennis,teva,tf,tg,th,thd,theater,theatre,tiaa,tickets,tienda,tiffany,tips,tires,tirol,tj,tjmaxx,tjx,tk,tkmaxx,tl,tm,tmall,tn,to,today,tokyo,tools,top,toray,toshiba,total,tours,town,toyota,toys,tp,tr,trade,trading,training,travel,travelchannel,travelers,travelersinsurance,trust,trv,tt,tube,tui,tunes,tushu,tv,tvs,tw,tz,ua,ubank,ubs,uconnect,ug,uk,um,unicom,university,uno,uol,ups,us,uy,uz,va,vacations,vana,vanguard,vc,ve,vegas,ventures,verisign,vermögensberater,vermögensberatung,versicherung,vet,vg,vi,viajes,video,vig,viking,villas,vin,vip,virgin,visa,vision,vista,vistaprint,viva,vivo,vlaanderen,vn,vodka,volkswagen,volvo,vote,voting,voto,voyage,vu,vuelos,wales,walmart,walter,wang,wanggou,warman,watch,watches,weather,weatherchannel,webcam,weber,website,wed,wedding,weibo,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wine,winners,wme,wolterskluwer,woodside,work,works,world,wow,ws,wtc,wtf,xbox,xerox,xfinity,xihuan,xin,xperia,xxx,xyz,yachts,yahoo,yamaxun,yandex,ye,yodobashi,yoga,yokohama,you,youtube,yt,yu,yun,za,zappos,zara,zero,zip,zippo,zm,zone,zuerich,zw".split(","),"бг,бел,дети,ею,католик,ком,мкд,мон,москва,онлайн,орг,рус,рф,сайт,срб,укр".split(","),"qxam,90ae,90ais,d1acj3b,e1a4c,80aqecdr1a,j1aef,d1alf,l1acc,80adxhks,80asehdb,c1avg,p1acf,p1ai,80aswg,90a3ac,j1amh,80ao21a,y9a3aq,9dbq2a,mgbca7dzdo,mgba3a3ejt,mgbayh7gpa,lgbbat1ad8j,mgberp4a5d4ar,mgba7c0bbn0a,mgbc0a9azcg,mgb2ddes,mgbaam7a8h,mgba3a4f16a,mgbbh1a,mgbab2bd,ngbe9e0a,mgbbh1a71e,pgbs0dh,mgbpl2fh,ogbpf8fl,ngbc5azd,mgbtx2b,mgb9awbf,ygbi2ammx,wgbl6a,mgbi4ecexp,fhbei,wgbh1c,mgbx4cd0ab,mgbb9fbpob,4gbrim,mgbt3dhd,mgbai9azgqp6j,mgbgu82a,11b4c3d,c2br7g,h2brj9c,h2breg3eve,h2brj9c8c,i1b6b1a6a2e,54b7fta0cc,45brj9c,45br5cyl,s9brj9c,gecrj9c,3hcrj9c,xkc2dl3a5ee0h,xkc2al3hye2a,clchc0ea0b2g2a9gcd,fpcrj9c3d,2scrj9c,rvc1e0am3e,fzc2c9e2c,42c2d9a,o3cw4h,node,q9jyb4c,gckr3f0f,qcka1pmc,tckwe,cck2b3b,1ck2e1b,bck1b9a5dre4c,eckvdtc9d,rhqv96g,fiq64b,fiqs8s,fiqz9s,fiq228c5hs,vhquv,1qqw23a,vuq861b,nyqy26a,45q11c,55qx5d,55qw42g,kprw13d,kpry57d,czru2d,czrs0t,czr694b,w4rs40l,w4r85el8fhu5dnra,3ds443g,3oq18vl8pn36a,pssy2u,tiq49xqyj,fjq720a,fct429k,estv75g,xhq521b,9krt00a,30rr7y,6qq986b3xl,kput3i,kpu716f,zfr164b,mxtq1m,yfro4i67o,efvy88h,9et52u,rovu88b,nqv7f,b4w605ferd,unup4y,mix891f,mix082f,3pxu8k,pbt977c,6frz82g,nqv7fs00ema,ses554g,hxt814e,5tzm5g,io0a7i,8y0a063a,jlq61u9w7b,flw351e,g2xx48c,gk3at1e,3bst00m,fzys8d69uvgm,kcrx77d1x4a,jvr189m,imr513n,5su34j936bgsg,j6w193g,t60b56a,mk1bu44c,cg4bki,3e0b707e".split(",").map(e=>"xn--"+e)),k=M.reduce((e,t)=>Math.max(e,t.length),0),I=new RegExp("([a-zA-Zа-яА-Я\\-_\\.0-9\\+]+@(((?:[\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј\\—\\-\\_]+\\.){1,5})([A-Za-zа-яА-Я\\-\\d]{2,22})))","ig"),P=new RegExp("(https?:\\/\\/)?(((?:[\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј\\—\\-\\_]+\\.){1,5})([A-Za-zа-яА-Я\\-\\d]{2,22})(?:\\:(\\d{2,5}))?)(([\\/?#])(?:\\&amp;|\\&#\\d{2,6};|,[_%]|!|,*[\\wА-Яа-я\\xa8\\xb8\\xc0-\\xffєЄҐґЇїІіЈј\\—\\-\\_@#%?+\\/\\$.~=;:'ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ　-〿＀-￯*]+|(?:\\(|\\[)[\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј\\d&#%;,]+(?:\\)|\\])){0,200})?","ig"),L="(?:[a-zA-Zа-яА-ЯёіјєїґўЁІЈЄЇҐЎ’_\\d]|(?:&#(?:19[2-9]|(?:[2-9]|1[0-3])[0-9][0-9]);?))",A=`(^|[s.,:'";>)(]?)(${`(#${L}{0,100}(?:[a-zA-Zа-яА-ЯёіјєїґўЁІЈЄЇҐЎ’]|(?:&#(?:19[2-9]|(?:[2-9]|1[0-3])[0-9][0-9]);?))${L}{0,100})`})(@((?:[a-z0-9_]*[a-z0-9])?(?:(?:.[a-z](?:[a-z0-9_]+[a-z0-9])?)*.[a-z][a-z0-9_]{2,40}[a-z0-9])?))?(?=$|[s.,:'"&;?<)(]?)`,N={all:["all","everyone","все"],online:["online","here","здесь","тут"]},x=new RegExp(['(?!,|;|:|\\.|\\s|"|\\(|\\)|\\[|\\]|!|\\?)',"(",[].concat(N.all).concat(N.online).map(e=>`@${e}|\\*${e}`).join("|"),")",'(?=$|,|;|:|\\.(?![a-z0-9_-])|\\s|"|\\(|\\)|\\[|\\]|!|\\?)'].join(""),"gi"),R=10},hJPO:function(e,t,n){"use strict";n.r(t),n.d(t,"showInviteLinkBox",(function(){return i})),n.d(t,"copyInviteLinkHref",(function(){return s}));var r=n("EasH"),a=n("zxIV"),o=n("v+DW");function i(e){new u(e).show()}function s(e){var t=!1,n=Object(a.attr)(e,"href");window.copyToClipboard(n);var r=Object(a.domPN)(Object(a.domPN)(e)),o=geByClass1("invite-link-actions",r),i=geByClass1("invite-link-actions-copied",r);return Object(a.hide)(o),Object(a.show)(i),setStyle(i,{opacity:1}),t=setTimeout(()=>{setStyle(i,{opacity:0}),Object(a.hide)(i),Object(a.show)(o),clearTimeout(t)},2e3),!1}class u{constructor(e){this.inviteLinkId=e}show(){var e={params:{width:450,hideButtons:!0},onDone:(e,t)=>this.onShowBoxDone(t)};this.box=Object(r.showBox)("invite.php",{act:"group_invite_link_box",invite_link_id:this.inviteLinkId},e)}join(e,t,n,r){if(Object(o.isButtonLocked)(this.joinButton))return!1;var a={hash:e,link:t,gid:n,act:"enter"};ajax.post("al_groups.php",a,{onDone:()=>{nav.go(r)},showProgress:()=>{Object(o.lockButton)(this.joinButton)},hideProgress:()=>{Object(o.unlockButton)(this.joinButton)}})}onShowBoxDone(e){var t=e.hash,n=void 0===t?"":t,r=e.link,o=void 0===r?"":r,i=e.groupId,s=void 0===i?"":i,u=e.groupLink,c=void 0===u?"":u;n?(this.joinButton=Object(a.domQuery1)(".group-join-button",this.box.bodyNode),addEvent(this.joinButton,"click",()=>{this.join(n,o,s,c)})):this.box.setOptions({hideButtons:!1})}}},hmfN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var a=u[e];if("function"==typeof a)return a(t,n,r);return a};var r,a=n("QXA5"),o=(r=a)&&r.__esModule?r:{default:r};var i=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function s(e){var t=i[e];return 2===e?"[во "+t+" в] LT":"[в "+t+" в] LT"}var u={lastWeek:function(e,t,n){var r=e.getUTCDay();return(0,o.default)(e,t,n)?s(r):function(e){var t=i[e];switch(e){case 0:return"[в прошлое "+t+" в] LT";case 1:case 2:case 4:return"[в прошлый "+t+" в] LT";case 3:case 5:case 6:return"[в прошлую "+t+" в] LT"}}(r)},yesterday:"[вчера в] LT",today:"[сегодня в] LT",tomorrow:"[завтра в] LT",nextWeek:function(e,t,n){var r=e.getUTCDay();return(0,o.default)(e,t,n)?s(r):function(e){var t=i[e];switch(e){case 0:return"[в следующее "+t+" в] LT";case 1:case 2:case 4:return"[в следующий "+t+" в] LT";case 3:case 5:case 6:return"[в следующую "+t+" в] LT"}}(r)},other:"L"};e.exports=t.default},jyIe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),a=s(n("17x9")),o=s(n("TSYQ")),i=n("b/SL");function s(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(e,n){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=d(t).call(this,e,n),r=!o||"object"!==c(o)&&"function"!=typeof o?f(a):o,h(f(r),"onKeyDown",(function(e){var t=r.state.value;"Enter"===e.key&&r.update(t)})),h(f(r),"onChange",(function(e){r.setState({value:e.target.value,changed:!0,invalid:!1})})),h(f(r),"onBlur",(function(){var e=r.state.value;r.update(e)})),r.state={invalid:!1,changed:!1,value:r.formatDate(e)},r}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(a=[{key:"componentDidUpdate",value:function(e){var t=e.value;(0,i.isEqual)(t,this.props.value)||this.setState({value:this.formatDate(this.props)})}},{key:"formatDate",value:function(e){var t=e.value,n=e.dateDisplayFormat,r=e.dateOptions;return t&&(0,i.isValid)(t)?(0,i.format)(t,n,r):""}},{key:"update",value:function(e){var t=this.state,n=t.invalid,r=t.changed;if(!n&&r&&e){var a=this.props,o=a.onChange,s=a.dateDisplayFormat,u=a.dateOptions,c=(0,i.parse)(e,s,new Date,u);(0,i.isValid)(c)?this.setState({changed:!1},(function(){return o(c)})):this.setState({invalid:!0})}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.readOnly,a=e.placeholder,i=e.disabled,s=e.onFocus,u=this.state,c=u.value,l=u.invalid;return r.default.createElement("span",{className:(0,o.default)("rdrDateInput",t)},r.default.createElement("input",{readOnly:n,disabled:i,value:c,placeholder:a,onKeyDown:this.onKeyDown,onChange:this.onChange,onBlur:this.onBlur,onFocus:s}),l&&r.default.createElement("span",{className:"rdrWarning"},"⚠"))}}])&&l(n.prototype,a),s&&l(n,s),t}(r.PureComponent);p.propTypes={value:a.default.object,placeholder:a.default.string,disabled:a.default.bool,readOnly:a.default.bool,dateOptions:a.default.object,dateDisplayFormat:a.default.string,className:a.default.string,onFocus:a.default.func.isRequired,onChange:a.default.func.isRequired},p.defaultProps={readOnly:!0,disabled:!1,dateDisplayFormat:"MMM D, YYYY"};var m=p;t.default=m},k3PD:function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}n.r(t),n.d(t,"isElementInViewport",(function(){return r}))},lJdi:function(e,t,n){"use strict";n.r(t),n.d(t,"MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_INVITE",(function(){return u})),n.d(t,"MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_PIN",(function(){return c})),n.d(t,"MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CHANGE_TITLE",(function(){return l})),n.d(t,"MAIL_CHAT_FLAG_ADMINS_CAN_ADD_ADMINS",(function(){return d})),n.d(t,"MAIL_CHAT_FLAG_ADMINS_CAN_INVITE_LINK",(function(){return f})),n.d(t,"MAIL_CHAT_FLAG_SERVICE_CHAT",(function(){return g})),n.d(t,"MAIL_CHAT_FLAG_IS_CHANNEL",(function(){return h})),n.d(t,"MAIL_CHAT_FLAG_IS_SUPERGROUP",(function(){return p})),n.d(t,"MAIL_CHAT_FLAG_IS_FAKE_CHANNEL",(function(){return m})),n.d(t,"MAIL_CHAT_FLAG_IS_PROMO_CHAT",(function(){return _})),n.d(t,"MAIL_CHAT_FLAG_IS_BUSINESS_NOTIFY",(function(){return b})),n.d(t,"MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE",(function(){return v})),n.d(t,"MAIL_CHAT_FLAG_IS_CASPER",(function(){return y})),n.d(t,"MAIL_CHAT_FLAG_IS_COPIED",(function(){return O})),n.d(t,"MAIL_CHAT_FLAG_IS_COMMUNITY_CHAT",(function(){return w})),n.d(t,"MAIL_CHAT_FLAG_IS_COMMUNITY_CHAT_DELETED",(function(){return T})),n.d(t,"MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_MASS_MENTION",(function(){return j})),n.d(t,"MAIL_CHAT_FLAG_ONLY_OWNER_CAN_MASS_MENTION",(function(){return E})),n.d(t,"MAIL_CHAT_FLAG_ONLY_OWNER_CAN_INVITE",(function(){return D})),n.d(t,"MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CHANGE_TITLE",(function(){return C})),n.d(t,"MAIL_CHAT_FLAG_ONLY_OWNER_CAN_PIN",(function(){return S})),n.d(t,"MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_SEE_INVITE_LINK",(function(){return M})),n.d(t,"MAIL_CHAT_FLAG_ONLY_OWNER_CAN_SEE_INVITE_LINK",(function(){return k})),n.d(t,"MAIL_CHAT_FLAG_ONLY_ADMINS_CAN_CALL",(function(){return I})),n.d(t,"MAIL_CHAT_FLAG_ONLY_OWNER_CAN_CALL",(function(){return P})),n.d(t,"MAIL_CHATS_ACTION_SEE_INVITE_LINK",(function(){return L})),n.d(t,"MAIL_CHATS_ACTION_CHANGE_INVITE_LINK",(function(){return A})),n.d(t,"MAIL_CHATS_ACTION_INVITE_USER",(function(){return N})),n.d(t,"MAIL_CHATS_ACTION_PIN_OR_UNPIN",(function(){return x})),n.d(t,"MAIL_CHATS_ACTION_CHANGE_TITLE",(function(){return R})),n.d(t,"MAIL_CHATS_ACTION_ADD_ADMIN",(function(){return F})),n.d(t,"MAIL_CHATS_ACTION_MASS_MENTION",(function(){return H})),n.d(t,"MAIL_CHATS_ACTION_START_GROUP_CALL",(function(){return B})),n.d(t,"canSeeInviteLink",(function(){return G})),n.d(t,"canMassMention",(function(){return U})),n.d(t,"canChangeInviteLink",(function(){return q})),n.d(t,"canAddAdmin",(function(){return W})),n.d(t,"canInviteUser",(function(){return z})),n.d(t,"canKickUser",(function(){return V})),n.d(t,"canPinOrUnpin",(function(){return $})),n.d(t,"canStartGroupCall",(function(){return K})),n.d(t,"canChangeTitle",(function(){return X})),n.d(t,"canChangeAvatar",(function(){return Q})),n.d(t,"canSeeAllMessages",(function(){return Z})),n.d(t,"canSeeSettingsItem",(function(){return J})),n.d(t,"canCloseChat",(function(){return ee})),n.d(t,"checkChatRights",(function(){return te})),n.d(t,"doesChatTabHaveFlag",(function(){return ne})),n.d(t,"isUserAdminInChat",(function(){return re})),n.d(t,"isUserOwnerInChat",(function(){return ae})),n.d(t,"isUserInvitedByMe",(function(){return oe}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("OEbY");var r=n("rHUl"),a=n("aong"),o=n("P13b");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=1,c=4,l=8,d=16,f=32,g=64,h=256,p=512,m=1024,_=2048,b=4096,v=16384,y=32768,O=65536,w=1<<17,T=1<<18,j=1<<19,E=1<<20,D=1<<21,C=1<<22,S=1<<23,M=1<<24,k=1<<25,I=1<<26,P=1<<27,L="see_invite_link",A="change_invite_link",N="invite_user",x="pin_unpin",R="change_title",F="add_admin",H="mass_mention",B="call",Y={[A]:[f,f],[F]:[d,d],[L]:[M,k],[N]:[u,D],[x]:[c,S],[R]:[l,C],[H]:[j,E],[B]:[I,P]};function G(e,t,n){return te(e,L,t,n)}function U(e,t,n){return te(e,H,t,n)}function q(e,t,n){return te(e,A,t,n)}function W(e,t,n,o){var i=Object(a.unpackStore)(e);return!ae(Object(r.getTab)(i,n||i.peer),t)&&te(e,F,n,o)}function z(e,t,n){return te(e,N,t,n)}function V(e,t,n,i){var s=Object(a.unpackStore)(e);if(function(e,t){var n=Object(a.unpackStore)(e);return void 0!==n.service&&(n.service&t)>0}(e,1))return!0;var u=Object(r.getTab)(s,n||s.peer);return!(u.data.kicked&&!u.data.closed)&&(!Object(o.isFvkcomgroup)(e,n)&&(!ae(u,t)&&(!!ae(u,i=void 0===i?window.vk.id:i)||(re(u,i)||oe(u,t))&&!re(u,t))))}function $(e,t,n){return te(e,x,t,n)}function K(e,t,n){return te(e,B,t,n)}function X(e,t,n){return te(e,R,t,n)}function Q(e,t,n){return X(e,t,n)&&!Object(o.isFvkcomgroup)(e,t)}function Z(e,t,n){return!Object(r.isCommunityPeer)(n)||!!Object(r.getTab)(e,t).caccess[n]}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.vk.id,i=Object(a.unpackStore)(e),s=Object(o.isFvkcomgroup)(i,t),u=i.tabs[i.peer];if(Object(r.isCommunityChat)(i,t)){var c=u&&u.data&&Object(r.isChatActive)(u),l=ae(u,-i.gid)&&c,d=l||re(u,n)&&c,f=u.allowedUpdateFlags?u.allowedUpdateFlags.filter(e=>e!==v):[];return!(!d||!f.length)}return ae(u,n)&&!s}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.vk.id,o=Object(a.unpackStore)(e),i=Object(r.isCommunityChat)(o,t),s=Object(r.isCommunityChatDeleted)(o,t),u=o.tabs[o.peer],c=u&&u.data&&Object(r.isChatActive)(u),l=ae(u,-o.gid)&&c,d=l||re(u,n)&&c;return i&&!s&&d&&u.allowedUpdateFlags&&u.allowedUpdateFlags.includes(v)}function te(e,t,n,s){var u=Object(a.unpackStore)(e),c=u.gid?-u.gid:window.vk.id;s=void 0===s?c:s,n=void 0===n?u.peer:n;var l=Object(r.getTab)(u,n),d=l&&l.data&&Object(r.isChatActive)(l),f=i(Y[t],2),g=f[0],h=f[1],p=h|g,m=Object(o.isFvkcomgroup)(e,n),_=ae(l,s)&&d,b=_||re(l,s)&&d;if(m)switch(t){case F:case N:return!1;case L:return d;default:return u.gid>0}else if(Object(r.isCommunityChat)(e,n)){if(Object(r.isClosedChat)(e,n))return!1;switch(t){case L:return Object(r.isServiceChatTab)(l)?d:ne(l,p)?ne(l,h)?d:b:_;case A:return _||b;case F:return ne(l,p)?b:_;case H:case B:case N:return Object(r.isServiceChatTab)(l)?d:!_&&(ne(l,p)?b:d);case x:case R:return Object(r.isServiceChatTab)(l)?d:b;default:return!1}}switch(t){case A:return ne(l,g)?b:_;case F:return ne(l,p)?b:_;case L:return ne(l,p)?ne(l,h)?d:b:_;case N:case x:case H:case B:case R:return ne(l,p)?ne(l,g)?b:_:d}return!1}function ne(e,t){return((e&&e.data&&e.data.flags||0)&t)>0}function re(e,t){return(e&&e.adminIds||[]).indexOf(+t)>-1}function ae(e,t){return e.ownerId===t}function oe(e,t){return-1!==e.invitedByMe.indexOf(t)}},lcT2:function(e,t,n){"use strict";n.r(t),n.d(t,"joinChatBox",(function(){return u}));var r=n("Egk5"),a=n("vT4u"),o=n("rudk"),i=n("P13b"),s=n("4cFO");function u(e,t,n,o){Object(r.cancelEvent)(o);var u={invite_chat_id:t,invite_hash:e},l=Object(s.default)({writeHash:n,longpoll:[],tabs:{},dialog_tabs:{},invitation:u,onJoinChat:c});Object(i.showInvitationBox)(l,u,a.leaveInvitation)}function c(e){if(Object(o.isChatPeer)(e)){var t=Object(i.convertPeerToUrl)(e);nav.go("im?sel="+t)}}},loZk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){return String(t).match(e)}},e.exports=t.default},mscr:function(e,t,n){"use strict";function r(e,t){if(void 0!==e.one&&1===t)return e.one;var n=t%10,r=t%100;return 1===n&&11!==r?e.singularNominative.replace("{{count}}",t):n>=2&&n<=4&&(r<10||r>20)?e.singularGenitive.replace("{{count}}",t):e.pluralGenitive.replace("{{count}}",t)}function a(e){return function(t,n){return n.addSuffix?n.comparison>0?e.future?r(e.future,t):"через "+r(e.regular,t):e.past?r(e.past,t):r(e.regular,t)+" назад":r(e.regular,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return n=n||{},o[e](t,n)};var o={lessThanXSeconds:a({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:a({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:function(e,t){return t.addSuffix?t.comparison>0?"через полминуты":"полминуты назад":"полминуты"},lessThanXMinutes:a({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:a({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:a({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:a({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:a({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXMonths:a({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:a({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:a({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:a({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:a({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:a({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})};e.exports=t.default},"nz/o":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n("mscr")),a=l(n("Q7oV")),o=l(n("hmfN")),i=l(n("rueu")),s=l(n("6ZU5")),u=l(n("G46e")),c=l(n("csxR"));function l(e){return e&&e.__esModule?e:{default:e}}var d={formatDistance:r.default,formatLong:a.default,formatRelative:o.default,localize:i.default,match:s.default,formatters:u.default,formattingTokensRegExp:(0,c.default)(u.default),options:{weekStartsOn:1,firstWeekContainsDate:1}};t.default=d,e.exports=t.default},ofcU:function(e,t,n){"use strict";n.r(t),n.d(t,"createMutations",(function(){return c})),n.d(t,"createModule",(function(){return f})),n.d(t,"destroyModule",(function(){return g}));n("HEwt"),n("a1Th"),n("rE2o"),n("ioFf"),n("rGqo"),n("Btvt"),n("KKXr");function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=new window.Map;function i(e){var t=o.get(e.currentTarget);if(t){var n=t[e.type];if(n)for(var a,i=0;i<n.length;i++){var s=r(n[i],2),u=s[0],c=s[1],l=void 0;if(hasClass(e.target,u)?l=c(e,e.target):(a=gpeByClass(u,e.target,e.currentTarget))&&(l=c(e,a)),!1===l)break}}}var s=n("Egk5"),u=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r};function c(e){return{callMutations:function(){if("function"==typeof e)throw console.trace(),new Error("Mutations are not initialized");return e},bindMutations:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if("function"!=typeof e)throw console.trace(),new Error("Mutations are already initialized");return e=e.apply(void 0,t)}}}function l(e,t,n,r){Object(s.addEvent)(t,n,r),e._registeredHandlers.push({handlerType:"bind",elem:t,types:n,handler:r})}function d(e,t,n,r,a){!function(e,t,n,r){var a=o.get(e);a||(o.set(e,{}),a=o.get(e));for(var s=t.split(" "),u=0;u<s.length;u++){var c=s[u];a[c]||(a[c]=[],addEvent(e,c,i)),a[c].push([n,r])}}(t,n,r,a),e._registeredHandlers.push({handlerType:"delegate",elem:t,types:n,selector:r,handler:a})}function f(e){var t={_registeredHandlers:[]};return e.handlers((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return l.apply(void 0,u([t],e))}),(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return d.apply(void 0,u([t],e))})),t}function g(e){e._registeredHandlers.forEach((function(e){var t,n,r,a,u;"delegate"===e.handlerType?(t=e.elem,n=e.types,r=e.selector,a=e.handler,(u=o.get(t))&&(n.split(" ").forEach(e=>{u[e]&&(u[e]=u[e].filter(e=>e[0]!==r||e[1]!==a),0===u[e].length&&removeEvent(t,e,i))}),0===Object.keys(u).map(e=>u[e].length).reduce((e,t)=>e+t)&&o.delete(t))):Object(s.removeEvent)(e.elem,e.types,e.handler)})),e._registeredHandlers=[]}},pyO7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=l(n("q1tI")),o=(r=n("17x9"))&&r.__esModule?r:{default:r},i=l(n("SslY")),s=n("b/SL"),u=n("u/mt");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return p(this,t),_(this,b(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=new Date,n=this.props,r=n.displayMode,o=n.focusedRange,c=n.drag,l=n.styles,d=n.disabledDates,p=this.props.minDate&&(0,s.startOfDay)(this.props.minDate),m=this.props.maxDate&&(0,s.endOfDay)(this.props.maxDate),_=(0,u.getMonthDisplayRange)(this.props.month,this.props.dateOptions,this.props.fixedHeight),b=this.props.ranges;if("dateRange"===r&&c.status){var v=c.range,y=v.startDate,O=v.endDate;b=b.map((function(e,t){return t!==o[0]?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{startDate:y,endDate:O})}))}var w=this.props.showPreview&&!c.disablePreview;return a.default.createElement("div",{className:l.month,style:this.props.style},this.props.showMonthName?a.default.createElement("div",{className:l.monthName},(0,s.format)(this.props.month,this.props.monthDisplayFormat,this.props.dateOptions)):null,this.props.showWeekDays&&function(e,t,n){var r=new Date;return a.default.createElement("div",{className:e.weekDays},(0,s.eachDayOfInterval)({start:(0,s.startOfWeek)(r,t),end:(0,s.endOfWeek)(r,t)}).map((function(r,o){return a.default.createElement("span",{className:e.weekDay,key:o},(0,s.format)(r,n,t))})))}(l,this.props.dateOptions,this.props.weekdayDisplayFormat),a.default.createElement("div",{className:l.days,onMouseLeave:this.props.onMouseLeave},(0,s.eachDayOfInterval)({start:_.start,end:_.end}).map((function(n,r){var o=(0,s.isSameDay)(n,_.startDateOfMonth),u=(0,s.isSameDay)(n,_.endDateOfMonth),g=p&&(0,s.isBefore)(n,p)||m&&(0,s.isAfter)(n,m),h=d.some((function(e){return(0,s.isSameDay)(e,n)}));return a.default.createElement(i.default,f({},e.props,{ranges:b,day:n,preview:w?e.props.preview:null,isWeekend:(0,s.isWeekend)(n,e.props.dateOptions),isToday:(0,s.isSameDay)(n,t),isStartOfWeek:(0,s.isSameDay)(n,(0,s.startOfWeek)(n,e.props.dateOptions)),isEndOfWeek:(0,s.isSameDay)(n,(0,s.endOfWeek)(n,e.props.dateOptions)),isStartOfMonth:o,isEndOfMonth:u,key:r,disabled:g||h,isPassive:!(0,s.isWithinInterval)(n,{start:_.startDateOfMonth,end:_.endDateOfMonth}),styles:l,onMouseDown:e.props.onDragSelectionStart,onMouseUp:e.props.onDragSelectionEnd,onMouseEnter:e.props.onDragSelectionMove,dragRange:c.range,drag:c.status}))}))))}}])&&m(n.prototype,r),o&&m(n,o),t}(a.PureComponent);y.defaultProps={},y.propTypes={style:o.default.object,styles:o.default.object,month:o.default.object,drag:o.default.object,dateOptions:o.default.object,disabledDates:o.default.array,preview:o.default.shape({startDate:o.default.object,endDate:o.default.object}),showPreview:o.default.bool,displayMode:o.default.oneOf(["dateRange","date"]),minDate:o.default.object,maxDate:o.default.object,ranges:o.default.arrayOf(i.rangeShape),focusedRange:o.default.arrayOf(o.default.number),onDragSelectionStart:o.default.func,onDragSelectionEnd:o.default.func,onDragSelectionMove:o.default.func,onMouseLeave:o.default.func,monthDisplayFormat:o.default.string,weekdayDisplayFormat:o.default.string,dayDisplayFormat:o.default.string,showWeekDays:o.default.bool,showMonthName:o.default.bool,fixedHeight:o.default.bool};var O=y;t.default=O},qJqe:function(e,t,n){"use strict";n.r(t),n.d(t,"EVENT_OPEN_GROUP",(function(){return u})),n.d(t,"EVENT_OPEN_BLOCK",(function(){return c})),n.d(t,"EVENT_HIDE_BLOCK",(function(){return l})),n.d(t,"ACTION_ENTER",(function(){return d})),n.d(t,"ACTION_LEAVE",(function(){return f})),n.d(t,"OPEN_BLOCK_MODE_SUBSCRIBE",(function(){return g})),n.d(t,"OPEN_BLOCK_MODE_FROM_MENU_ITEM",(function(){return h})),n.d(t,"SimilarGroups",(function(){return p}));var r=n("v+DW"),a=n("EasH"),o=n("4+be"),i=n("D1OX"),s=n("7juf"),u="open_group",c="open_group_block",l="hide_group_block",d="enter",f="leave",g="subscribe",h="menu_item";class p{init(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.ownerId=e,this.isEvent=t,this.hash=n,this.block=document.querySelector(".similar_groups_block"),this.block_title=document.querySelector(".similar_groups_block__title"),this.initGalleryBlock(),this.initMenuItem(),this.eventLog=new s.SimilarGroupsEventLog(Math.abs(this.ownerId)),this.issetSimilarGroups()&&isVisible(this.block)&&this.initGallery()}reInit(){this.init(this.ownerId,this.isEvent,this.hash)}initMenuItem(){this.menuItem=document.querySelector(".page_menu_group_similar_recommends"),this.updateMenuItemText()}updateMenuItemText(){null!==this.menuItem&&(isVisible(this.block)?this.menuItem.textContent=Object(o.getLang)("groups_similar_recommends_hide_menu_item"):this.isEvent?this.menuItem.textContent=Object(o.getLang)("groups_similar_events_show_menu_item"):this.menuItem.textContent=Object(o.getLang)("groups_similar_recommends_show_menu_item"))}issetSimilarGroups(){return null!==this.block&&null!==this.menuItem}initGalleryBlock(){this.gallery=document.querySelector(".similar_community_gallery")}initGallery(){null!==this.gallery&&new i.UIGallery(this.gallery)}toggleBlock(){this.issetSimilarGroups()&&(isVisible(this.block)?this.hide():this.show(h))}toggleSubscribeGroup(e,t,n){var r=e.closest(".wall_card"),i=r.dataset.action,s=r.dataset.in_group;if("0"!==r.dataset.group_closed&&"0"!==s&&i!==d)var u=Object(a.showFastBox)({title:Object(o.getLang)("global_warning"),bodyStyle:"padding: 20px; line-height: 160%;"},Object(o.getLang)("groups_group_leave2"),Object(o.getLang)("group_leave_group"),()=>{u.hide(),this._toggleSubscribeGroup(e,t,n)},Object(o.getLang)("global_cancel"));else this._toggleSubscribeGroup(e,t,n);t.preventDefault()}_toggleSubscribeGroup(e,t,n){var i=e.closest(".wall_card"),s=i.dataset.action,u=-i.dataset.group_id,c=s===d?"al_feed.php":"al_fans.php",l={act:s===d?"subscr":"unsub",hash:n,from:"similar_groups"};s===d?l.oid=u:l.id=u,this.eventLog.addLog(s,this.block.dataset.open_mode,i.dataset.index,Math.abs(u),i.dataset.add),ajax.post(c,l,{onDone(t){s===d?(e.classList.add("secondary"),i.dataset.action=f):(e.classList.remove("secondary"),i.dataset.action=d),e.innerHTML=t},onFail(e){if(e)return Object(a.showFastBox)({title:Object(o.getLang)("global_error"),onHide:nav.reload,bodyStyle:"padding: 20px; line-height: 160%;"},e),!0},showProgress:()=>Object(r.lockButton)(e),hideProgress:()=>Object(r.unlockButton)(e)})}show(e){this.issetSimilarGroups()&&(this.block.dataset.open_mode=e,e===h?this.isEvent?this.block_title.textContent=Object(o.getLang)("groups_similar_events_recommendations_title"):this.block_title.textContent=Object(o.getLang)("groups_similar_recommendations_title"):this.block_title.textContent=Object(o.getLang)("groups_similar_recommendations_another_title"),null===this.gallery?ajax.post("al_groups.php",{act:"a_recommends_get",owner_id:this.ownerId,hash:this.hash},{onDone:e=>{this.block.insertAdjacentHTML("beforeend",e),this.showBlock()},onFail(e){if(e)return Object(a.showFastBox)({title:Object(o.getLang)("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},e),!0},showProgress:Page.actionsDropdownLock.pbind(this.menuItem),hideProgress:Page.actionsDropdownUnlock.pbind(this.menuItem)}):this.showBlock())}showBlock(){show(this.block),this.initGalleryBlock(),this.initGallery(),this.updateMenuItemText(),this.eventLog.addLog(c,this.block.dataset.open_mode)}hide(){this.issetSimilarGroups()&&(hide(this.block),this.updateMenuItemText(),this.eventLog.addLog(l,this.block.dataset.open_mode),ajax.post("al_groups.php",{act:"a_recommends_hide",owner_id:this.ownerId,hash:this.hash}))}clickOnGroup(e,t){t.target.closest(".similar_group_subscribe")||this.eventLog.addLog(u,this.block.dataset.open_mode,e.dataset.index,e.dataset.group_id,e.dataset.add)}delRefFromUrl(){nav.objLoc&&"similar_groups_block"===nav.objLoc.from&&(delete nav.objLoc.from,nav.setLoc(nav.objLoc))}}},qxEb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a;n=n||{},a="string"==typeof r[e]?r[e]:1===t?r[e].one:r[e].other.replace("{{count}}",t);if(n.addSuffix)return n.comparison>0?"in "+a:a+" ago";return a};var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};e.exports=t.default},r7nW:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n("i8i4"),o=(n("17x9"),n("ZxpX"));class i extends r.Component{constructor(){super(...arguments),this.getScrollbarWidth=()=>{var e=document.createElement("div");e.classList.add("BaseModal__scrollbarMeasure"),document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},this.hideScrollBar=()=>{var e=document.body.getBoundingClientRect(),t=e.left+e.right<window.innerWidth,n=this.getScrollbarWidth();this.calculatedPadding=window.getComputedStyle(document.body)["padding-right"],t&&(document.body.style.paddingRight=parseFloat(this.calculatedPadding)+n+"px"),document.body.classList.add("BaseModal__bodyHiddenOverflow")},this.showScrollBar=()=>{document.body.style.paddingRight=this.calculatedPadding,document.body.classList.remove("BaseModal__bodyHiddenOverflow")},this.onDocumentKeyDown=e=>{var t=this.props.onClose;"Escape"===e.key&&t()},this.onBackdropClick=()=>{var e=this.props,t=e.onClose;!e.disableBackdropClick&&t()}}componentDidMount(){var e=this.props,t=e.disableEscapeClose,n=e.disableBodyScroll;t||document.body.addEventListener("keydown",this.onDocumentKeyDown),n&&this.hideScrollBar()}componentWillUnmount(){var e=this.props,t=e.disableEscapeClose,n=e.disableBodyScroll;t||document.body.removeEventListener("keydown",this.onDocumentKeyDown),n&&this.showScrollBar()}renderModal(){var e=this.props.className,t=Object(o.classNames)("BaseModal",e);return r.createElement("div",{className:t,"aria-modal":"true"},r.createElement("div",{className:"BaseModal__backdrop",onClick:this.onBackdropClick}),r.createElement("div",{className:"BaseModal__content"},this.props.children))}render(){return a.createPortal(this.renderModal(),document.body)}}i.defaultProps={className:"",children:null,disableBackdropClick:!1,disableEscapeClose:!1,disableBodyScroll:!1},t.default=i},rHUl:function(e,t,n){"use strict";n.r(t),n.d(t,"getFirstUnread",(function(){return d})),n.d(t,"isSearchShown",(function(){return f})),n.d(t,"getPeer",(function(){return g})),n.d(t,"getCurrentKeyboard",(function(){return h})),n.d(t,"getKeyboard",(function(){return p})),n.d(t,"getTab",(function(){return m})),n.d(t,"getCurrentTab",(function(){return _})),n.d(t,"getSelectedMessages",(function(){return b})),n.d(t,"getMessageRangeFromSelection",(function(){return v})),n.d(t,"countUnread",(function(){return y})),n.d(t,"getMessageByRid",(function(){return O})),n.d(t,"isRidExist",(function(){return w})),n.d(t,"getLocalId",(function(){return T})),n.d(t,"getLastMessage",(function(){return j})),n.d(t,"parserMessage",(function(){return E})),n.d(t,"getAuthorFullName",(function(){return D})),n.d(t,"getMessage",(function(){return C})),n.d(t,"getPreviousMessage",(function(){return S})),n.d(t,"isClassicInterface",(function(){return M})),n.d(t,"isLocksAvailable",(function(){return k})),n.d(t,"isFoldersAvailable",(function(){return I})),n.d(t,"isCommunityInterface",(function(){return P})),n.d(t,"isChannelPeer",(function(){return L})),n.d(t,"getBareTab",(function(){return A})),n.d(t,"isReversedDialogs",(function(){return N})),n.d(t,"isFullyLoadedTab",(function(){return x})),n.d(t,"makeTabNotFullyLoaded",(function(){return R})),n.d(t,"isGoToEndVisible",(function(){return F})),n.d(t,"isGoToMentionVisible",(function(){return H})),n.d(t,"getUnreadScrollBottom",(function(){return B})),n.d(t,"isSendingAvailable",(function(){return Y})),n.d(t,"isCommunityPeer",(function(){return G})),n.d(t,"isCommunityBlocked",(function(){return U})),n.d(t,"checkVoiceMessageAvailable",(function(){return q})),n.d(t,"isSearching",(function(){return W})),n.d(t,"getSearchText",(function(){return z})),n.d(t,"isSearchingValue",(function(){return V})),n.d(t,"isRecentSearchesActive",(function(){return $})),n.d(t,"getPinnedMessage",(function(){return K})),n.d(t,"doPopularSuggExist",(function(){return X})),n.d(t,"isAnyMessageBeingEdited",(function(){return Q})),n.d(t,"getGroupId",(function(){return Z})),n.d(t,"getTabDraft",(function(){return J})),n.d(t,"getTemplates",(function(){return ee})),n.d(t,"tabIsMessageRequest",(function(){return te})),n.d(t,"tabIsMessageRequestToChat",(function(){return ne})),n.d(t,"removeMessageRequestFolderFlags",(function(){return re})),n.d(t,"isMessageRequestFolder",(function(){return ae})),n.d(t,"tabIsOutgoingMessageRequest",(function(){return oe})),n.d(t,"existsIncomingMessageRequest",(function(){return ie})),n.d(t,"isMessageRequestChangedEvent",(function(){return se})),n.d(t,"isCommunityChat",(function(){return ue})),n.d(t,"isCommunityChatDeleted",(function(){return ce})),n.d(t,"isClosedChat",(function(){return le})),n.d(t,"isCasperChat",(function(){return de})),n.d(t,"isServiceChatTab",(function(){return fe})),n.d(t,"isCasperChatTab",(function(){return ge})),n.d(t,"isChatActive",(function(){return he})),n.d(t,"isTabMarkedUnread",(function(){return pe}));n("Vd3H"),n("rGqo"),n("Btvt");var r=n("MhhX"),a=n("f01n"),o=n("h++7"),i=n("86+7"),s=n("rjmT"),u=n("aong"),c=n("lJdi"),l=n("rudk");function d(e,t){var n=Object(u.unpackStore)(e),a=n.tabs[n.peer];return Object.keys(a.msgs).filter(n=>{var o=C(e,t,n);return!Object(r.isOut)(o)&&intval(n)>a.in_up_to})[0]}function f(e){return Object(u.unpackStore)(e).searchShown}function g(e){return Object(u.unpackStore)(e).peer}function h(e){return p(e,g(e))}function p(e,t){var n=(m(e,t)||{}).keyboard;if(!n||!n.buttons||n.buttons.length)return n}function m(e,t){var n=Object(u.unpackStore)(e);return n.tabs&&n.tabs[t]}function _(e){var t=Object(u.unpackStore)(e);return t.peer?t.tabs[t.peer]:null}function b(e){return Object(u.unpackStore)(e).selectedMessages}function v(e,t,n){var a=m(e,t),o=b(e)[0];if(void 0===o)return[n];var i=Math.min(n,o),s=Math.max(n,o);return Object.keys(a.msgs).filter(e=>e>=i&&e<=s).filter(t=>{var n=C(e,e.get().peer,t);return!Object(r.isServiceMsg)(n)&&!Object(r.isCallMessage)(n)}).map(intval)}function y(e,t){var n=m(Object(u.unpackStore)(t),e),a=0;for(var o in n.msgs)if(n.msgs.hasOwnProperty(o)){var i=C(t,e,o);Object(r.isOut)(i)||(a+=Object(r.isUnread)(n,i)?1:0)}return a}function O(e,t,n){var r=m(e,t);return Object.keys(r.msgs).filter(r=>intval(C(e,t,r).randomId)===n).length>0}function w(e,t,n){return!!O(e,t,n)}function T(e,t){var n=Object(u.unpackStore)(e),r=n.msg_local_ids_sort&&n.msg_local_ids_sort[t];return void 0!==r?2e9+r:t}function j(e,t,n){var r=m(e,t),o=C(e,t,n),i=Object.keys(r.msgs).filter(n=>{var r=C(e,t,n),i=r.local&&r.type!==a.EDIT_MESSAGE;return!(!o.local&&i)&&(!(!o.local||i)||T(e,o.messageId)>T(e,r.messageId))}).pop();return i?C(e,t,i):null}function E(e){return e&&e.length>0?a.addMessageEvent([0].concat(e)):e}function D(e,t,n){var a=m(e,t),o=C(e,t,n),s=Object(u.unpackStore)(e);return Object(r.isOut)(o)?Object(i.oCacheGet)(e,s.id).name:o.userId!==o.peerId?!!Object(i.oCacheExists)(e,o.userId)&&Object(i.oCacheGet)(e,o.userId).name:a.tab}function C(e,t,n){var r=m(e,t),a=r&&r.msgs&&r.msgs[n];return a?E(a):null}function S(e,t,n){var r=m(e,t),a=r&&r.msgs&&Object.keys(r.msgs).sort((e,t)=>+e-t);if(!a)return null;var o=a&&a.indexOf(""+n),i=o>-1?a[o-1]:null;return r.msgs[i]}function M(e){var t=Object(u.unpackStore)(e);return t.gid||t.isClassic}function k(e){return Object(u.unpackStore)(e).gid}function I(e){return Object(u.unpackStore)(e).gid}function P(e){return!!Object(u.unpackStore)(e).gid}function L(e){return!!(e.peerId>2e9&&Object(c.doesChatTabHaveFlag)(e,1024))}function A(e,t){var n=Object(u.unpackStore)(t);return n.tabs[e]||n.mapped_index[e]}function N(e){var t=Object(u.unpackStore)(e);return!!P(e)&&((19542789===t.gid||103416369==t.gid)&&(t.active_tab===o.FOLDER_UNRESPOND||t.active_tab===o.FOLDER_UNREAD))}function x(e,t){var n=(e=Object(u.unpackStore)(e)).tabs;return!(!n||!n[t]||void 0===n[t].history||!n[t].msgs)}function R(e,t){var n=m(e,t);n&&(n.msgs=void 0,n.msgid=void 0,n.scrollTop=void 0,n.scrollBottom=void 0,n.contHeight=void 0,n.offset=void 0,n.skipped=void 0)}function F(e){var t=e.get().go_to_end_visible;return!!t&&t[0]}function H(e){var t=e.get().go_to_mentions_visible;return!!t&&t[0]}function B(e){var t=e.get().go_to_end_visible;return t?t[1]:0}function Y(e){return!Object(u.unpackStore)(e).lockedSending}function G(e){return e>-2e9&&e<0}function U(e,t){return!!G(t)&&!!m(e,t).blocked_community}function q(e){return Object(u.unpackStore)(e).voice_message_available}function W(e){var t=Object(u.unpackStore)(e);return!(!z(t)&&!t.recentSearch)}function z(e){return Object(u.unpackStore)(e).searchText}function V(e,t){var n=Object(u.unpackStore)(e);return!!(t&&t!==z(e)||n.recentSearch)}function $(e){return Object(u.unpackStore)(e).recentSearch}function K(e){var t=_(e);return t&&t.pinned&&E(t.pinned)}function X(e){var t=e.get().popular_sugg;return t&&t.length>0}function Q(e){return 1==Object(u.unpackStore)(e).isEditing}function Z(e){return Object(u.unpackStore)(e).gid}function J(e){return e.draft||(e.draft=Object(s.loadDraftForPeer)(cur.imDb,e.peerId)),e.draft}function ee(e){return(Object(u.unpackStore)(e).templates||[]).filter(e=>!e.deleted)}function te(e){return!!e&&Boolean(e.is_message_request||e.folders&o.FOLDER_MASKS[o.FOLDER_MESSAGE_REQUEST]||e.folders&o.FOLDER_MASKS[o.FOLDER_MESSAGE_REQUEST_REJECTED])}function ne(e){return Object(l.isChatPeer)(e.peerId)&&te(e)}function re(e){return e&~o.FOLDER_MASKS[o.FOLDER_MESSAGE_REQUEST]&~o.FOLDER_MASKS[o.FOLDER_MESSAGE_REQUEST_REJECTED]}function ae(e){return Object(u.unpackStore)(e).active_tab===o.FOLDER_MESSAGE_REQUEST}function oe(e){return e.peerId>19e8&&e.peerId<2e9}function ie(e){return!!Object(u.unpackStore)(e).dialog_tab_cts[o.FOLDER_MESSAGE_REQUEST]}function se(e){var t=e.type,n=e.updateType;return t===a.CONVERSATION_UPDATED&&(n===a.MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED||n===a.MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED)}function ue(e,t){return Object(c.doesChatTabHaveFlag)(m(e,t),c.MAIL_CHAT_FLAG_IS_COMMUNITY_CHAT)}function ce(e,t){return Object(c.doesChatTabHaveFlag)(m(e,t),c.MAIL_CHAT_FLAG_IS_COMMUNITY_CHAT_DELETED)}function le(e,t){return Object(c.doesChatTabHaveFlag)(m(e,t),c.MAIL_CHAT_FLAG_DENY_ANYONE_TO_WRITE)}function de(e,t){return Object(c.doesChatTabHaveFlag)(m(e,t),c.MAIL_CHAT_FLAG_IS_CASPER)}function fe(e){return Object(c.doesChatTabHaveFlag)(e,c.MAIL_CHAT_FLAG_SERVICE_CHAT)}function ge(e){return Object(c.doesChatTabHaveFlag)(e,c.MAIL_CHAT_FLAG_IS_CASPER)}function he(e){return!e.data.closed&&!e.data.kicked}function pe(e){return!!(e.folders&o.FOLDER_MASKS[o.FOLDER_MARKED_UNREAD])}},rjmT:function(e,t,n){"use strict";n.r(t),n.d(t,"ImDraft",(function(){return u})),n.d(t,"loadDraftForPeer",(function(){return l}));n("HEwt"),n("a1Th"),n("rGqo"),n("rE2o"),n("ioFf"),n("KKXr"),n("VRzm"),n("Btvt"),n("OEbY"),n("pIFo");var r=n("BxOC"),a=n("f01n"),o=n("vT4u");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){this._db=e,this._key=t,this.dData={txt:"",attaches:[],urlBinds:[],cancelled:[]},this.load()}function c(e){switch(e.type){case"mail":case"reply":return e.id<0&&1==e.object.fwd_count;default:return!e.object}}function l(e,t){return new u(e,"draft_"+t)}u.prototype.dump=function(){var e;this._key&&this._db.updateByKey(this._key,{txt:(e=this.dData).txt,attaches:e.attaches.length?e.attaches:void 0,urlBinds:e.urlBinds.length?e.urlBinds:void 0,cancelled:e.cancelled.length?e.cancelled:void 0})},u.prototype.load=function(){if(this._key){var e=this._db.selectByKey(this._key);e&&(this.dData=function(e){return{txt:e.txt,attaches:e.attaches||[],urlBinds:e.urlBinds||[],cancelled:e.cancelled||[]}}(e))}},u.prototype.clear=function(){this.dData={txt:"",attaches:[],urlBinds:[],cancelled:[]},this.dump()},u.prototype.setText=function(e){this.dData.txt=trim(e),this.dump()},u.prototype.addAttach=function(e,t,n){if(("share"===e&&this.removeAttachByType(e),"mail"!==e&&"reply"!==e||(this.removeAttachByType("mail"),this.removeAttachByType("reply")),"audio_playlist"===e||"artist"===e)&&this.dData.attaches.find(t=>t.type===e))return!1;if(!e||!t&&"poll"!==e)return!1;var r=this.dData.attaches.findIndex(n=>n.type===e&&n.id===t);-1===r?(this.dData.attaches.push({type:e,id:t,object:n}),this.dump()):"video"!==e&&"poll"!==e||(this.dData.attaches[r]={type:e,id:t,object:n},this.dump())},u.prototype.syncWithSelector=function(e){var t=this.getFwdRaw();this.dData.attaches=(t?[t]:[]).concat(e.getMedias().map(e=>{var t=i(e,2),n=t[0],r=t[1];return this.dData.attaches.find(e=>e.type==n&&e.id==r)||{type:n,id:r}})),this.dump()},u.prototype.removeAttachByType=function(e){for(var t=this.dData.attaches.length;t--;)this.dData.attaches[t].type===e&&this.dData.attaches.splice(t,1);this.dump()},u.prototype.removeAllAttaches=function(){this.dData.attaches=[],this.dData.cancelled=[],this.dump()},u.prototype.addBindUrl=function(e,t,n){this.getBoundAttach(e)||(this.dData.urlBinds.push({url:e,type:t,id:n}),this.dump())},u.prototype.getBoundAttach=function(e){var t=this.dData.urlBinds.find(t=>t.url===e);return t&&this.dData.attaches.find(e=>e.type===t.type&&e.id===t.id)||null},u.prototype.getShareUrl=function(){var e=this.dData.attaches.find(e=>"share"===e.type);if(e&&e.object)return e.object.url.replace(/&amp;/g,"&")},u.prototype.hasOnlyReplies=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?e.flags&a.FLAG_HAS_REPLY&&!this.dData.attaches.find(e=>"mail"!==e.type):this.hasAttaches()&&!this.dData.attaches.find(e=>"reply"!==e.type)},u.prototype.getCancelledShares=function(){return this.dData.cancelled.length?this.dData.cancelled:void 0},u.prototype.hasAttaches=function(){return this.dData.attaches.length>0},u.prototype.destroy=function(){this.dData={},this._key=this._db=null},u.prototype.prepareObjects=function(e,t){return this.dData.attaches.find(c)?Object(r.post)(o.CONTROLLER,{act:"draft_medias",gid:e,messageId:t||0,media:t?void 0:this.dData.attaches.map(e=>[e.type,e.id]).join("*")}).then(e=>{var t=i(e,1)[0];this.dData.attaches=t.map(e=>({type:e[0],id:e[1],object:e[2]}))}):Promise.resolve()},u.prototype.getFwdRaw=function(){return this.dData.attaches.find(e=>"mail"===e.type||"reply"===e.type)},u.prototype.getFwdCount=function(){var e=this.getFwdRaw();return e?e.id<0?e.object.fwd_count:e.id.split(";").length:0}},rudk:function(e,t,n){"use strict";n.r(t),n.d(t,"parseFwd",(function(){return i})),n.d(t,"convertKludgesToAttaches",(function(){return s})),n.d(t,"isReservedPeer",(function(){return u})),n.d(t,"isUserPeer",(function(){return c})),n.d(t,"isChatPeer",(function(){return l})),n.d(t,"convertAttachesToPhpMedia",(function(){return d}));var r=n("jE6c");function a(e,t){void 0===t&&(t=[]);var n=e.split("_");return[n[0],n[1],t]}var o={};function i(e){if(o[e])return o[e];for(var t=e?e.length:0,n=[],r=[],i="",s=0;s<t;s++){var u=e[s],c=u.charCodeAt(0);c>=48&&c<=57||"_"===u||"-"===u?i+=u:"("!==u&&")"!==u&&":"!==u&&","!==u||(""!==i&&(r.push(i),n.push("id"),i=""),r.push(u),n.push(u))}i.length>0&&(r.push(i),n.push("id"));var l=function e(t,n,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),o>50)return[[],t.length];for(var i=[],s="";r<t.length;){var u=t[r];if("id"===u)s=n[r];else if(","===u&&s)i.push(a(s)),s="";else if("("===u){var c=e(t,n,r+1,o+1),l=c[0];r=c[1],i.push(a(s,l)),s=""}else if(")"===u)return""!==s&&i.push(a(s)),[i,r];r++}return s&&i.push(a(s)),[i,r]}(n,r)[0];return Object.keys(o).length>300&&(o={}),o[e]=l,l}function s(e,t){var n=[];e.fwd_count?n.push({type:"mail",id:-t,object:{fwd_count:e.fwd_count}}):e.fwd&&n.push({type:"mail",id:-t,object:{fwd_count:i(e.fwd).length}});for(var a=1;e["attach"+a+"_type"];++a)"call"===e["attach"+a+"_type"]?n.push({type:e["attach"+a+"_type"],id:e["attach"+a],initiatorId:Object(r.intval)(e["attach"+a+"_call_initiator_id"]),state:e["attach"+a+"_call_state"],duration:Object(r.intval)(e["attach"+a+"_call_duration"]),receiverId:Object(r.intval)(e["attach"+a+"_call_receiver_id"])}):n.push({type:e["attach"+a+"_type"],id:e["attach"+a],kind:e["attach"+a+"_kind"],productId:e["attach"+a+"_product_id"]});return e.geo&&n.push({type:"geo",id:e.geo}),n}function u(e){return 0==e}function c(e){return e>0&&e<2e9}function l(e){return e>2e9}function d(e){return e.map((function(e){var t="audiomsg"===e[2]?"audio_message":e[2];return e[0]+":"+e[1]+":"+t})).join(",")}},rueu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("rwOc")),a=o(n("2cCT"));function o(e){return e&&e.__esModule?e:{default:e}}var i={narrow:["вс","пн","вт","ср","чт","пт","сб"],short:["вск","пнд","втр","срд","чтв","птн","суб"],long:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},s={short:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],long:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},u={long:["ночи","утра","дня","вечера"]};var c={ordinalNumber:function(e,t){var n=String((t||{}).unit);return e+("dayOfMonth"===n?"-е":"isoWeek"===n||"week"===n?"-я":"-й")},weekday:(0,r.default)(i,"long"),weekdays:(0,a.default)(i,"long"),month:(0,r.default)(s,"long"),months:(0,a.default)(s,"long"),timeOfDay:(0,r.default)(u,"long",(function(e){return e>=17?3:e>=12?2:e>=4?1:0})),timesOfDay:(0,a.default)(u,"long")};t.default=c,e.exports=t.default},rwOc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return function(r,a){var o=a||{},i=o.type?String(o.type):t;return(e[i]||e[t])[n?n(Number(r)):Number(r)]}},e.exports=t.default},sCib:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n,r){var a=r||{},o=a.type?String(a.type):t,i=e[o]||e[t];return String(n).match(i)}},e.exports=t.default},sNPj:function(e,t,n){"use strict";n.r(t),n.d(t,"DATE_PICKER_MODE_DAY",(function(){return R})),n.d(t,"DATE_PICKER_MODE_MONTH",(function(){return F})),n.d(t,"DATEPICKER_MODE_ALL",(function(){return H}));n("HEwt"),n("a1Th"),n("rE2o"),n("ioFf"),n("hhXQ"),n("91GP"),n("rGqo"),n("Btvt"),n("/8Fb");var r=n("q1tI"),a=n("UXbF"),o=(n("17x9"),n("KKXr"),n("b/SL")),i=n("6krn");class s extends r.Component{constructor(e){super(e),this.state={focus:{end:!1,start:!1}};var t=this.props.range;this.state.start=Object(o.format)(t.startDate,"DD.MM.YYYY"),this.state.end=Object(o.format)(t.endDate,"DD.MM.YYYY"),this.pattern=/^(?:\d{2}|[1-9])\.(?:\d{2}|[1-9])\.(?:[12]\d{3})$/,this.changeInputs=this.changeInputs.bind(this),this.changeRange=this.changeRange.bind(this),this.handleChangeRangeUsed=this.handleChangeRangeUsed.bind(this),this.enter=this.enter.bind(this),this.blur=this.blur.bind(this),this.focus=this.focus.bind(this)}componentDidUpdate(e,t){if(e.range.startDate===this.props.range.startDate&&e.range.endDate===this.props.range.endDate)return!1;var n=this.props.range;this.setState({start:Object(o.format)(n.startDate,"DD.MM.YYYY")}),this.setState({end:Object(o.format)(n.endDate,"DD.MM.YYYY")})}changeInputs(e,t){this.setState({[t]:e.target.value})}handleChangeRangeUsed(e){var t=this.props,n=t.rangeKey;(0,t.handleChangeRange)({[n]:e})}changeRange(e,t){if(!this.pattern.test(t))return!1;var n=t.split("."),r=new Date(n[2],n[1]-1,n[0]),a=this.props,o=a.minDate,i=a.maxDate,s=a.range,u=s.startDate,c=s.endDate;return"start"===e?o&&r<o?c&&r>c?(this.handleChangeRangeUsed({startDate:o,endDate:o}),!1):(this.handleChangeRangeUsed({startDate:o}),!1):r>c?(this.handleChangeRangeUsed({startDate:r,endDate:r}),!1):(this.handleChangeRangeUsed({startDate:r}),!1):i&&r>i?r<u?(this.handleChangeRangeUsed({endDate:i,startDate:i}),!1):(this.handleChangeRangeUsed({endDate:i}),!1):r<u?(this.handleChangeRangeUsed({endDate:r,startDate:r}),!1):(this.handleChangeRangeUsed({endDate:r}),!1)}focus(e){this.setState({focus:{[e]:!0}})}blur(e,t){this.setState({focus:{[t]:!1}}),this.changeRange(t,e.target.value)}enter(e,t){if(13!==e.charCode)return!1;this.changeRange(t,e.target.value)}render(){var e=this.state,t=e.start,n=e.end,a=e.focus,o=[!(a.start||a.end)&&this.props.focusedRange[1],!(a.start||a.end||this.props.focusedRange[1])];return r.createElement("div",{className:"Inputs"},r.createElement("span",{className:"Inputs__label"},Object(i.getLang)("ads_react_date_picker_range")),r.createElement("input",{value:t,onChange:e=>this.changeInputs(e,"start"),onKeyPress:e=>this.enter(e,"start"),onFocus:e=>this.focus("start",e),onBlur:e=>this.blur(e,"start"),className:"Inputs__input"+(o[0]?" Inputs__input--focused":"")}),r.createElement("span",{className:"Inputs__delimiter"}),r.createElement("input",{value:n,onChange:e=>this.changeInputs(e,"end"),onKeyPress:e=>this.enter(e,"end"),onFocus:e=>this.focus("end",e),onBlur:e=>this.blur(e,"end"),className:"Inputs__input"+(o[1]?" Inputs__input--focused":"")}))}}var u=s,c=function(e){var t=(new Date).getFullYear(),n=t-e.lastYear,a=n<6?7:n+2,o=Array.from({length:a},(e,t)=>t).map(a=>r.createElement("button",{key:a,onClick:e.goto.bind(null,t-a,"setYear"),disabled:a>n},t-a));return r.createElement("div",null,o.reverse())},l=n("1BVb"),d=n("BN/X"),f=e=>r.createElement(l.default,{className:"DatePicker ModeChanger",position:"b",align:"right",marginLeft:25,data:[{text:Object(i.getLang)("ads_react_date_picker_mode_by_day"),onClick:t=>{t.preventDefault(),e.onChange(R)}},{text:Object(i.getLang)("ads_react_date_picker_mode_by_month"),onClick:t=>{t.preventDefault(),e.onChange(F)}}]},r.createElement(d.default,{className:"ModeChanger__opener",href:"#",onClick:e=>e.preventDefault()},e.mode===R?Object(i.getLang)("ads_react_date_picker_mode_by_day"):Object(i.getLang)("ads_react_date_picker_mode_by_month"))),g=n("sUtH"),h=e=>{var t=e.data,n=void 0===t?{}:t,a=e.changeShownDate,o=e.mode,s=e.handleChangeMode,l=e.showModeChanger,d=n.ranges,h=void 0===d?[]:d,p=n.focusedRange,m=void 0===p?[0,0]:p;return o===F?r.createElement("div",{className:"DatePicker__panel"},r.createElement("div",null,h.map(e=>r.createElement("div",{className:"DatePicker__panel-range",key:e.key},r.createElement("span",{className:"Inputs__label"},Object(i.getLang)("ads_react_date_picker_range")),r.createElement("span",null,Object(g.getMonthStrRange)(e))))),l&&r.createElement(f,{mode:o,onChange:s})):r.createElement("div",{className:"DatePicker__panel"},r.createElement("button",{type:"button",onClick:()=>a(-1,"monthOffset"),className:"Panel__arrow--minus"}),h.map(t=>r.createElement(u,{range:t,handleChangeRange:e.handleChangeRange,rangeKey:t.key,key:t.key,focusedRange:m,maxDate:e.maxDate,minDate:e.minDate})),r.createElement("button",{type:"button",onClick:()=>a(1,"monthOffset"),className:"Panel__arrow--plus"}),e.lastYear?r.createElement(c,{goto:a,lastYear:e.lastYear}):null,l&&r.createElement(f,{mode:o,onChange:s}))},p=n("Ht+d"),m=function(e){var t=e.onClose,n=e.onDone,a=e.ranges,o=e.onDoneDisabled,s=t?r.createElement(p.default,{appearance:"secondary",onClick:t},e.closeText||Object(i.getLang)("global_cancel")):null,u=n?r.createElement(p.default,{appearance:"primary",onClick:()=>n(a[Object.keys(a)[0]]),disabled:o},Object(i.getLang)("Save")):null;return r.createElement("div",{className:"DatePicker__footer"},s,u)};m.defaultProps={onDoneDisabled:!1};var _=m,b=(e,t)=>Object(o.format)(e,"DD.MM.YYYY")===Object(o.format)(t,"DD.MM.YYYY"),v=(e,t)=>{var n=t.minDate,r=t.maxDate,a=e.startDate,o=e.endDate;return{startDate:n?new Date(Math.max(n,a)):a,endDate:r?new Date(Math.min(r,o)):o}};class y extends r.Component{constructor(e){super(e),this.checkPeriod=e=>{var t=this.props,n=t.maxDate,r=t.minDate;if(!this.props.staticRanges[e])return!1;var a=this.getRangeByKey(e);if(!a)return!1;var o,i,s,u,c=a.range(),l=this.props.ranges[0];return o=l,s=v(c,i={maxDate:n,minDate:r}),u=v(o,i),!(!b(s.startDate,u.startDate)||!b(s.endDate,u.endDate))&&(this.setState({selectedStaticRange:e},()=>{cur.DatePicker.StaticRanges.selectedStaticRange=e}),!0)},this.getRangeByKey=e=>this.props.staticRanges.find(t=>t.key===e),cur.DatePicker=cur.DatePicker||{},cur.DatePicker.StaticRanges=cur.DatePicker.StaticRanges||{},this.state={selectedStaticRange:cur.DatePicker.StaticRanges.selectedStaticRange||void 0}}componentDidMount(){if(cur.DatePicker.StaticRanges.selectedStaticRange){var e=cur.DatePicker.StaticRanges.selectedStaticRange;if(this.checkPeriod(e))return!1}this.props.staticRanges.forEach(e=>{if(this.checkPeriod(e.key))return!1})}componentDidUpdate(e,t){if(e.ranges[0].startDate===this.props.ranges[0].startDate&&e.ranges[0].endDate===this.props.ranges[0].endDate)return!1;if(t.selectedStaticRange){var n=t.selectedStaticRange;if(this.checkPeriod(n))return!1}var r;Object.keys(this.props.staticRanges).forEach(e=>{r=r||this.checkPeriod(e)}),r||this.setState({selectedStaticRange:void 0},()=>{cur.DatePicker.StaticRanges.selectedStaticRange=void 0})}handleChangeRange(e){var t=this.props,n=t.handleChangeRange,r=t.rangeKey,a=t.maxDate,o=t.minDate,i=t.onDone,s=this.getRangeByKey(e).range(),u=s.startDate,c=s.endDate,l={startDate:o?new Date(Math.max(o,u)):u,endDate:a?new Date(Math.min(a,c)):c};this.setState({selectedStaticRange:e},()=>{n({[r]:l}),i(l),cur.DatePicker.StaticRanges.selectedStaticRange=e})}render(){var e=this.props.staticRanges.map(e=>{var t=e.key,n=this.getRangeByKey(t).label;return r.createElement("li",{key:t,className:"StaticRanges__item"},r.createElement("input",{type:"radio",onChange:()=>this.handleChangeRange(t),id:t,name:"StaticRanges",className:"StaticRanges__radio",value:t,checked:this.state.selectedStaticRange===t}),r.createElement("label",{htmlFor:t,className:"StaticRanges__label"},n))});return r.createElement("ul",{className:"StaticRanges"},e)}}var O=y,w=n("nz/o");function T(){var e=w,t=[Object(i.getLang)("Month1"),Object(i.getLang)("Month2"),Object(i.getLang)("Month3"),Object(i.getLang)("Month4"),Object(i.getLang)("Month5"),Object(i.getLang)("Month6"),Object(i.getLang)("Month7"),Object(i.getLang)("Month8"),Object(i.getLang)("Month9"),Object(i.getLang)("Month10"),Object(i.getLang)("Month11"),Object(i.getLang)("Month12")];e.localize.months=()=>t,e.localize.month=e=>t[e],e.options.weekStartsOn=1;var n=[Object(i.getLang)("global_sunday_short"),Object(i.getLang)("global_monday_short"),Object(i.getLang)("global_tuesday_short"),Object(i.getLang)("global_wednesday_short"),Object(i.getLang)("global_thursday_short"),Object(i.getLang)("global_friday_short"),Object(i.getLang)("global_saturday_short")];return e.localize.weekdays=()=>n,e.localize.weekday=e=>n[e],e}var j=n("ZxpX");class E extends r.Component{render(){var e=this.props,t=e.label,n=e.isSelected,a=e.isDisabled,o=e.isCurrent,i=e.isActive,s=Object(j.classNames)(this.props.className,{MonthCell:!0,"MonthCell--disabled":a,"MonthCell--selected":n,"MonthCell--active":i,"MonthCell--current":o});return r.createElement("div",{onClick:()=>this.props.onMonthClick(this.props.value),onMouseEnter:()=>this.props.onMonthHover(this.props.value),onTouchMove:()=>this.props.onMonthHover(this.props.value),className:s},t)}}var D=E;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}E.defaultProps={isSelected:!1,isDisabled:!1,isActive:!1,isCurrent:!1};class S extends r.Component{constructor(e){super(e),this.onMonthClick=e=>{var t=this.props,n=t.selection,r=t.onSelectionChange,a=t.minDate,i=t.maxDate,s=t.year;if(!this.isMonthDisabled(e)&&((!n||!n.start||n&&n.start&&n.end)&&r({start:Object(o.max)([a,Object(o.startOfMonth)(new Date(s,e))]),end:null}),n&&n.start&&!n.end)){var u=n.start,c=Object(o.endOfMonth)(new Date(s,e)),l=Object(o.isBefore)(c,u);r({start:l?Object(o.max)([a,Object(o.startOfMonth)(c)]):u,end:l?Object(o.min)([i,Object(o.endOfMonth)(u)]):Object(o.min)([i,c])})}},this.onMonthHover=e=>{this.isMonthDisabled(e)||this.setState({hoveredMonth:e})},this.clearHoveredMonth=()=>{this.setState({hoveredMonth:null})},this.state={hoveredMonth:null}}getMonthProps(e){var t=Object(o.startOfMonth)(new Date(this.props.year,e)),n=Object(o.endOfMonth)(t),r=this.props,a=r.minDate,i=r.maxDate,s=r.selection,u=r.locale,c=r.year,l=s.start&&s.end,d={label:Object(o.format)(t,"MMM",{locale:u}),value:e,isDisabled:Object(o.isBefore)(n,a)||Object(o.isAfter)(t,i),isCurrent:Object(o.isSameMonth)(new Date,t),isSelected:!1,isActive:s&&(Object(o.isSameMonth)(s.start,t)||Object(o.isSameMonth)(s.end,t)||l&&Object(o.isWithinInterval)(t,s)||l&&Object(o.isWithinInterval)(n,s))};if(null!==this.state.hoveredMonth&&s.start&&!s.end){var f=Object(o.startOfMonth)(new Date(c,this.state.hoveredMonth)),g=Object(o.endOfMonth)(f),h={start:Object(o.min)([f,s.start]),end:Object(o.max)([g,s.start])};d.isSelected=Object(o.isWithinInterval)(t,h)||Object(o.isWithinInterval)(n,h)}return d}isMonthDisabled(e){var t=Object(o.startOfMonth)(new Date(this.props.year,e)),n=Object(o.endOfMonth)(t),r=this.props,a=r.minDate,i=r.maxDate;return Object(o.isBefore)(n,a)||Object(o.isAfter)(t,i)}render(){return r.createElement("div",{className:"MonthGrid",onMouseLeave:this.clearHoveredMonth},new Array(12).fill(0).map((e,t)=>r.createElement(D,C({onMonthClick:this.onMonthClick,onMonthHover:this.onMonthHover,key:t},this.getMonthProps(t)))))}}var M=S;S.defaultprops={minDate:new Date,maxDate:new Date,selection:{start:null,end:null},onSelectionChange:()=>{}};class k extends r.Component{render(){var e=this.props,t=e.label,n=e.year,a=e.onYearChange,o=e.minDate,i=e.maxDate,s=Object(j.classNames)(this.props.className,{MonthYear:!0}),u=n-1,c=n+1,l=u<o.getFullYear(),d=Object(j.classNames)({MonthYear__button:!0,"MonthYear__button--prev":!0,"MonthYear__button--disabled":l}),f=c>i.getFullYear(),g=Object(j.classNames)({MonthYear__button:!0,"MonthYear__button--next":!0,"MonthYear__button--disabled":f});return r.createElement("div",{className:s},r.createElement("button",{className:d,disabled:l,onClick:()=>a(u)}),r.createElement("div",{className:"MonthYear__label"},t),r.createElement("button",{disabled:f,className:g,onClick:()=>a(c)}))}}var I=k;k.defaultProps={onYearChange:()=>{},minDate:new Date,maxDate:new Date};class P extends r.Component{constructor(){super(...arguments),this.state={year:this.props.ranges&&this.props.ranges[0].endDate.getFullYear()||(new Date).getFullYear(),selection:{start:this.props.ranges&&this.props.ranges[0].startDate||null,end:this.props.ranges&&this.props.ranges[0].endDate||null}},this.handleChangeSelection=e=>{this.setState({selection:e},()=>{this.state.selection.start&&this.state.selection.end&&this.props.onChange({range1:{startDate:this.state.selection.start,endDate:this.state.selection.end,key:"range1"}}),this.state.selection.start&&!this.state.selection.end&&this.props.onChange({range1:{startDate:this.state.selection.start,endDate:Object(o.min)([this.props.maxDate,Object(o.endOfMonth)(this.state.selection.start)]),key:"range1"}})})},this.handleYearChange=e=>{this.setState({year:e})}}render(){var e=this.props,t=e.locale,n=e.minDate,a=e.maxDate;return r.createElement("div",{className:"MonthRange"},r.createElement(I,{year:this.state.year,label:this.state.year+"",minDate:n,maxDate:a,onYearChange:this.handleYearChange}),r.createElement(M,{year:this.state.year,locale:t,selection:this.state.selection,minDate:n,maxDate:a,onSelectionChange:this.handleChangeSelection}))}}var L=P;function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R="DATE_PICKER_MODE_DAY",F="DATE_PICKER_MODE_MONTH",H="DATEPICKER_MODE_ALL",B=a.DateRange;class Y extends r.Component{constructor(e){super(e),this.handleChangeRange=e=>{var t={};Object.entries(e).forEach(e=>{var n=N(e,2),r=n[0],a=n[1],o=Object.assign({},this.state.ranges[r],a);t=Object.assign(t,{[r]:o})},this),this.setState({ranges:Object.assign({},this.state.ranges,t)}),this.props.onChange&&this.props.onChange(e)},this.handleChangeMode=e=>{this.setState({mode:e})},this.getStaticRanges=()=>(this.props.staticRanges||[]).filter(e=>e.modes.includes(this.state.mode)),this.renderDayRange=()=>{var e=this.props.minDate;return r.createElement(B,A({minDate:e},this.props,{showDateDisplay:!1,shownDate:Object.values(this.state.ranges)[0].endDate,navigatorRenderer:((e,t,n,a,o)=>r.createElement(h,{showModeChanger:this.props.showModeChanger,mode:this.state.mode,data:o,changeShownDate:a,handleChangeRange:e,handleChangeMode:this.handleChangeMode,maxDate:t.maxDate,minDate:t.minDate})).bind(null,this.handleChangeRange,{maxDate:new Date}),onChange:this.handleChangeRange,ranges:Object.values(this.state.ranges),locale:T(),dragSelectionEnabled:!1,weekdayDisplayFormat:"dd",dayDisplayFormat:"D",monthDisplayFormat:"MMMM YYYY"}))},this.renderMonthRange=()=>{var e=this.props,t=e.maxDate,n=e.minDate;return r.createElement("div",{className:"DatePicker__MonthRangeContainer"},r.createElement(h,{showModeChanger:this.props.showModeChanger,mode:this.state.mode,data:{ranges:Object.values(this.state.ranges)},handleChangeMode:this.handleChangeMode}),r.createElement(L,{ranges:Object.values(this.state.ranges),locale:T(),minDate:n,maxDate:t||new Date,onChange:this.handleChangeRange}))},this.state={ranges:{},mode:this.props.mode};var t=e.ranges;Object.entries(t).forEach(e=>{var t=e[0],n=e[1],r=n.startDate,a=n.endDate;this.state.ranges[t]={startDate:r,endDate:a,key:t}},this),this.handleChangeRange=this.handleChangeRange.bind(this)}render(){var e=this.props,t=e.maxDate,n=e.minDate,a=e.onClose,o=e.onDone,i=e.closeText,s=e.validate,u=this.getStaticRanges(),c=!!s&&s(this.state.ranges);return r.createElement("div",{className:"DatePicker "+(this.props.className||"")},u.length?r.createElement(O,{staticRanges:u,handleChangeRange:this.handleChangeRange,rangeKey:Object.keys(this.state.ranges)[0],ranges:Object.values(this.state.ranges),maxDate:t,minDate:n,onDone:o}):null,this.state.mode===R?this.renderDayRange():this.renderMonthRange(),a||o?r.createElement(_,{onClose:a,onDone:o,closeText:i,ranges:this.state.ranges,onDoneDisabled:c}):null)}}t.default=Y;Y.defaultProps={mode:R,showModeChanger:!1,ranges:{range1:{startDate:new Date,endDate:new Date}},navigatorRenderer:(e,t,n)=>r.createElement(h,{mode:R,handleChangeMode:()=>{},changeShownDate:t,data:n,focusedRanges:e}),direction:"horizontal"}},sUtH:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o})),n.d(t,"getDayStrRang",(function(){return i})),n.d(t,"getMonthStrRange",(function(){return s}));var r=n("f2hD"),a=n("b/SL");function o(e,t){return t?s(e):i(e)}var i=e=>{var t=[];t=e.startDate.getTime()===e.endDate.getTime()?r.ADS_MONTH_OF_LIST:r.ADS_SHORT_MONTH_OF_LIST;var n="{day} {month}",a=e.startDate,o=e.endDate,i=langDate(a,["","{day} {month} {year}"],0,t,!1),s=langDate(o,["","{day} {month} {year}"],0,t,!1),u=langDate(a,["",n],0,t,!1),c=langDate(o,["",n],0,t,!1);return a.getYear()!==o.getYear()?i===s?i:i+` ${r.NDASH_SIGN} `+s:u===c?u:u+` ${r.NDASH_SIGN} `+c},s=e=>{var t=e.startDate,n=e.endDate;return Object(a.isSameYear)(t,n)&&Object(a.isSameMonth)(t,n)?langDate(t,["","{month} {year}"],0,r.ADS_MONTH_LIST,!1):Object(a.isSameYear)(t,n)?[t&&langDate(t,["","{month}"],0,r.ADS_SHORT_MONTH_LIST,!1),r.NDASH_SIGN,n&&langDate(n,["","{month} {year}"],0,r.ADS_SHORT_MONTH_LIST,!1)].join(" "):[t&&langDate(t,["","{month} {year}"],0,r.ADS_SHORT_MONTH_LIST,!1),r.NDASH_SIGN,n&&langDate(n,["","{month} {year}"],0,r.ADS_SHORT_MONTH_LIST,!1)].join(" ")}},szUW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("HyFC");var o=(0,((r=a)&&r.__esModule?r:{default:r}).default)({LT:"h:mm aa",LTS:"h:mm:ss aa",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY h:mm aa",LLLL:"dddd, MMMM D YYYY h:mm aa"});t.default=o,e.exports=t.default},t6IN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("sCib")),a=s(n("UX9e")),o=s(n("loZk")),i=s(n("WtjO"));function s(e){return e&&e.__esModule?e:{default:e}}var u={ordinalNumbers:(0,o.default)(/^(\d+)(th|st|nd|rd)?/i),ordinalNumber:i.default,weekdays:(0,r.default)({narrow:/^(su|mo|tu|we|th|fr|sa)/i,short:/^(sun|mon|tue|wed|thu|fri|sat)/i,long:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},"long"),weekday:(0,a.default)({any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},"any"),months:(0,r.default)({short:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,long:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},"long"),month:(0,a.default)({any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},"any"),timesOfDay:(0,r.default)({short:/^(am|pm)/i,long:/^([ap]\.?\s?m\.?)/i},"long"),timeOfDay:(0,a.default)({any:[/^a/i,/^p/i]},"any")};t.default=u,e.exports=t.default},"u/mt":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcFocusDate=function(e,t){var n,r=t.shownDate,a=t.date,i=t.months,s=t.ranges,u=t.focusedRange;if("dateRange"===t.displayMode){var c=s[u[0]]||{};n={start:c.startDate,end:c.endDate}}else n={start:a,end:a};n.start=(0,o.startOfMonth)(n.start||new Date),n.end=(0,o.endOfMonth)(n.end||n.start);var l=n.start||n.end||r||new Date;if(!e)return r||l;var d={start:(0,o.startOfMonth)(e),end:(0,o.endOfMonth)((0,o.addMonths)(e,i-1))};if((0,o.areIntervalsOverlapping)(n,d))return e;return l},t.findNextRangeIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.findIndex((function(e,n){return n>t&&!1!==e.autoFocus&&!e.disabled}));return-1!==n?n:e.findIndex((function(e){return!1!==e.autoFocus&&!e.disabled}))},t.getMonthDisplayRange=function(e,t,n){var r=(0,o.startOfMonth)(e,t),a=(0,o.endOfMonth)(e,t),i=(0,o.startOfWeek)(r,t),s=(0,o.endOfWeek)(a,t);n&&(0,o.differenceInCalendarDays)(s,i)<=34&&(s=(0,o.addDays)(s,7));return{start:i,end:s,startDateOfMonth:r,endDateOfMonth:a}},t.generateStyles=function(e){return e.length?e.filter((function(e){return Boolean(e)})).reduce((function(e,t){return Object.keys(t).forEach((function(n){e[n]=(0,a.default)(e[n],t[n])})),e}),{}):{}};var r,a=(r=n("TSYQ"))&&r.__esModule?r:{default:r},o=n("b/SL")},uytb:function(e,t,n){"use strict";n.r(t),n.d(t,"RECENT_SEARCH_OP",(function(){return i})),n.d(t,"PIN_HIDDEN_ID_OP",(function(){return s})),n.d(t,"deleteOldStoredFormat",(function(){return d})),n.d(t,"mount",(function(){return g}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf");var r=n("BJj/");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i="recent_search",s="pin_hide";function u(e){return"im_store_"+e}function c(e){return ls.get(u(e))||{}}function l(e,t,n){if(ls.checkVersion()){var r=JSON.stringify(t);rand(0,1e5)<=1&&statlogsValueEvent("im_local_store_size",r.length),n(u(e),r)}}function d(e,t){for(var n=["fwd","draft","bind_attach"],r=c(e),a=!1,o=n.length;o--;)n[o]in r&&(delete r[n[o]],a=!0);a&&l(e,r,t)}function f(e,t,n){n.key===u(e)&&(t.db=JSON.parse(n.newValue),t.checkTime=Date.now())}function g(e){var t=Object(r.debounce)((e,t)=>{localStorage.setItem(e,t)},300);ls.checkVersion()&&d(e,t);var n={db:c(e),checkTime:Date.now()},o=f.bind(null,e,n);return window.addEventListener("storage",o,!1),{select:(t,r)=>(Date.now()-n.checkTime>1e3&&(n.db=c(e)),function(e,t,n){return t===i?e[t]||[]:t===s?e[t]&&e[t][n]:e[t]?extend(!0,{},e[t][n]):null}(n.db,t,r)),selectByKey:t=>(Date.now()-n.checkTime>1e3&&(n.db=c(e)),n.db[t]),update(r,o){var u=function(e,t,n){switch(e[t]||(e[t]={}),t){case i:var r=n;r&&r.length>0?e[t]=r:delete e[t];break;case s:var o=a(n,2),u=o[0],c=o[1];c?e[t][u]=+c:delete e[t][u]}return e}(n.db,r,o);return n.db=u,n.checkTime=Date.now(),l(e,u,t)},updateByKey:(r,a)=>(n.db[r]=a,n.checkTime=Date.now(),l(e,n.db,t)),unmount(){window.removeEventListener("storage",o,!1)}}}},vT4u:function(e,t,n){"use strict";n.r(t),n.d(t,"CONTROLLER",(function(){return E})),n.d(t,"ACTIVITY_PERIOD",(function(){return D})),n.d(t,"ACTIVITY_TYPE_TYPING",(function(){return C})),n.d(t,"ACTIVITY_TYPE_RECORDING_AUDIO",(function(){return S})),n.d(t,"CHAT_ACTION_SETTINGS",(function(){return L})),n.d(t,"CHAT_ACTION_BLOCK",(function(){return A})),n.d(t,"CHAT_ACTION_INVITE",(function(){return N})),n.d(t,"CHAT_ACTION_MEDIA",(function(){return x})),n.d(t,"CHAT_ACTION_SEARCH",(function(){return R})),n.d(t,"CHAT_ACTION_PIN_HIDE",(function(){return F})),n.d(t,"CHAT_ACTION_PIN_UNHIDE",(function(){return H})),n.d(t,"CHAT_ACTION_UNPIN",(function(){return B})),n.d(t,"CHAT_ACTION_MUTE",(function(){return Y})),n.d(t,"CHAT_ACTION_UNMUTE",(function(){return G})),n.d(t,"CHAT_ACTION_CLEAR",(function(){return U})),n.d(t,"CHAT_ACTION_LEAVE",(function(){return q})),n.d(t,"CHAT_ACTION_RETURN",(function(){return W})),n.d(t,"CHAT_ACTION_BLOCK_COMMUNITY",(function(){return z})),n.d(t,"CHAT_ACTION_ALLOW_COMMUNITY",(function(){return V})),n.d(t,"CHAT_ACTION_BLOCK_NOTIFY",(function(){return $})),n.d(t,"CHAT_ACTION_CALL_AUDIO",(function(){return K})),n.d(t,"CHAT_ACTION_CALL_VIDEO",(function(){return X})),n.d(t,"CHAT_ACTION_UNREAD",(function(){return Q})),n.d(t,"ACTION_PRIORITIES",(function(){return Z})),n.d(t,"loadHashes",(function(){return J})),n.d(t,"loadWriteHash",(function(){return ne})),n.d(t,"strHistory",(function(){return ae})),n.d(t,"updateBlockStates",(function(){return oe})),n.d(t,"setCallAvailability",(function(){return ie})),n.d(t,"loadPeer",(function(){return se})),n.d(t,"restoreHistoryQueue",(function(){return ue})),n.d(t,"removeFailed",(function(){return ce})),n.d(t,"removeExpiredFailed",(function(){return le})),n.d(t,"selectPeer",(function(){return fe})),n.d(t,"selectPeerOnMessage",(function(){return he})),n.d(t,"changePeer",(function(){return pe})),n.d(t,"updateMentions",(function(){return me})),n.d(t,"setActions",(function(){return _e})),n.d(t,"loadMoreHistory",(function(){return be})),n.d(t,"loadLessHistory",(function(){return ve})),n.d(t,"readLastMessages",(function(){return Oe})),n.d(t,"readTillSpecificMessage",(function(){return we})),n.d(t,"markAudioMessageAsListened",(function(){return Te})),n.d(t,"loadLongPollKey",(function(){return je})),n.d(t,"loadLongPollTs",(function(){return Ee})),n.d(t,"setMessageErrored",(function(){return De})),n.d(t,"resendMessage",(function(){return Ce})),n.d(t,"loadAdmins",(function(){return Me})),n.d(t,"updateVideoThumb",(function(){return Pe})),n.d(t,"editMessage",(function(){return Le})),n.d(t,"addMessage",(function(){return Ae})),n.d(t,"markInboundMessagesAsRead",(function(){return Fe})),n.d(t,"markOutboundMessagesAsRead",(function(){return He})),n.d(t,"initTextStore",(function(){return Be})),n.d(t,"processFwd",(function(){return Ye})),n.d(t,"mergeTabs",(function(){return Ge})),n.d(t,"updateOnline",(function(){return Ue})),n.d(t,"setActivity",(function(){return qe})),n.d(t,"updateActivity",(function(){return We})),n.d(t,"waitActivity",(function(){return ze})),n.d(t,"sendMessage",(function(){return $e})),n.d(t,"deliverMessage",(function(){return Ke})),n.d(t,"deliverEditedMessage",(function(){return Xe})),n.d(t,"addSelection",(function(){return Qe})),n.d(t,"cleanSelected",(function(){return Ze})),n.d(t,"dropSelection",(function(){return Je})),n.d(t,"replaceMessage",(function(){return et})),n.d(t,"saveMedia",(function(){return tt})),n.d(t,"loadMedia",(function(){return nt})),n.d(t,"addAttachmentsToStoreData",(function(){return rt})),n.d(t,"replaceMediaAttachesStore",(function(){return at})),n.d(t,"setCurrentSearchDate",(function(){return ot})),n.d(t,"setInplaceSearch",(function(){return it})),n.d(t,"setCurrentSearch",(function(){return st})),n.d(t,"searchHints",(function(){return ut})),n.d(t,"searchHintsIndex",(function(){return ct})),n.d(t,"localIndexToDialog",(function(){return lt})),n.d(t,"searchTopConv",(function(){return ft})),n.d(t,"searchImTopConv",(function(){return gt})),n.d(t,"searchLocalHints",(function(){return ht})),n.d(t,"preloadSearchIndex",(function(){return pt})),n.d(t,"loadDialogs",(function(){return mt})),n.d(t,"searchMessages",(function(){return _t})),n.d(t,"isSearchAllLoaded",(function(){return bt})),n.d(t,"isSearchingInplace",(function(){return vt})),n.d(t,"cancelSearch",(function(){return yt})),n.d(t,"clearDate",(function(){return Ot})),n.d(t,"searchInplaceStart",(function(){return wt})),n.d(t,"searchMessagesInplace",(function(){return Tt})),n.d(t,"loadImportant",(function(){return jt})),n.d(t,"loadActualLastMessage",(function(){return Et})),n.d(t,"removeUnreadDeletedMsgsFromTab",(function(){return Dt})),n.d(t,"removeMessagesMarkDeleted",(function(){return Ct})),n.d(t,"removeMessages",(function(){return St})),n.d(t,"removeMessageSend",(function(){return Mt})),n.d(t,"removeMessagesWithRestore",(function(){return kt})),n.d(t,"restoreMessage",(function(){return It})),n.d(t,"restoreMessageSend",(function(){return Pt})),n.d(t,"acceptMessageRequest",(function(){return At})),n.d(t,"rejectMessageRequest",(function(){return Nt})),n.d(t,"cancelMessageRequest",(function(){return xt})),n.d(t,"sendTyping",(function(){return Rt})),n.d(t,"sendRecordingAudio",(function(){return Ft})),n.d(t,"forwardMessages",(function(){return Ht})),n.d(t,"prepareForward",(function(){return Bt})),n.d(t,"deletedDialog",(function(){return Yt})),n.d(t,"flushHistory",(function(){return Gt})),n.d(t,"updateChatTopic",(function(){return Ut})),n.d(t,"loadChatInfo",(function(){return qt})),n.d(t,"addNewMemberOptimisticly",(function(){return Wt})),n.d(t,"addNewMember",(function(){return zt})),n.d(t,"loadChatMember",(function(){return Vt})),n.d(t,"checkNewPeople",(function(){return $t})),n.d(t,"loadNewPeople",(function(){return Kt})),n.d(t,"updateChatPhoto",(function(){return Xt})),n.d(t,"updateActions",(function(){return Qt})),n.d(t,"leaveChat",(function(){return Zt})),n.d(t,"returnToChat",(function(){return Jt})),n.d(t,"toggleMutePeer",(function(){return en})),n.d(t,"toggleMuteMentionsPeer",(function(){return tn})),n.d(t,"setMutedPeer",(function(){return nn})),n.d(t,"setExecStack",(function(){return rn})),n.d(t,"favMessage",(function(){return an})),n.d(t,"updateFavMessage",(function(){return on})),n.d(t,"updateImportant",(function(){return sn})),n.d(t,"loadSpam",(function(){return un})),n.d(t,"flushSpam",(function(){return cn})),n.d(t,"setCreationType",(function(){return ln})),n.d(t,"getOwnerPhoto",(function(){return dn})),n.d(t,"presetAvatar",(function(){return fn})),n.d(t,"setChatPhoto",(function(){return gn})),n.d(t,"createChat",(function(){return hn})),n.d(t,"createCommunityChat",(function(){return pn})),n.d(t,"resync",(function(){return mn})),n.d(t,"toggleSendingAbility",(function(){return _n})),n.d(t,"setDelayedMessage",(function(){return bn})),n.d(t,"isAnythingLoading",(function(){return vn})),n.d(t,"updateUnreadCount",(function(){return yn})),n.d(t,"changeSubmitSettings",(function(){return On})),n.d(t,"updateFavAndTitle",(function(){return wn})),n.d(t,"saveHistoryScroll",(function(){return Tn})),n.d(t,"filterFromTab",(function(){return jn})),n.d(t,"changeDialogsTab",(function(){return En})),n.d(t,"updateFolderState",(function(){return Cn})),n.d(t,"toggleDialogImportant",(function(){return Sn})),n.d(t,"markDialogAnswered",(function(){return Mn})),n.d(t,"markDialogUnread",(function(){return kn})),n.d(t,"markDialogRead",(function(){return In})),n.d(t,"getMutexQueue",(function(){return Pn})),n.d(t,"releaseBlock",(function(){return Ln})),n.d(t,"toggleCommunityMute",(function(){return An})),n.d(t,"deleteDialog",(function(){return Nn})),n.d(t,"restoreDialog",(function(){return xn})),n.d(t,"spamDialog",(function(){return Rn})),n.d(t,"updateTabbedPeers",(function(){return Fn})),n.d(t,"isEverythingLoaded",(function(){return Hn})),n.d(t,"cleanTab",(function(){return Bn})),n.d(t,"stringifyTab",(function(){return Yn})),n.d(t,"updateGoToEndVisibility",(function(){return Gn})),n.d(t,"updateGoToMentionVisibility",(function(){return Un})),n.d(t,"toggleCommunityMessages",(function(){return qn})),n.d(t,"updateHistory",(function(){return Wn})),n.d(t,"syncHistory",(function(){return zn})),n.d(t,"startRecording",(function(){return Vn})),n.d(t,"cancelRecording",(function(){return $n})),n.d(t,"setVoiceMessageAvail",(function(){return Kn})),n.d(t,"toggleConversation",(function(){return Xn})),n.d(t,"updateSearchQuery",(function(){return Qn})),n.d(t,"initializeChatResize",(function(){return Zn})),n.d(t,"joinChat",(function(){return Jn})),n.d(t,"getInviteLink",(function(){return er})),n.d(t,"resetInviteLink",(function(){return tr})),n.d(t,"leaveInvitation",(function(){return nr})),n.d(t,"saveRecentSearchPeer",(function(){return rr})),n.d(t,"resetRecentSearch",(function(){return ar})),n.d(t,"removeFromRecentSearch",(function(){return or})),n.d(t,"pinMessageOptimistic",(function(){return ir})),n.d(t,"unpinMessageOptimistic",(function(){return sr})),n.d(t,"pinMessage",(function(){return ur})),n.d(t,"unpinMessage",(function(){return cr})),n.d(t,"getPinnedMessage",(function(){return lr})),n.d(t,"getMessageLocalId",(function(){return dr})),n.d(t,"getChatMembers",(function(){return fr})),n.d(t,"getChatDetails",(function(){return gr})),n.d(t,"updateFlags",(function(){return hr})),n.d(t,"removeChatPhoto",(function(){return pr})),n.d(t,"kickUserOptimisticly",(function(){return mr})),n.d(t,"kickUser",(function(){return _r})),n.d(t,"toggleAdminOptimisticly",(function(){return br})),n.d(t,"toggleAdmin",(function(){return vr})),n.d(t,"checkChatMember",(function(){return yr})),n.d(t,"hidePromoTooltip",(function(){return Or})),n.d(t,"videoAutoPlayHandler",(function(){return wr})),n.d(t,"hideTopBannerAction",(function(){return Tr})),n.d(t,"callbackTopBannerAction",(function(){return jr})),n.d(t,"loadBanner",(function(){return Er})),n.d(t,"setKeyboard",(function(){return Dr})),n.d(t,"deleteKeyboard",(function(){return Cr})),n.d(t,"toggleKeyboard",(function(){return Sr})),n.d(t,"loadKeyboard",(function(){return Mr})),n.d(t,"changeCommunityAccess",(function(){return kr})),n.d(t,"deleteTemplate",(function(){return Ir})),n.d(t,"createTemplate",(function(){return Pr})),n.d(t,"updateTemplate",(function(){return Lr})),n.d(t,"resetTabAll",(function(){return Ar})),n.d(t,"updateMessageRequestsCounter",(function(){return Nr})),n.d(t,"updateCasperMessageExpiringStatus",(function(){return xr})),n.d(t,"prepareCasperMessagesFromMessages",(function(){return Rr})),n.d(t,"peerProfileToggleTag",(function(){return Fr})),n.d(t,"peerProfileManageTags",(function(){return Hr})),n.d(t,"peerProfileSaveNote",(function(){return Br}));n("HEwt"),n("rE2o"),n("ioFf"),n("hhXQ"),n("a1Th"),n("OG14"),n("OEbY"),n("Vd3H"),n("91GP"),n("SRfc"),n("rGqo"),n("VRzm"),n("Btvt");var r=n("BxOC"),a=n("bIHZ"),o=n("f01n"),i=n("DM26"),s=n("rudk"),u=n("aong"),c=n("uytb"),l=n("P13b"),d=n("h++7"),f=n("rHUl"),g=n("MhhX"),h=n("86+7"),p=n("ERyv"),m=n("Wu9C"),_=n("lJdi"),b=n("O8ze"),v=n("zxIV"),y=n("XzvV"),O=n("ambf");function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E="al_im.php",D=5,C="typing",S="audiomessage",M=Object(a.updateLazyLocation)(),k=M.scheduleNav,I=M.commitNav,P=M.scheduleNavWithTimeOut;var L="settings",A="block",N="invite",x="media",R="search",F="pin_hide",H="pin_unhide",B="unpin",Y="mute",G="unmute",U="clear",q="leave",W="return",z="block_community",V="allow_community",$="block_notify",K="call_audio",X="call_video",Q="unread",Z={[L]:0,[A]:1,[N]:2,[x]:3,[R]:6,[Q]:6,[F]:7,[H]:7,[B]:8,[Y]:10,[G]:10,[U]:11,[q]:12,[W]:12,[z]:12,[V]:12,[$]:12};function J(e,t,n){return Object(r.post)(E,{act:"a_renew_hash",peers:e.join(","),gid:t.hidegid?void 0:n.gid})}function ee(e,t,n){return function(e){return e.resync_in_process?e.resync_in_process:Promise.resolve(!1)}(e).then(r=>r?t(...n):function(e){if(!e.renew_hashes){var t=e.last_hashes_update||0;if(Date.now()-t<1e4)return Promise.resolve();var n=Object.keys(e.tabs).filter(t=>Object(l.isFullyLoadedTab)(e,t));e.renew_hashes=J(n,{},e).then(t=>{var r=T(t,3),a=r[0],o=r[1],i=r[2];return n.forEach(t=>{e.tabs[t].hash=a[t]}),e.writeHash=o,e.manageTagsHash=i,delete e.renew_hashes,e.last_hashes_update=Date.now(),e})}return e.renew_hashes}(e).then(e=>t(...n)))}function te(e){return function(){var t=arguments,n=t[t.length-1];return e(...t).catch(r=>{if(r&&r.match&&r.match(/1001;/))return ee(n,e,t);throw r})}}function ne(){return Object(r.post)(E,{act:"a_get_write_hash"})}function re(e){return"string"==typeof e?Object(v.se)(`<div>${e}</div>`):e}function ae(e){return"string"==typeof e?e:e.innerHTML}function oe(e,t){return t.block_states=extend(t.block_states,e),Promise.resolve(t)}function ie(e,t){return t.tabs[e].can_start_call=Object(_.canStartGroupCall)(t,e),Promise.resolve(t)}function se(e,t,n,a,o){return o.tabHistoryNotChanged=!1,Object(i.retryFn)(r.post,3,e=>e-1)(E,{act:"a_start",peer:e,msgid:n,history:t,prevpeer:o.prevPeer,gid:o.gid,block:a}).then(t=>{var r=T(t,6),a=r[0],i=r[1],s=r[2],u=r[3],c=r[4],f=r[5];if(i.forEach(e=>Object(h.oCacheAdd)(o,e)),o.tabs||(o.tabs={}),o.dialog_tab_cts=Object.assign({},c,{[d.FOLDER_MESSAGE_REQUEST]:o.dialog_tab_cts[d.FOLDER_MESSAGE_REQUEST]}),o.tabs[e]||(o.tabs[e]=Object(l.normalizeTab)(o,a)),oe(u,o),n){if(o.tabs[e]){var g=o.tabs[e].lastmsg,p=o.tabs[e].lastmsg_meta;extend(o.tabs[e],a),o.tabs[e].lastmsg=g,o.tabs[e].lastmsg_meta=p}}else extend(o.tabs[e],a);return o.admins=extend(o.admins,s),o.imQueue(e,!1),wr(),f&&(o.tabs[e].peer_profile_info=f),ue(e,o)}).catch(e=>Object(p.imWeirdCatch)("loadPeer",e))}function ue(e,t){var n=t.imQueue(e,!1),r=t.tabs[e],a=n.filter(n=>!Object(f.isRidExist)(t,e,n.rid));return r.msgs=a.reduce((e,t)=>(e["rid"+t.rid]=t.mess,e),r.msgs),t.imQueueSet(e,a),t.tabs[e].history=Object(l.restoreQueue)(a,t,re(t.tabs[e].history)),Promise.resolve(t)}function ce(e,t,n,r){var a=r.imQueue(t),o=[],i=[];return a.forEach(e=>{e.failed&&n&&e.mess.messageId!==n&&i.push(e),!e.failed||n&&e.mess.messageId!==n||o.push("rid"+e.rid)}),r.imQueueSet(t,i),r.tabs[t].history=Object(l.removeMessages)(o,re(r.tabs[t].history)),Object(l.removeMessages)(o,e),Promise.resolve(r)}function le(e,t,n){var r=n.imQueue(t),a=[],o=[],i=Date.now();return r.forEach(e=>{e.failed&&i-e.ts<864e5&&o.push(e),e.failed&&i-e.ts>=864e5&&a.push("rid"+e.rid)}),n.imQueueSet(t,o),n.tabs[t].history=Object(l.removeMessages)(a,re(n.tabs[t].history)),Object(l.removeMessages)(a,e),Promise.resolve(n)}function de(e,t){return!1===(t.block_states[e]||{}).free?Promise.resolve(t):Object(r.post)(E,{act:"a_block",peer:e,prevPeer:t.prevPeer,gid:t.gid}).then(e=>oe(T(e,1)[0],t))}function fe(e,t){var n=t.peer;return Promise.resolve(t).then(t=>(t.tabHistoryNotChanged=!1,Object(l.isFullyLoadedTab)(t,n)&&!t.tabs[n].msgid?(t.gid&&de(n,t),Promise.resolve(t).then(_e)):(Object(l.isFullyLoadedTab)(t,n)&&(t.tabs[n].msgid=!1),se(n,e,!1,!0,t)))).then(_e).then(ge.bind(null,n))}function ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(l.isTabLoaded)(t,e)&&(t.tabs[e].last_touched=Date.now()),Object(l.isTabLoaded)(t,e)&&n&&(t.tabs[e].last_visited=Date.now()),t}function he(e,t,n){var r=n.msgid,a=n.peer;return!e&&Object(l.isFullyLoadedTab)(n,a)&&n.tabs[a].msgs[r]?(t===n.peer?n.tabHistoryNotChanged=!0:n.tabHistoryNotChanged=!1,n.gid&&de(a,n),Promise.resolve(n).then(_e).then(ge.bind(null,a))):se(a,!0,r,!0,n).then(_e).then(()=>(Object(f.getTab)(n,a).msgid=r,n)).then(ge.bind(null,a))}function pe(e,t,n,r){if(vn(r))throw Object(l.showWaitUntilUploadedBox)(),new Error("Cant change peer while loading something");var a=r.gid?"gim"+r.gid:"im";if(r.prevPeer=r.peer,r.peer=e,r.msgid=t||"",r.currentEntryPoint=n,cur.peer=e,k({sel:e?Object(l.convertPeerToUrl)(e):null,msgid:r.msgid,email:"",0:a}),0!=r.prevPeer&&ge(r.prevPeer,r,!0),0!==e){Object(l.isTabLoaded)(r,e)&&ge(e,r,!0),Fn(r.tabbedPeers.map(e=>e.peer).indexOf(e)<0?[{peer:e,type:"perm"}].concat(r.tabbedPeers):r.tabbedPeers.map(t=>(t.peer==e&&"perm"!==t.type&&(t.type="perm"),t)),!1,r)}else Fn(r.tabbedPeers,!1,r);return I(),yt(r.prevPeer,r)}function me(e){var t=e.isMassMentionsMessageAllowed;cur.wallMentions=()=>new Promise((n,r)=>{if(cur.wallMentions=[],!Object(l.isChatPeer)(e.peer)||!Object(l.isFullyLoadedTab)(e,e.peer)||Object(l.isFvkcomgroup)(e,e.peer))return r();var a=e.tabs[e.peer];function o(){var r=[];Object.keys(a.msgs||{}).reverse().forEach(e=>{var t=Object(f.parserMessage)(a.msgs[e]),n=t&&t.userId;n&&n!=vk.id&&-1===r.indexOf(n)&&Object(l.isUserAliveInChat)(a,n)&&r.push(n)}),(a.memberIds||[]).forEach(e=>{-1===r.indexOf(e)&&r.push(e)});var o=[];r.forEach(t=>{if(Object(h.oCacheExists)(e,t)){var n=Object(h.oCacheGet)(e,t),r=n.link.substring(1);o.push([n.id,n.name,"@"+r,n.photo,void 0,void 0,void 0,r,n.first_name,""])}});var i=getLang("mail_im_mention_all"),s=getLang("mail_im_mention_online");t&&Object(_.canMassMention)(e)&&o&&o.length>1&&(d.MASS_MENTION_ALIASES.online.forEach(e=>o.push(["online",s,"@"+e,"/images/mention_online.svg",void 0,void 0,void 0,e,e,""])),d.MASS_MENTION_ALIASES.all.forEach(e=>o.push(["all",i,"@"+e,"/images/mention_all.svg",void 0,void 0,void 0,e,e,""]))),n(o)}a.membersLoaded?o():fr(e.peer,e).then(o)})}function _e(e){var t=e.peer;if(0===t)return Promise.resolve(e);var n=e.tabs[t],r=Object(l.isChatPeer)(t),a=Object(f.isChannelPeer)(n),o=Object(f.isCommunityChat)(e,t),i=r&&!Object(f.isChatActive)(n),s=!!n.offset,u=[];s&&u.push(x),s&&u.push(R),0===n.unread&&u.push(Q),!Object(l.isEmailPeer)(t)&&!s||a||u.push(U),!Object(l.isCommunityInterface)(e)||a||o||u.push(A),a&&!i&&u.push(L),Object(l.isCommunityPeer)(t)&&(n.can_send_notify?u.push($):u.push(n.blocked_community?V:z)),!Object(l.isCommunityInterface)(e)&&(r||Object(l.isUserPeer)(t)||Object(l.isCommunityPeer)(t))&&(!r||!i)&&u.push(inArray(t,e.mutedPeers)?G:Y);var c=!Object(l.isCommunityInterface)(e)&&Object(l.isUserPeer)(t)&&n.is_friend&&!n.block_error,d=r&&!i&&Object(_.canInviteUser)(e);(c||d)&&u.push(N),!r||i||Object(l.isCommunityInterface)(e)||u.push(q),r&&n.data.closed&&!n.data.kicked&&u.push(W),r&&n.pinned&&(u.push(Object(m.isPinnedMessageVisibleInTab)(e,t)?F:H),Object(_.canPinOrUnpin)(e)&&u.push(B));var g=Object(l.chatActions)(e,a);return e.curActions=u.sort((e,t)=>Z[e]-Z[t]).reduce((e,t)=>(e[t]=g[t],e),{}),Promise.resolve(e)}function be(e,t,n){var a=n.tabs[n.peer];return Object(r.post)(E,{peer:n.peer,whole:e,act:"a_history",offset:a.offset+(a.skipped||0),toend:t,gid:n.gid}).then(e=>{var t=T(e,4),r=t[0],o=t[1],i=t[2],s=t[3];return a.allShown=i,n.admins=extend(n.admins,s),a.history=r+ae(a.history),a.historyToAppend=r,a.offset+=Object.keys(o).length,a.msgs=extend(a.msgs,o),n})}function ve(e){var t=e.tabs[e.peer];return Object(r.post)(E,{peer:e.peer,act:"a_history",rev:1,offset:t.skipped,gid:e.gid}).then(n=>{var r=T(n,5),a=r[0],o=r[1],i=r[2];r[3],r[4];t.allShown=t.allShown||i,t.history=ae(t.history)+a,t.historyToAppend=a;var s=Object.keys(o).length;return t.skipped-=s,t.offset+=s,t.msgs=extend(t.msgs,o),e})}function ye(e,t,n,r){var a=e.tabs[t];return r===o.FLAG_OUTBOUND&&a.out_up_to>n||(r===o.FLAG_OUTBOUND?a.out_up_to=n:a.in_up_to=n),e}var Oe=te((function(e,t){if(Object(l.tabIsMessageRequest)(t.tabs[e]))return Promise.resolve(t);var n=t.tabs[e],a=n.msgs||{},i=Object.keys(a).map(n=>Object(f.getMessage)(t,e,n)).filter(e=>!Object(g.isOut)(e)).map(e=>e.messageId).sort((e,t)=>t-e);return n.skipped>0&&(i=i.filter(e=>intval(e)<=n.lastmsg-n.skipped)),(i=intval(i.shift()))<=n.in_up_to?Promise.resolve(t):(t.longpoll.push([o.readInboundEvent([6,e,i,null])]),Object(r.post)(E,{peer:e,ids:[i],hash:n.hash,act:"a_mark_read",gid:t.gid}).then(()=>ye(t,e,i,o.FLAG_OUTBOUND)).catch(()=>t))})),we=te((function(e,t,n){if(Object(l.tabIsMessageRequest)(n.tabs[t]))return Promise.resolve(n);var a=n.tabs[t];return e<=a.in_up_to?Promise.resolve(n):(n.longpoll.push([o.readInboundEvent([6,t,e,null])]),Object(r.post)(E,{peer:t,ids:[e],hash:a.hash,act:"a_mark_read",gid:n.gid}).then(()=>ye(n,t,e,o.FLAG_OUTBOUND)))})),Te=te((function(e,t,n){var a=n.tabs[e];return Object(r.post)(E,{peer:e,id:t,hash:a.hash,act:"a_mark_listened",gid:n.gid})}));function je(e){return Object(r.post)(E,{act:"a_get_key",uid:e.id,gid:e.gid}).then(t=>{var n=T(t,3),r=n[0],a=n[1],o=n[2];return extend({},e,{imKey:r,imUrl:a,imPart:o})})}function Ee(e){return Object(r.post)(E,{act:"a_get_ts",gid:e.gid}).then(t=>{var n=T(t,1)[0];return extend({},e,{imTs:n})})}function De(e,t,n){var r=n.tabs[e];return r.msgs[t.messageId]&&(r.msgs[t.messageId].errored=1,r.history=Object(l.setMessageError)(e,t,re(r.history))),Promise.resolve(n)}function Ce(e,t,n,r){var a=r.tabs[e];return a.msgs[t]&&(a.msgs[t].errored=0,a.lastmsg_meta=n,a.lastmsg=t,a.history=Object(l.startResendMessage)(e,t,re(a.history))),Promise.resolve(r)}function Se(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.deletedDialog||(e.dialog_tabs=Object.keys(e.dialog_tabs).reduce((e,o)=>(!n&&!jn(o)(t)||a&&!a(o,e[o],t)||(e[o]=Object(u.arrayUnique)(r(e[o],o))),e),e.dialog_tabs))}function Me(e,t){return 0===e.length?Promise.resolve(t):Object(r.post)(E,{act:"a_get_admin",admins:e.join(","),gid:t.gid}).then(e=>{var n=T(e,1)[0];return t.admins=extend(t.admins,n),t})}function ke(e,t){if(!inArray(e,t.tabbedPeers.map(e=>e.peer))&&(0!==t.peer||t.searchText)&&!inArray(e,t.mutedPeers)){var n={peer:e,type:"temp"};Fn(t.tabbedPeers.concat([n]),!1,t)}}function Ie(e,t,n){return Object(l.isReversedDialogs)(n)?t.concat([e]):[e].concat(t)}function Pe(e,t){var n=e.get().peer,r=Object(f.getTab)(e,n);if(Object(l.isFullyLoadedTab)(e,n)){var a=re(r.history);r.history=Object(l.updateMessageInCache)(e,a,t)}}function Le(e,t){var n=Object(f.getTab)(t,e.peerId);if(Object(l.isFullyLoadedTab)(t,e.peerId)){var r=re(n.history);n.msgs[e.messageId]=extend(!0,{},e),n.history=Object(l.editAndReplaceMessage)(t,e,r)}n&&n.lastmsg===e.messageId&&(n.lastmsg_meta=e);var a=n&&n.pinned&&Object(f.parserMessage)(n.pinned);if(a&&a.messageId===e.messageId&&(n.pinned=e),Object(l.isTabLoaded)(t,e.peerId)&&!Object(g.isOut)(e)&&Object(g.isUnread)(n,e)){var o=Object(g.hasUserMentions)(e,t.id),i=n.mentions&&n.mentions.includes(e.messageId);o&&!i?(n.mentions||(n.mentions=[]),n.mentions.push(e.messageId)):!o&&i&&Re(e.peerId,t=>t!==e.messageId,t)}return Promise.resolve(t)}function Ae(e,t){var n=e.flags&o.FLAG_OUTBOUND,r=e.peerId;if(Object(l.isTabLoaded)(t,r)){var a=t.tabs[r];if(a.deletedDialog=!1,!t.msg_local_ids_sort&&e.local?t.msg_local_ids_sort={[e.messageId]:0}:e.local&&(t.msg_local_ids_sort[e.messageId]=Object.keys(t.msg_local_ids_sort).length),n||Object(l.tabIsMessageRequest)(a)?a.unread=0:(a.lastmsg===e.messageId&&a.unread?Ne(t,1,e.peerId):(!a.unread&&Ne(t,1,e.peerId),a.unread++),O.casperMessagesStore.has(e.messageId)&&!Object(f.isCasperChatTab)(a)&&(a.expiring_messages||(a.expiring_messages=[]),a.expiring_messages.push(e.messageId)),Object(g.hasUserMentions)(e,t.id)&&(a.mentions||(a.mentions=[]),a.mentions.push(e.messageId)),ke(e.peerId,t)),Object(l.isFullyLoadedTab)(t,r)){var i=Object(g.isMessageToBlockedCommunity)(a,e),s=i||0===a.offset;i&&(a.blocked_community=0),a.skipped>0&&a.skipped++,a.offset++,a.msgs[e.messageId]=extend(!0,{},e);var u=re(a.history);a.history=Object(l.appendToHistory)(t,e,u,!0,!0,!0),s&&_e(t)}if(a.typing){var c=a.typing.userIds.indexOf(e.userId);c>=0&&a.typing.userIds.splice(c,1)}return a.lastmsg=e.messageId,a.lastmsg_meta=e,Number.isInteger(e.messageId)&&e.messageId>(a.minor_sort_id||0)&&(a.minor_sort_id=e.messageId),ge(e.peerId,t),Se(t,a,!1,Ie.bind(null,r),Dn.bind(null,t)),Promise.resolve(t)}return se(r,0,0,0,t).then(t=>(Se(t,t.tabs[r],!1,Ie.bind(null,r),Dn.bind(null,t)),ge(e.peerId,t),n||ke(e.peerId,t),t))}function Ne(e,t,n){e.cur_unread_cnt||(e.cur_unread_cnt={}),-1===t&&delete e.cur_unread_cnt[n],e.unread_cnt+=t}function xe(e,t,n){var r=n.tabs[e];return r.expiring_messages&&(r.expiring_messages=r.expiring_messages.filter(t),r.expiring_messages.length||delete r.expiring_messages),n}function Re(e,t,n){var r=n.tabs[e];return r.mentions&&(r.mentions=r.mentions.filter(t),r.mentions.length||delete r.mentions),n}function Fe(e,t){var n=Object(f.getTab)(t,e.peerId);if(Object(l.isFullyLoadedTab)(t,e.peerId)){var r=n.unread;if(t=ye(t,e.peerId,e.upToId,0),null!==e.unread?n.unread=e.unread:n.unread=e.upToId>=n.lastmsg?0:Object(f.countUnread)(e.peerId,t)+(n.unread>0?+n.skipped:0),r>0&&!n.unread&&Ne(t,-1,e.peerId),!n.skipped){var a=re(n.history);n.history=Object(l.removewNewUnreadBarAndMerge)(t,a,e.peerId)}}else Object(l.isTabLoaded)(t,e.peerId)&&(t.tabs[e.peerId].unread>0&&Ne(t,-1,e.peerId),t.tabs[e.peerId].unread=0,t.tabs[e.peerId].in_up_to=e.upToId);return Object(l.isTabLoaded)(t,e.peerId)&&e.upToId>=n.lastmsg&&(t.dialog_tabs[d.FOLDER_UNREAD]=t.dialog_tabs[d.FOLDER_UNREAD].filter(t=>intval(t)!==e.peerId)),Object(l.isTabLoaded)(t,e.peerId)&&(xe(e.peerId,t=>t>e.upToId,t),Re(e.peerId,t=>t>e.upToId,t)),0!==t.unread_cnt||t.active_tab!==d.FOLDER_UNREAD||t.gid?Promise.resolve(t):En(d.FOLDER_ALL,t)}function He(e,t){var n=t.tabs[e.peerId];if(Object(l.isTabLoaded)(t,e.peerId)&&ye(t,e.peerId,e.upToId,o.FLAG_OUTBOUND),Object(l.isFullyLoadedTab)(t,e.peerId)){var r=re(n.history);n.history=Object(l.markMessagesAsRead)(t,e.peerId,r)}return Promise.resolve(t)}function Be(e,t,n,r,a){return a.text={},a.imQueue=e,a.imQueueResend=t,a.imQueueSet=n,a.imQueueComplete=r,Promise.resolve(a)}function Ye(e,t,n){function r(e,t){return{id:e.messageId,text:e.text,date:e.date,kludges:e.kludges,authorName:t}}if(1===e.length){var a=e[0],o=Object(f.getMessage)(n,t,a),i=Object(f.getAuthorFullName)(n,t,a);return!1===i?n.set(Vt.bind(null,{[t]:[o.userId]})).then(n=>{var i=Object(f.getAuthorFullName)(n,t,a);return{msgIds:e,object:r(o,i)}}):Promise.resolve({msgIds:e,object:r(o,i)})}return Promise.resolve({msgIds:e})}function Ge(e,t){Object(l.normalizeTabsGotFromServer)(t,e);var n=t.tabs[t.peer];return t.tabs=Object.keys(e).reduce((n,r)=>{var a=t.tabs[r]?t.tabs[r].msgs:{},o=extend({},a||{},e[r].msgs||{});return n[r]=extend(t.tabs[r]||{},e[r]),o&&(n[r].msgs=o),e[r].lastmsg||(n[r].lastmsg=!1),n},t.tabs),n&&(t.tabs[t.peer]=n),Promise.resolve(t)}function Ue(e,t,n,r){var a=Object(f.getTab)(r,e);if(a&&a.last_seen&&a.last_seen.can_see){var o=!1!==t?mobPlatforms[t]?1:0:a.last_seen.mobile;a.online=t,a.last_seen={platform:t,time:n||a.last_seen.time,mobile:o,can_see:a.last_seen.can_see}}return Promise.resolve(r)}function qe(e,t,n){var r=Object(f.getTab)(n,e.peerId);return r&&(e.ts=Date.now()/1e3,r.activity||(r.activity={}),r.activity[t]=e,r.typing===C&&(r.typing=e)),Promise.resolve(n)}function We(e,t){var n=Object(f.getTab)(t,e.peerId),r=Object(g.isAudioMsg)(e)?"audiomessage":"typing";return n&&n.activity&&n.activity[r]&&(n.activity[r].userIds=n.activity[r].userIds.filter(t=>t!==e.userId)),Promise.resolve(t)}function ze(e,t,n){var r=e.peerId;return Object(i.pause)(D+2).then(()=>{if(Object(l.isTabLoaded)(n,r)){var e=n.tabs[r];if((e.activity||{})[t])Date.now()-1e3*e.activity[t].ts>=1e3*D&&(delete e.activity[t],0===Object.keys(e.activity)&&delete e.activity);if(e.typing)Date.now()-1e3*e.typing.ts>=1e3*D&&(e.typing=void 0)}return n})}function Ve(e){var t={},n=e.find(e=>"poll"===e[0]);if(n){var r=T(n,3)[2];Object.assign(t,r)}return t}var $e=function(e,t,n,a){var o=Date.now()+rand(0,100).toFixed(0),i=a.ref_id,u=a.ref_source;a.ref_source=void 0,a.ref_id=void 0,(u||i)&&(k({ref_source:null,ref:null}),I()),Object(b.statlogsSendingQueueLength)(a);var c=t.attaches.length>0,l=Object(b.statlogsSendingTime)(a,"send","server",c),d=Object.assign({act:"a_send",to:e,hash:n.hash,ref_source:u,ref:i,msg:t.message,payload:t.payload,media:Object(s.convertAttachesToPhpMedia)(t.attaches),guid:o,share_url:t.share_url,cancelled_shares:t.cancelled_shares,random_id:t.rid,gid:n.hidegid?void 0:a.gid,entrypoint:a.currentEntryPoint||"",sticker_referrer:t.sticker_referrer},n.external,Ve(t.attaches));return Object(r.post)(E,d,2e4).then(e=>{var t=T(e,1)[0];return l(),a.version!==t.version&&nav.reload({force:!0}),a.currentEntryPoint="",a}).catch(e=>{throw Object(b.statlogsSendingError)(a,e,"send","server_send"),e})},Ke=te((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,a=r.tabs[e];return $e(e,t,w({hash:a.hash},n),r)})),Xe=te((function(e,t,n){var a=t.attaches.length>0,o=Object(b.statlogsSendingTime)(n,"edit","server",a);return Object(r.post)(E,Object.assign({act:"a_edit_message",hash:e.hash,id:t.messageId,peerId:e.peerId,gid:n.gid,msg:t.origText,media:Object(s.convertAttachesToPhpMedia)(t.attaches),share_url:t.share_url,cancelled_shares:t.cancelled_shares},Ve(t.attaches)),2e4).then(e=>{T(e,1)[0];return o(),n}).catch(e=>{throw Object(b.statlogsSendingError)(n,e,"edit","server_send"),e})}));function Qe(e,t){if(t.selectedMessages||(t.selectedMessages=[]),1===e.length&&inArray(e[0],t.selectedMessages))t.selectedMessages=t.selectedMessages.filter(t=>t!==e[0]);else{var n=t.selectedMessages.concat(e);t.selectedMessages=Object(u.arrayUnique)(n).sort((e,t)=>e-t)}return Promise.resolve(t)}function Ze(e){return e.selectedMessages=[],Promise.resolve(e)}function Je(e){return e.selectedMessages=[],Promise.resolve(e)}function et(e,t){if(Object(l.isFullyLoadedTab)(t,e.peerId)){var n=t.tabs[e.peerId],r=t.imQueue(e.peerId).filter(t=>t.failed&&t.rid!==e.randomId);t.imQueueSet(e.peerId,r),t.imQueueComplete(e.peerId,e.randomId),n.lastmsg_meta=e,n.lastmsg=e.messageId,Number.isInteger(e.messageId)&&e.messageId>n.minor_sort_id&&(n.minor_sort_id=e.messageId),n.msgs["rid"+e.randomId]&&(n.msgs[e.messageId]=e,delete n.msgs["rid"+e.randomId]),n.history=Object(l.replaceMessageAttrs)(t,re(n.history),e)}return Promise.resolve(t)}function tt(e,t){return Promise.resolve()}function nt(e,t){var n=Object(b.statlogsSendingTime)(t,"unknown","attach"),a={act:"a_get_media",id:e.messageId,gid:t.gid};return Object(i.retryFn)(r.post,3,e=>e*e)(E,a).then(r=>(n(),rt(e,r,t))).catch(n=>(Object(b.statlogsSendingError)(t,n,"unknown","server_load_attach"),rt(e,null,t)))}function rt(e,t,n){var r=n.tabs[e.peerId],a=t[2];return r.mediacontent||(r.mediacontent={}),r.mediacontent[e.messageId]=t||[getTemplate("im_retry_link")],a&&(a.no_forward&&(r.msgs[e.messageId].kludges.no_forward=!0),a.no_pin&&(r.msgs[e.messageId].kludges.no_pin=!0)),at(e,n)}function at(e,t){var n=t.tabs[e.peerId];return n.history=Object(l.replaceAttaches)(re(n.history),e,t),Promise.resolve(t)}function ot(e,t,n){var r=Object(l.dayFromVal)(t),a=n.tabs[e];return a.searchDay=r,a.searchOffset=0,a.searchAllLoaded=!1,a.searchMsgs=[],Promise.resolve(n)}function it(e,t,n){return n.tabs[t].searchText=e,wt(t,n),n}function st(e,t,n){if(t){var r=n.tabs[t];r.searchText=e,r.searchOffset=0,r.searchAllLoaded=!1}else n.searchText=e,n.searchOffset=0,n.searchAllLoaded=!1;return Promise.resolve(n)}function ut(e,t,n,a,o){return Object(r.post)(E,{act:"a_hints",str:e,gid:a.hidegid?0:o.gid,query:n,peerIds:t.join(",")}).then(t=>{var n=T(t,3),r=n[0],a=n[1];if(oe(n[2],o),a.forEach(e=>Object(h.oCacheAdd)(o,e)),Ge(r,o),e){var i=r&&Object.keys(r).length;Object(y.saveSearchAttemptStats)(y.serviceMessages,0,i,e)}return Object.keys(r).sort((e,t)=>r[e].order-r[t].order).map(e=>r[e])})}function ct(e,t,n,r){return ut(e,t,n,{},r).then(e=>e.map(e=>({peerId:e.peerId,name:e.tab,photo:e.photo,online:e.online,is_friend:"friends"===n})))}function lt(e){var t={peerId:e[0],name:e[1],tab:e[1],photo:e[2],href:e[3],online:e[4],is_friend:e[5],local_index:!0};return e[6]&&(t.data={flags:e[6]}),t}function dt(e){return(t,n)=>e(n).then(e=>{var r=(t?e.search(t):e.list).map(lt);return n.mapped_index||(n.mapped_index={}),r.forEach(e=>{n.mapped_index[e.peerId]=e}),r})}var ft=dt(e=>e.topConvTree),gt=dt(e=>e.imTopConvTree),ht=dt(e=>e.hintsTree);function pt(e,t){var n,a,o;t.topConvTree=new Promise(e=>{n=e}),t.hintsTree=new Promise(e=>{a=e}),t.imTopConvTree=new Promise(e=>{o=e});var s=e.select(c.RECENT_SEARCH_OP);return Object(i.retryFn)(r.post,1,()=>4)(E,{act:"a_dialogs_preload",rs:s.join(","),gid:t.gid}).catch(e=>[[],[],[]]).then(e=>{var r=T(e,4),i=r[0],s=r[1],u=r[2],c=r[3];return t.popular_sugg=u,new vkIndexer(i,e=>e[1],n),new vkIndexer(s,e=>e[1],a),c&&c.length>0?new vkIndexer(c,e=>e[1],o):o(),t})}function mt(e){var t,n,a=e.active_tab,o=e.dialog_tabs[a];return o.length>0?o.forEach(r=>{var a=e.tabs[r],o=a.minor_sort_id,i=a.major_sort_id;void 0===t||t>i?(t=i,n=o):t===i&&n>o&&(n=o)}):(t=0,n=0),Object(r.post)(E,{act:"a_get_dialogs",start_message_id:n,major_sort_id:t,tab:a,gid:e.gid}).then(t=>{var n=T(t,4),r=n[0],i=n[1],s=n[2],u=n[3];return s.forEach(t=>Object(h.oCacheAdd)(e,t)),oe(u,e),Ge(i,e),e.dialog_tabs[a]=o.concat(Object.keys(i).map(intval)),e.dialog_tabs_all[a]=!r.has_more,Promise.resolve(e)})}var _t=te((function(e,t){return Object(r.post)(E,{act:"a_search",q:e,from:"all",gid:t.gid,hash:t.writeHash,offset:t.searchOffset||0}).then(n=>{var r=T(n,5),a=r[0],o=r[1],i=r[2],s=r[3],u=r[4];return o.forEach(e=>Object(h.oCacheAdd)(t,e)),Object(l.normalizeTabsGotFromServer)(t,a),e===t.searchText&&(t.searchOffset=s,t.searchAllLoaded=u),Object.keys(a).filter(e=>!t.tabs[e]).forEach(e=>{t.tabs[e]=a[e]}),[a,i]})}));function bt(e,t){return t.tabs[e].searchAllLoaded}function vt(e,t){return!(t.peer!==e||!Object(l.isFullyLoadedTab)(t,e))&&t.tabs[e].inplaceSearch}function yt(e,t){if(Object(l.isFullyLoadedTab)(t,e)){var n=t.tabs[e];delete n.inplaceSearch,delete n.searchOffset,delete n.searchAllLoaded,delete n.searchText,delete n.searchDay,delete n.searchMsgs,k({st:""}),I()}return Promise.resolve(t)}function Ot(e,t){if(Object(l.isFullyLoadedTab)(t,e)){var n=t.tabs[e];delete n.searchDay,n.searchOffset=0,n.searchAllLoaded=!1,n.searchMsgs=[]}return Promise.resolve(t)}function wt(e,t){return t.tabs[e].inplaceSearch=!0,Promise.resolve(t)}var Tt=te((function(e,t){var n=t.tabs[e],a="";if(wt(e,t),n.searchDay&&(a="day:"+n.searchDay),!a&&!n.searchText)return Promise.reject();var o=`in:${e} ${a} ${n.searchText||""}`;return k({st:n.searchText}),I(),Object(r.post)(E,{act:"a_search",q:o,from:"in",gid:t.gid,hash:t.writeHash,offset:n.searchOffset||0}).then(e=>{var t=T(e,4),r=t[0],a=t[1],o=t[2],i=t[3];return n.searchOffset=a,n.searchAllLoaded=o,n.searchMsgs=(n.searchMsgs||[]).concat(i),r})}));function jt(e){return Object(r.post)(E,{act:"a_important",offset:e,part:e>0})}function Et(e,t){var n=Object(f.getTab)(e,t);return Object(r.post)(E,{act:"a_load_lastmsg",peerId:t,gid:e.get().gid}).then(r=>{var a=T(r,4),o=a[0],i=a[1],s=a[2],u=a[3],c=intval(o[0]);n.lastmsg=c||!1,n.lastmsg_meta=o,(!Object(f.isCasperChat)(e,t)||c>n.minor_sort_id)&&(n.minor_sort_id=c);var l=T(i,3);n.unread=l[0],n.in_up_to=l[1],n.out_up_to=l[2],s?n.mentions=s:n.mentions&&delete n.mentions,u?n.expiring_messages=u:n.expiring_messages&&delete n.expiring_messages,n.unread||(e.get().dialog_tabs[d.FOLDER_UNREAD]=e.get().dialog_tabs[d.FOLDER_UNREAD].filter(e=>e!=t)),Se(e.get(),n,!1,Ie.bind(null,t),Dn.bind(null,e.get()))})}function Dt(e,t,n){n.tabs[e].unread-=t.length;var r=t.reduce((e,t)=>(e[t]=!0,e),{});return xe(e,e=>!r[e],n),Re(e,e=>!r[e],n),Promise.resolve(n)}function Ct(e,t,n){if(Object(l.isFullyLoadedTab)(n,t)){var r=n.tabs[t];r.deleted=r.deleted?r.deleted.concat(e):e}return Promise.resolve(n)}function St(e,t,n){if(Object(l.isFullyLoadedTab)(n,t)){var r=n.tabs[t];if(r.history=Object(l.removeMessages)(e,re(r.history)),r.offset-=e.filter(e=>r.msgs[e]).length,e.forEach(e=>delete r.msgs[e]),e.forEach(e=>{var t=(n.selectedMessages||[]).indexOf(e);-1!=t&&n.selectedMessages.splice(t,1)}),r.inplaceSearch){var a=e.reduce((e,t)=>(e[t]=!0,e),{});r.searchMsgs=r.searchMsgs.filter(e=>!a[e]),r.searchOffset=r.searchMsgs.length}}return Promise.resolve(n)}var Mt=te((function(e,t,n,a,o){return Object(r.post)(E,{act:"a_mark",peer:t,hash:n||o.tabs[t].hash,gid:o.gid,msgs_ids:e.join(","),mark:a})}));function kt(e,t,n,r){if(Object(l.isFullyLoadedTab)(r,t)){var a=r.tabs[t];a.deleted=a.deleted?a.deleted.concat(e):e,a.history=Object(l.removeMessagesWithRestore)(e,t,n,re(a.history)),a.offset-=e.filter(e=>a.msgs[e]).length}return Promise.resolve(r)}function It(e,t,n){if(Object(l.isFullyLoadedTab)(n,t)){var r=n.tabs[t];r.deleted&&(r.deleted=r.deleted.filter(t=>t!==e)),r.history=Object(l.restoreMessage)(e,t,re(r.history)),r.offset++}return Promise.resolve(n)}function Pt(e,t,n,a){return Object(r.post)(E,{act:"a_restore",id:e,peer:t,hash:n,gid:a})}var Lt=te((function(e,t,n){return Object(l.tabIsMessageRequest)(n.tabs[e])?Promise.resolve(n):(n.tabs[e].lastTyping=Date.now(),Object(r.post)(E,{act:"a_activity",type:t,peer:e,gid:n.gid,hash:n.tabs[e].hash}).then(()=>n,()=>n))})),At=te((e,t)=>Object(r.post)(E,{act:"a_accept_message_request",peer_id:e,hash:t.tabs[e].hash}).then(()=>{var n=t.tabs[e];return n.is_message_request=!1,n.folders=Object(f.removeMessageRequestFolderFlags)(n.folders),t})),Nt=te((e,t)=>Object(r.post)(E,{act:"a_reject_message_request",peer_id:e,hash:t.tabs[e].hash}).then(()=>(Se(t,t.tabs[e],!0,t=>t.filter(t=>t!==Number(e))),Fn(t.tabbedPeers.filter(t=>t.peer!==e),!0,t),t))),xt=te((e,t,n)=>Object(r.post)(E,{act:"a_cancel_message_request",peer_id:e,contact_id:t,hash:n.tabs[e].hash}).then(()=>{var r=n.tabs[e];return r&&r.invitedByMessageRequest&&(r.invitedByMessageRequest=r.invitedByMessageRequest.filter(e=>e.id!==t)),n})),Rt=te((function(e,t){return Lt(e,C,t)})),Ft=te((function(e,t){return Lt(e,S,t)}));function Ht(e,t,n,r){return t&&(r.pendingForward=null,e||(e={msgIds:[]}),t.addAttach(n?"reply":"mail",e.msgIds.join(";"),e.object||null)),Promise.resolve(r)}function Bt(e,t){return t.pendingForward=e,Promise.resolve(t)}function Yt(e,t,n){if(!Object(l.isTabLoaded)(n,e))return n;n.blockedFlagUpdates||(n.blockedFlagUpdates={}),n.blockedFlagUpdates[e]=!0;var r=n.tabs[e];return Se(n,r,!0,t=>t.filter(t=>t!==e)),r.unread>0&&!Object(l.tabIsMessageRequest)(r)&&Ne(n,-1,e),r.deletedDialog=!0,Fn(n.tabbedPeers.filter(t=>t.peer!==e),!0,n),t.then(t=>{var a=T(t,2);a[0],a[1];return delete n.blockedFlagUpdates[e],r.msgs=null,r.history=null,r.unread=0,r.lastmsg=!1,r.lastmsg_meta=null,r.minor_sort_id=0,n})}var Gt=te((function(e,t){return Yt(e,Object(r.post)("al_im.php",{act:"a_flush_history",id:e,from:"im",gid:t.gid,hash:t.tabs[e].hash}),t)})),Ut=te((function(e,t,n){return Object(r.post)(E,{act:"a_set_chat_title",peer:e,new_title:t,gid:n.gid,hash:n.tabs[e].hash}).then(()=>(n.onUpdate&&n.onUpdate(),n))})),qt=te((function(e,t){return Object(r.post)(E,{act:"a_load_chat_info",peer:e,gid:t.gid,hash:t.tabs[e].hash}).then(n=>{var r=T(n,1)[0];return t.tabs[e]=extend(t.tabs[e],r),t})}));function Wt(e,t,n){var r=n.tabs[e];return r.memberIds=[].concat(r.memberIds,t).filter((e,t,n)=>n.indexOf(e)===t),r.membersCount=r.memberIds.length,Promise.resolve(n)}var zt=te((function(e,t,n,a){return Object(r.post)(E,{act:"a_add_chat_members",peer:e,new_peer:t.join(","),gid:a.gid,hash:a.tabs[e].hash,show_history:n?1:0}).then(e=>a)}));function Vt(e,t){if(isEmpty(e))return Promise.resolve(t);var n=Object.keys(e).map(t=>`${t}:${e[t].join(",")}`).join(";");return Object(r.post)(E,{act:"a_load_member",need:n,gid:t.gid}).then(e=>(T(e,1)[0].forEach(e=>Object(h.oCacheAdd)(t,e)),t))}function $t(e,t,n){var r={},a=n.get();function i(e,t){Object(l.isChatPeer)(e)&&t&&!Object(h.oCacheExists)(a,t)&&(r[e]?-1===r[e].indexOf(t)&&r[e].push(t):r[e]=[t])}var s=t.filter(e=>!Object(l.isTabLoaded)(a,e.peerId)).map(e=>e.peerId);t.forEach(e=>{i(e.peerId,e.userId)}),e.forEach(e=>{i(e.peerId,+e.kludges.source_mid||+e.kludges.from)});var u=t.filter(e=>e.flags&o.FLAG_OUTBOUND&&!e.local).map(e=>e.kludges.from_admin).filter(e=>e&&!a.admins[e]);return 0===Object.keys(r).length&&0===u.length&&0===s.length?Promise.resolve(a):{shouldLoad:Object.keys(r).length>0||u.length>0||s.length>0,needMembers:r,needAdminIds:u,needPeers:s}}function Kt(e,t,n){var r=e.needMembers,a=e.needAdminIds,o=e.needPeers;return t.pause(),Promise.all([Vt(r,n),Me(a,n),Promise.all(o.map(e=>se(e,0,0,0,n)))]).catch(()=>n).then(()=>t.resume()).then(()=>n)}var Xt=te((function(e,t){return e.kludges.source_act===l.CHAT_PHOTO_REMOVE?(delete t.tabs[e.peerId].photo,delete t.tabs[e.peerId].photoLarge,Promise.resolve(t)):(t.onUpdate&&t.onUpdate(),Object(r.post)(E,{act:"a_get_chat_photo",msg_id:e.messageId}).then(n=>{var r=T(n,2),a=r[0],o=r[1];t.chat_photo_msg=o;var i=t.tabs[e.peerId];if(t.tabs[e.peerId].photo=a[0],t.tabs[e.peerId].photoLarge=a[1],Object(l.isFullyLoadedTab)(t,e.peerId)){var s=e.kludges.source_act;i.history=Object(l.addChatPhotoToUpdate)(e,s,t,re(i.history))}return t}))}));function Qt(e,t,n,r){return t!==vk.id||Object(l.isTabLoaded)(r,n)&&r.peer==n&&(r=_e(r)),Promise.resolve(r)}var Zt=te((function(e,t){return Object(r.post)(E,{act:"a_leave_chat",chat:e-2e9,gid:t.gid,hash:t.tabs[e].hash}).then(Qt.bind(null,l.CHAT_KICK_USER,vk.id,e,t))})),Jt=te((function(e,t){return Object(r.post)(E,{act:"a_return_to_chat",chat:e-2e9,gid:t.gid,hash:t.tabs[e].hash}).then(Qt.bind(null,l.CHAT_INVITE_USER,vk.id,e,t))})),en=te((function(e,t,n,a){return Object(r.post)(E,{act:"a_mute",peer:e,hash:a.tabs[e].hash,gid:a.gid,value:Number(t),until:n}).then(()=>{var n=t?"mute":"unmute";return window.Notifier&&Notifier.lcSend("im",{act:n,peer:e}),a}).then(nn.bind(null,e,t))})),tn=te((function(e,t,n){return Object(r.post)(E,{act:"a_mute_mentions",peer:e,hash:n.tabs[e].hash,gid:n.gid,value:Number(t)}).then(()=>n)}));function nn(e,t,n){var r=n.mutedPeers.filter(t=>t!==e);return t&&r.push(e),n.mutedPeers=r,cur.mutedPeers=n.mutedPeers,_e(n)}function rn(e,t){return t.stack=e,Promise.resolve(t)}var an=te((function(e,t,n,a){return on(e,n,t,a),Object(r.post)(E,{act:"a_mark_important",ids:e,val:t?1:0,from:"im",gid:a.gid,peer:n,hash:a.tabs[n].hash}).then(()=>a)}));function on(e,t,n,r){if(Object(l.isFullyLoadedTab)(r,t)){var a=r.tabs[t];e.filter(e=>a.msgs[e]).forEach(e=>{var i=Object(f.getMessage)(r,t,e),s=n?i.flags|o.FLAG_IMPORTANT:i.flags&~o.FLAG_IMPORTANT;i.flags=s,a.msgs[e]=i,a.history=Object(l.updateStar)(e,n,re(a.history))})}return Promise.resolve(r)}function sn(e,t,n){return n.importants||(n.importants={}),(n.importants[t]||0)!==e&&(n.important_cnt+=e,n.importants[t]=e),Promise.resolve(n)}function un(e,t){return Object(r.post)(E,{act:"a_spam",offset:e,gid:t,part:e>0})}function cn(e,t){return Object(r.post)(E,{act:"a_flush_spam",gid:t,hash:e})}function ln(e,t,n){return n.creationType=e,n.creationFilter=t,Promise.resolve(n)}function dn(e,t){return Object(r.post)(E,{act:"a_owner_photo",photo:JSON.parse(e).data[0],peer:t})}function fn(e,t){return t.next_chat_avatar=e,Promise.resolve(t)}function gn(e,t,n){return Object(r.post)("al_page.php",{act:"owner_photo_save",peer:e,_query:t,gid:n.gid}).then(e=>n)}var hn=te((function(e,t,n,a,o){return o.creating=!0,o.longpoll.pause(),Object(r.post)(E,{act:"a_multi_start",hash:o.writeHash,peers:t.join(","),title:n,flags:a}).then(e=>{var t=T(e,1)[0];return o.next_peer=t.peerId,o.tabs[t.peerId]=t,Se(o,t,!1,e=>[t.peerId].concat(e)),o.longpoll.resume(),o}).then(t=>e?gn(t.next_peer,e,t):t).then(e=>(e.creating=!1,e)).catch(e=>{throw o.creating=!1,o.longpoll.resume(),e})})),pn=te((function(e,t,n){return n.creating=!0,Object(r.post)(E,{act:"a_multi_start",hash:n.writeHash,peers:[],title:t,gid:n.gid,is_community_chat:1}).then(t=>{var r=T(t,1)[0].peer_id;if(!r)throw new Error("No peer_id");return e?gn(r,e,n):n}).then(e=>(e.creating=!1,e)).catch(e=>{throw n.creating=!1,e})}));function mn(e){var t;e.resync_in_process=new Promise(e=>{t=e});var n=Object.keys(e.tabs).length,a=e.active_tab;return Object(r.post)(E,{act:"a_resync",sel:e.peer,gid:e.gid,loaded:n,tab:a,add_peers:e.tabbedPeers.map(e=>e.peer).join(",")}).then(n=>{var r=T(n,5),o=r[0],i=r[1],s=r[2],c=r[3],f=r[4];i.forEach(t=>Object(h.oCacheAdd)(e,t)),Object(l.normalizeTabsGotFromServer)(e,o),s.user_unread&&handlePageCount("msg",s.user_unread),Object(u.lplog)("Resync success","success");var g,p=e.peer;if(Object(l.isReservedPeer)(p))g=Promise.resolve(!1);else{var m={tabs:{[p]:e.tabs[p]},oCache:{}};g=Ge({[p]:o[p]},m)}return g.then(n=>{e.tabs=o,e.admins=extend(e.admins,c),n&&(e.tabs[p]=n.tabs[p],e.tabs[p].history=Object(l.restoreQueue)(p,e,re(e.tabs[p].history))),e.loadingDialogs=!1,e.mutedPeers=s.mutedPeers,e.lastDialogsOptions={has_more:s.has_more},e.dialog_tab_cts=Object.assign({},s.folder_cts,{[d.FOLDER_MESSAGE_REQUEST]:e.dialog_tab_cts[d.FOLDER_MESSAGE_REQUEST]}),e.dialog_tabs[a]=f.map(intval);var r=e.dialog_tabs[a].map(t=>e.tabs[t]);return Object.keys(e.dialog_tabs).filter(e=>e!=a).forEach(t=>{a==d.FOLDER_ALL?e.dialog_tabs[t]=r.filter(jn(t)).map(e=>e.peerId):e.dialog_tabs[t]=[]}),delete e.resync_in_process,setTimeout(t.bind(null,!0),0),yn(intval(s.unread),e)})}).catch(t=>(Object(u.lplog)("Resync error: "+t.message+" "+t.stack,"error"),Object(i.pause)(2).then(mn.bind(null,e))))}function _n(e,t){return t.lockedSending=e,Promise.resolve(t)}function bn(e,t,n){return e&&!n.delayed_message?(n.delayed_message=e,n.delayed_ts=t):e||(n.delayed_message=e,n.delayed_ts=t),Promise.resolve(n)}function vn(e){return!!e.textMediaSelector.urlAttachmentLoading||!!(window.Upload&&Upload.options&&Upload.isSomethingUploading)&&Object.keys(Upload.options).filter(e=>Upload.isSomethingUploading(e)).length>0}function yn(e,t){return t.unread_cnt=e,t.dialog_tab_cts[d.FOLDER_UNREAD]=e,Promise.resolve(t)}function On(e,t){return t.ctrl_submit=!!e,Object(r.post)(E,{act:"a_save_ctrl_submit",to:t.peer,hash:t.tabs[t.peer].hash,value:e?1:0}).then(e=>t)}function wn(e,t,n){n.cur_unread_cnt||(n.cur_unread_cnt={}),t&&!inArray(e,n.mutedPeers)&&(n.cur_unread_cnt[e]=!0);var r=document.title,a=window.devicePixelRatio>=2?"_2x":"";if(t&&!n.update_title_to){var o=function(e,t,n){return function(){n.update_old_title=e;var r=Object.keys(n.cur_unread_cnt).length;if(0===r)return Object(v.setDocumentTitle)(e||document.title),setFavIcon("/images/icons/favicons/fav_im"+t+".ico"),clearInterval(n.update_title_to),void(n.update_title_to=!1);e?(Object(v.setDocumentTitle)(e),setFavIcon("/images/icons/favicons/fav_im"+t+".ico"),e=!1):(e=document.title,setFavIcon("/images/icons/favicons/fav_im"+(r>9?10:r)+t+".ico"),Object(v.setDocumentTitle)(winToUtf(getLang("mail_im_new_messages",r))))}}(r,a,n);n.update_title_to=setInterval(o,1e3),o()}else!t&&n.update_old_title&&(Object(v.setDocumentTitle)(n.update_old_title),n.cur_unread_cnt={},r=!1,n.update_old_title=!1,setFavIcon("/images/icons/favicons/fav_im"+a+".ico"),clearInterval(n.update_title_to),n.update_title_to=!1);return Promise.resolve(n)}function Tn(e,t,n,r,a){return Object(l.isFullyLoadedTab)(a,e)&&(a.tabs[e].scrollTop=intval(t),a.tabs[e].scrollBottom=intval(n),a.tabs[e].contHeight=intval(r)),Promise.resolve(a)}function jn(e){return e===d.FOLDER_ALL?e=>!Object(l.tabIsMessageRequest)(e):e===d.FOLDER_UNREAD?e=>!Object(l.tabIsMessageRequest)(e)&&(e.unread>0||Object(f.isTabMarkedUnread)(e)):e===d.FOLDER_MESSAGE_REQUEST?e=>Object(l.tabIsMessageRequest)(e):t=>t.folders&d.FOLDER_MASKS[e]}function En(e,t){t.active_tab=e,Object(a.updateLocation)({tab:e===d.FOLDER_ALL?null:e});var n=[];if(e!==d.FOLDER_ALL&&!Object(l.isReversedDialogs)(t)){var r=t.dialog_tabs[e];n=t.dialog_tabs[d.FOLDER_ALL].map(e=>t.tabs[e]).filter(jn(e)).map(e=>e.peerId),t.dialog_tabs[e]=r.length>=n.length?r:n}return Promise.resolve(t)}function Dn(e,t,n,r){var a=e.dialog_tabs_all;return!(!a[d.FOLDER_ALL]&&!a[t])||(!!n.includes(r.peerId)||("r"===r.lastmsg[0]||n.map(t=>e.tabs[t.toString()]).filter(t=>Object(l.isReversedDialogs)(e)?t.minor_sort_id>r.minor_sort_id:t.minor_sort_id<r.minor_sort_id).length>0))}function Cn(e,t,n,r,a,i){if(Object(l.isTabLoaded)(i,e)&&!a){var s=i.tabs[e];return n===o.REPLACE_DIRECTORIES&&(t^=s.folders),function(e,t,n){return!(e===o.SET_DIRECTORIES&&n.folders&t)&&(!!(e!==o.RESET_DIRECTORIES||n.folders&t)&&!Object(l.tabIsMessageRequest)(n))}(n,t,s)&&Object.keys(d.FOLDER_MASKS).filter(e=>d.FOLDER_MASKS[e]&t).forEach(e=>{i.dialog_tab_cts[e]+=function(e,t,n){return t!==o.RESET_DIRECTORIES||e.folders&d.FOLDER_MASKS[n]?t===o.REPLACE_DIRECTORIES?e.folders&d.FOLDER_MASKS[n]?-1:1:t===o.SET_DIRECTORIES?1:-1:0}(s,n,e)}),n===o.SET_DIRECTORIES?i.tabs[e].folders|=t:n===o.RESET_DIRECTORIES?i.tabs[e].folders&=~t:i.tabs[e].folders=t^=s.folders,Se(i,i.tabs[e],!0,(t,n)=>t.concat([e]).map(e=>i.tabs[e]).filter(jn(n)).map(e=>e.peerId),Dn.bind(null,i)),Promise.resolve(i)}return se(e,0,0,0,i).then(Cn.bind(null,e,t,n,null,!1,i))}var Sn=te((function(e,t){var n=d.FOLDER_MASKS[d.FOLDER_IMPORTANT],a=t.tabs[e].folders&n,i=a?o.resetDirectoriesEvent:o.setDirectoriesEvent;return t.longpoll.push([i([0,e,n,!0])]),Object(r.post)(E,{act:"a_dialog_star",val:a?0:1,peer:e,hash:t.tabs[e].hash,gid:t.gid}).then(()=>t)})),Mn=te((function(e,t,n){var a=d.FOLDER_MASKS[d.FOLDER_UNRESPOND];return n.longpoll.push([o.resetDirectoriesEvent([0,e,a,!0]),o.readInboundEvent([6,e,t,null])]),Object(r.post)(E,{act:"a_mark_answered",peer:e,lastmsg:t,hash:n.tabs[e].hash,gid:n.gid}).then(()=>n)})),kn=te((e,t)=>(t.longpoll.push([o.resetPeer(),o.setDirectoriesEvent([0,e,d.FOLDER_MASKS[d.FOLDER_MARKED_UNREAD],!0])]),Object(r.post)(E,{act:"a_mark_conversation_as_unread",peer_id:e,hash:t.tabs[e].hash,gid:t.gid}))),In=te((e,t)=>{t.longpoll.push([o.resetDirectoriesEvent([0,e,d.FOLDER_MASKS[d.FOLDER_MARKED_UNREAD],!0])]);var n=t.tabs[e];return Object(r.post)(E,{peer:e,ids:n.lastmsg?[n.lastmsg]:[],mark_conversation_as_read:!0,hash:n.hash,act:"a_mark_read",gid:t.gid}).then(()=>t)});function Pn(e){return Object(r.post)(E,{act:"a_get_mutex_key",gid:e})}function Ln(e,t){return oe({[e]:{free:!0}},t),Object(r.post)(E,{act:"a_block_release",peer:e,gid:t.gid}).then(()=>t)}function An(e,t){var n=ls.get("comm_mute_"+t.gid)?1:0;return e&&(n^=1),ls.set("comm_mute_"+t.gid,n),t.mute=n,Promise.resolve(t)}var Nn=te((function(e,t){return Se(t,t.tabs[e],!0,t=>t.filter(t=>t!==e)),t.tabs[e].deletedDialog=!0,Object(r.post)(E,{act:"a_delete_dialog",peer:e,gid:t.gid,hash:t.tabs[e].hash}).then(n=>(n[0]?(Fn(t.tabbedPeers.filter(t=>t.peer!==e),!0,t),t.tabs[e].unread=0,t.tabs[e].lastmsg=!1,t.tabs[e].lastmsg_meta=null):(t.tabs[e].deletedDialog=!1,Se(t,t.tabs[e],!1,Ie.bind(null,e),Dn.bind(null,t))),n))}));function xn(e,t,n,a){return Object(r.post)(E,{act:"a_restore_dialog",hash:t,gid:a.gid,spam:n?1:0,peer:e}).then(t=>(a.tabs[e].deletedDialog=!1,Se(a,a.tabs[e],!1,t=>[e].concat(t)),a.tabs[e].unread=t,a))}function Rn(e,t,n){return Object(r.post)(E,{act:"a_spam_dialog",peer:e,gid:n.gid,hash:t})}function Fn(e,t,n){return n.tabbedPeers=e,Object(l.isClassicInterface)(n)&&(k({peers:n.tabbedPeers.filter(e=>{var t=e.peer,r=e.type;return t!==n.peer&&"perm"===r}).map(e=>Object(l.getBareTab)(e.peer,n)).filter(e=>!e.deletedDialog).map(e=>e.peerId).map(l.convertPeerToUrl).join("_"),to:""}),t&&I()),Promise.resolve(n)}function Hn(e){return!e.peer||(vt(e.peer,e)?bt(e.peer,e):!!Object(l.isFullyLoadedTab)(e,e.peer)&&e.tabs[e.peer].allShown)}function Bn(e,t){var n=t.tabs[e];return Object(l.isFullyLoadedTab)(t,e)&&(n.skipped=null,n.msgs=null,n.offset=null,n.allShown=null,n.history=null),Promise.resolve(t)}function Yn(e,t){var n=t.tabs[e];return Object(l.isFullyLoadedTab)(t,e)&&(n.history=ae(n.history)),Promise.resolve(t)}function Gn(e,t){return t.go_to_end_visible=e,Promise.resolve(t)}function Un(e,t){return t.go_to_mentions_visible=e,Promise.resolve(t)}function qn(e,t,n){if(!Object(l.isCommunityPeer)(t))return Promise.resolve(n);var a=Object(f.getTab)(n,t);return a.blocked_community=!e,!1===e&&(a.can_send_notify=!1),Object(r.post)(E,{act:"a_toggle_community",peer_id:t,hash:a.hash,state:e?1:0}).then(()=>_e(n))}function Wn(e,t){if(0!==t.peer&&Object(l.isFullyLoadedTab)(t,t.peer)){var n=Object(f.getTab)(t,t.peer);n.history=re(n.history),e(n.history)}return Promise.resolve(t)}function zn(e,t){if(0!==t.peer&&Object(l.isFullyLoadedTab)(t,t.peer)){var n=Object(f.getTab)(t,t.peer),r=geByClass1("_im_peer_history");r&&(n.history=re(r.innerHTML)),e(n.history)}return Promise.resolve(t)}function Vn(e){return e.audio_msg.isRecording?Promise.reject():(e.audio_msg.isRecording=!0,Promise.resolve(e))}function $n(e){return e.audio_msg.isRecording=!1,Promise.resolve(e)}function Kn(e,t){return t.voice_message_available=e,Promise.resolve(t)}function Xn(e){k({act:e?"create":null}),I()}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;k({q:e}),I()}function Zn(e){return void 0===e.chatResizeInitialized&&(e.chatResizeInitialized=!0,Object(l.getClassicChatHeight)()>window.clientHeight()&&Object(l.setClassicChatHeight)(0)),Promise.resolve(e)}var Jn=te((function(e,t,n){return Object(r.post)(E,{act:"a_join_chat",chat_id:e,hash:t,write_hash:n.writeHash}).then(e=>{var t=T(e,4),r=t[0],a=t[1],o=t[2],i=t[3];return o.forEach(e=>Object(h.oCacheAdd)(n,e)),n.tabs[r]=a,Se(n,a,!1,Ie.bind(null,r),Dn.bind(null,n)),n.admins=extend(n.admins,i),[r]})}));function er(e,t){return Object(r.post)(E,{act:"a_get_link",gid:t.gid,chat_id:e})}var tr=te((function(e,t){var n=t.tabs[e];return Object(r.post)(E,{act:"a_reset_link",chat_id:e-2e9,write_hash:t.writeHash,gid:t.gid}).then(e=>(n.inviteLink=e[0],e))}));function nr(e){return P({invite_chat_id:null,invite_hash:null,mr:null}),e.invitation=void 0,Promise.resolve(e)}function rr(e,t){var n=Object(u.arrayUnique)([e].concat(t.select(c.RECENT_SEARCH_OP))).slice(0,500);t.update(c.RECENT_SEARCH_OP,n)}function ar(e){e.update(c.RECENT_SEARCH_OP,[])}function or(e,t){var n=t.select(c.RECENT_SEARCH_OP).filter(t=>t!==e);return t.update(c.RECENT_SEARCH_OP,n),n}function ir(e,t,n){var r=n.tabs[t],a=Object(f.getMessage)(n,t,e);return Object(f.isChatActive)(r)&&!a.kludges.source_act&&(r.pinned=a),Promise.resolve(n)}function sr(e,t){return t.tabs[e].pinned=null,Promise.resolve(t)}var ur=te((function(e,t,n){var a=n.tabs[t];return Object(f.isChatActive)(a)?Object(r.post)(E,{act:"a_pin_message",msgid:e,chat:t,gid:n.gid,hash:n.tabs[t].hash}).then(e=>{var r=T(e,1)[0];return n.tabs[t]=Object.assign({},a,r),n}):Promise.resolve(n)})),cr=te((function(e,t){var n=t.tabs[e];return Object(f.isChatActive)(n)?Object(r.post)(E,{act:"a_unpin_message",chat:e,gid:t.gid,hash:t.tabs[e].hash}).then(r=>{var a=T(r,1)[0];return t.tabs[e]=Object.assign({},n,a),t}):Promise.resolve(t)})),lr=te((function(e,t){var n=t.tabs[e];return Object(r.post)(E,{act:"a_get_pinned_message",chat:e,gid:t.gid,hash:t.tabs[e].hash}).then(e=>{var r=T(e,1)[0];return n.pinned=r||null,t})})),dr=te((function(e,t,n){var a=n.tabs[e];return Object(r.post)(E,{act:"a_get_message_local_id",chat:e,chat_local_id:t,hash:a.hash})})),fr=te((function(e,t){var n=t.tabs[e];return n.membersLoaded?Promise.resolve(t):Object(r.post)(E,{act:"a_get_chat_members",chat:e,gid:t.gid,hash:n.hash}).then(e=>{var r=T(e,1),a=T(r[0],3),o=a[0],i=a[1],s=a[2];return n.memberIds=o,n.adminIds=i,s.forEach(e=>Object(h.oCacheAdd)(t,e)),n.membersLoaded=!0,t})})),gr=te((function(e,t){return Promise.all([fr(e,t),function(e,t){var n=t.tabs[e];return Object(r.post)(E,{act:"a_get_chat_details",chat:e,gid:t.gid,hash:n.hash}).then(e=>{var r=T(e,1)[0];return n.photoGrid=r.grid,n.photoLarge=r.photo,n.membersLastSeen=r.lastSeen||null,n.inviters=r.inviters,n.caccess=r.caccess,n.invitedByMe=r.invitedByMe||[],n.inviteLink=r.link||null,n.invitedByMessageRequest=r.invitedByMessageRequest,n.serverSettings=r.serverSettings||null,n.isDefaultPhotoOwner=r.isDefaultPhotoOwner||null,n.owner=r.owner||null,n.allowedUpdateFlags=r.allowedUpdateFlags,n.canInvite=r.canInvite||null,n.notifications=r.notifications,t})}(e,t)]).then(()=>t)})),hr=te((function(e,t,n){var a=n.tabs[e];return Object(r.post)(E,{act:"a_update_flags",chat:e,gid:n.gid,hash:a.hash,flags:t}).then(e=>(n.onUpdate&&n.onUpdate(),e))})),pr=te((function(e,t){var n=t.tabs[e];return Object(r.post)("al_page.php",{act:"owner_photo_remove",oid:e,gid:t.gid,hash:n.photoHash}).then(()=>(n.photo=null,n.photoLarge=null,t.onUpdate&&t.onUpdate(),t))}));function mr(e,t,n){var r=n.tabs[e];return r.memberIds=r.memberIds.filter(e=>e!==t),r.adminIds=r.adminIds.filter(e=>e!==t),r.membersCount=r.memberIds.length,Promise.resolve(n)}var _r=te((function(e,t,n){var a=n.tabs[e];return Object(r.post)(E,{act:"a_kick_user",chat:e,hash:a.hash,mid:t,gid:n.gid}).then(()=>(a.memberIds=a.memberIds.filter(e=>e!==t),a.adminIds=a.adminIds.filter(e=>e!==t),a.membersCount=a.memberIds.length,n))}));function br(e,t,n,r){var a=r.tabs[e];return a.adminIds=n?[].concat(a.adminIds,t).filter((e,t,n)=>n.indexOf(e)===t):a.adminIds.filter(e=>e!==t),Promise.resolve(r)}var vr=te((function(e,t,n,a){var o=a.tabs[e];return Object(r.post)(E,{act:"a_toggle_admin",chat:e,hash:o.hash,mid:t,is_admin:+n,gid:a.gid}).then(()=>br(e,t,n,a))}));function yr(e,t,n,r){var a=Object(f.getMessage)(e,n,t).userId;return Object(h.oCacheGet)(r,a)?Promise.resolve(r):Vt({[n]:[a]},r)}function Or(){ajax.post("al_im.php",{act:"a_hide_promo_tooltip"})}function wr(){cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()}var Tr=te((function(e,t){return t.tabs[e].top_banner=void 0,Object(r.post)(E,{act:"a_hide_banner",peer_id:e,gid:t.gid,hash:t.tabs[e].hash}).then(()=>t)})),jr=te((function(e,t,n){n.tabs[e].top_banner=void 0;var a=n.tabs[e];return Object(r.post)(E,{act:"a_callback_banner",peer_id:e,callback_data:t,hash:a.hash}).then(()=>n)}));function Er(e,t){return Object(r.post)(E,{act:"a_load_banner",peer_id:e,gid:t.gid}).then(n=>{var r=T(n,1)[0];return t.tabs[e].top_banner=r,t})}function Dr(e,t,n){return n.tabs[e].keyboard=t&&t.buttons?t:null,Sr(e,!1,!0,n)}function Cr(e,t){return Dr(e,null,t)}function Sr(e,t,n,r){return((r.tabs||{})[e]||{}).keyboard&&(r.tabs[e].keyboard.hide=t,n&&ls.set("is_keyboards_hide",Object.assign(ls.get("is_keyboards_hide")||{},{[e]:t}))),Promise.resolve(r)}var Mr=te((function(e,t){var n=t.tabs[e];return Object(r.post)(E,{act:"a_get_keyboard",peer_id:e,hash:n.hash}).then(n=>{var r=T(n,1)[0];return Dr(e,r,t)})}));function kr(e,t,n,a){var o=a.tabs[e];return o.caccess[t]=n,Object(r.post)(E,{act:"a_change_caccess",peer_id:e,member_id:t,hash:o.hash,access:n?1:0,gid:a.gid}).then(()=>a).catch(e=>{throw o.caccess[t]=!n,e})}var Ir=te((function(e,t){var n=t.tabs[t.peer];return Object(r.post)(E,{act:"a_delete_template",template_id:e,hash:n.hash,gid:t.gid,peer_id:t.peer}).then(()=>{var n=t.templates.find(t=>t.id===e);return n&&(n.deleted=!0),t})}));function Pr(e,t,n){var a=n.tabs[n.peer];return Object(r.post)(E,{act:"a_create_template",hash:a.hash,gid:n.gid,peer_id:n.peer,name:e,text:t}).then(e=>(n.templates.unshift(e[0]),n))}function Lr(e,t,n,a){var o=a.tabs[a.peer];return Object(r.post)(E,{act:"a_update_template",template_id:e,hash:o.hash,gid:a.gid,peer_id:a.peer,group_id:a.gid,name:t,text:n}).then(t=>{var n=a.templates.find(t=>t.id===e);return n&&Object.assign(n,t[0]),a})}function Ar(e,t){if(Object(l.isFullyLoadedTab)(t,e)){var n=Object(f.getTab)(t,e);n.allShown=!1,n.lastReset=Date.now()}return t}function Nr(e,t){var n=e.updateType,r=e.updateArg,a=0;return n===o.MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED&&(a=r===o.MESSAGE_REQUEST_STATUS_NEW?1:-1),n===o.MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED&&(a=-1),t.dialog_tab_cts[d.FOLDER_MESSAGE_REQUEST]+=a,Promise.resolve(t)}function xr(e,t,n){if(Object(l.isFullyLoadedTab)(n,e.peerId)){var r=Object(f.getTab)(n,e.peerId);r.history=Object(l.setCasperMessageExpiringStatusDOM)(r.history,t,e.messageId)}return Promise.resolve(n)}function Rr(e,t){return Promise.resolve().then(()=>{if(Object(l.isFullyLoadedTab)(t,e)){var n=Object(f.getTab)(t,e);Object.values(n.msgs).forEach(e=>{var t=Object(f.parserMessage)(e);Object(g.isCasperMessage)(t)&&!O.casperMessagesStore.has(t.messageId)&&O.casperMessagesStore.add(t)})}return Promise.resolve(t)})}var Fr=te((function(e,t,n,a,o,i){return Object(r.post)(E,{act:"a_peer_profile_toggle_tag",hash:i.manage_tags_hash,group_id:i.gid,peer_id:a,tag_id:e,action:n}).then(()=>{i.tabs[a].peer_tags=o;var n=i.peer_profile_tags.findIndex(t=>t.id===e);return t?i.peer_profile_tags[n].uses++:!t&&i.peer_profile_tags[n].uses>0&&i.peer_profile_tags[n].uses--,i})})),Hr=te((function(e,t){return Object(r.post)(E,{act:"a_peer_profile_manage_tags",hash:t.manage_tags_hash,group_id:t.gid,tags:JSON.stringify(e)}).then(e=>(t.peer_profile_tags=e[0].tags,t.peerProfileTagsChanged=!0,t))})),Br=te((function(e,t,n){return Object(r.post)(E,{act:"a_peer_profile_save_note",hash:n.manage_tags_hash,group_id:n.gid,peer_id:e,note:t}).then(()=>(n.tabs[e].peer_profile_info.note=t,n))}))},vkK6:function(e,t,n){"use strict";n.r(t),n.d(t,"getActionData",(function(){return a}));var r=n("ZD4m"),a=function(e){var t=Object(r.getJsonDataValue)(e,"data-action-params");if("object"==typeof t||null===t)return{actionParams:t}}},"wSs/":function(e,t,n){"use strict";n.r(t),n.d(t,"canMessageBeEdited",(function(){return u})),n.d(t,"convertEmojiHtmlToRegularText",(function(){return c})),n.d(t,"findLastMessageToEdit",(function(){return l})),n.d(t,"wasMessageReallyModified",(function(){return d})),n.d(t,"replaceMsgAfterEdit",(function(){return f}));n("Vd3H"),n("rGqo"),n("Btvt"),n("pIFo");var r=n("rHUl"),a=n("MhhX"),o=n("P13b"),i=n("rudk"),s=n("aong");function u(e,t){t=Object(r.parserMessage)(t);var n=Object(s.unpackStore)(e),i=vk.id==t.peerId&&!n.gid,u=n.pinMessageEditSettings,c=u.messageEditAllowedTime,l=u.pinEditDelayTime,d=u.isPinEditEnabled,f=Date.now()/1e3,g=Object(r.getPinnedMessage)(n),h=g&&g.messageId===t.messageId,p=t.kludges&&t.kludges.pinned_at,m=f-t.date>c,_=p&&f-p<l;if(333==t.peerId)return!1;if(!i&&!Object(a.isOut)(t))return!1;if(Object(a.isServiceMsg)(t))return!1;if(h&&m&&d){if(_)return!1}else if(m)return!1;return!(Object(a.isGift)(t)||Object(a.isSticker)(t)||Object(a.isAudioMsg)(t)||Object(a.isGraffiti)(t)||Object(a.isMoney)(t)||Object(a.isVKPay)(t)||Object(a.isCallMessage)(t))&&!Object(o.isAlreadyDeleted)(e,t.peerId,t.messageId)}function c(e){var t=document.createElement("div");return e=e.replace(/\[((id|club)\d+)\|(.+?)]/g,(function(){var e=arguments.length<=1?void 0:arguments[1],t=arguments.length<=3?void 0:arguments[3];return/^\@/.test(t)?t:`@${e} (${t})`})),t.innerHTML=e,Emoji.val(t)}function l(e,t){return+(t&&t.msgs?Object.keys(t.msgs):[]).filter(e=>e>0).sort((e,t)=>t-e).find(n=>u(e,t.msgs[n]))||null}function d(e,t,n){var r=Object(i.convertKludgesToAttaches)(t.kludges,t.messageId),a=n.dData.attaches;if(c(t.text)!==n.dData.txt||r.length!==a.length)return!0;for(var o=r.length;o--;){var s=r[o],u=a[o];if(s.id!=u.id||s.type!=u.type||"poll"==s.type&&u.object&&u.object.poll_is_edited)return!0}return!1}function f(e,t,n,r,a,i){t.origText=n,t.text=Object(o.replaceSpecialSymbols)(clean(n)).replace(/\n/gi,"<br>"),t.attaches=r,t.kludges.emoji=1,t.local=1,t.share_url=a,t.cancelled_shares=i,t.update_time=Math.floor(Date.now()/1e3),e.get().tabs[t.peerId].msgs[t.messageId]=t}},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},zTm1:function(e,t,n){"use strict";n.r(t),n.d(t,"showEasyMarketPromoteTooltip",(function(){return u}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("pIFo");var r=n("k487"),a=n("12ku"),o=n("lXE5");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=e=>{if(e&&(!e||e.dataset.onboarding_text)&&!Boolean(localStorage.getItem("easy_market_promotion_tooltip_was_hide"))){var t=e.dataset.onboarding_text;if(t.includes("{link}")&&(t=t.replace("{link}",'<a class="AdsEasyPromoteButtonTooltip__moreLink" href="/@business-avto-tovari">').replace("{/link}","</a>")),Boolean(Number(e.dataset.onboarding_with_darkness))){var n=new a.default(e,t,{highlight:!0,width:240,offset:[11,-13],shift:-11,border:[0,10,10,10],side:"bottom",align:"right",withCloseButton:!0,onBGClick:()=>{n.hideTT(),Object(o.enableBodyScroll)()},onCloseButtonClick:()=>Object(o.enableBodyScroll)()});setTimeout(()=>{var t=i(getXY(e),2)[1];Object(o.scrollToY)(t-100,250),n.showTT(),Object(o.disableBodyScroll)()},2e3)}else{var s=e.closest(".page_block");new r.default(e,{content:t,forceSide:"bottom",align:"right",withCloseButton:!0,appendTo:s,autoShow:!1,noAutoHideOnWindowClick:!0,noHideOnClick:!0,width:180,offset:[11,0],centerShift:-11,cls:"ads_easy_promote_button_tooltip feature_intro_tt",onCloseButtonClick:()=>localStorage.setItem("easy_market_promotion_tooltip_was_hide",JSON.stringify(!0))}).show()}}}}});