!function(e){function t(t){for(var a,r,i=t[0],l=t[1],d=t[2],u=0,p=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(c&&c(t);p.length;)p.shift()();return s.push.apply(s,d||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],a=!0,i=1;i<o.length;i++){var l=o[i];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=o[0]))}return e}var a={},n={"web/addresses":0},s=[];function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=a,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/js/cmodules/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var c=l;s.push([89,"common"]),o()}({"4+DJ":function(e,t,o){"use strict";o.r(t);o("91GP");var a=o("zxIV"),n=o("t7n3"),s=function(){var e={},t={},o={},r={},i={},l=null,d=null,c=null;function u(e){return window.ymaps.templateLayoutFactory.createClass(`<div class="circle_layout" style="background-image: url('${e}')"></div>`)}function p(e){var t="";e&&(t=" address_layout_content_cluster");var o=`\n    <div class="address_layout">\n      <span class="feature_intro_tt_hide">&nbsp;</span>\n      <div class="arrow"></div>\n      <div class="address_layout_content${t}">\n        $[[options.contentLayout]]\n      </div>\n    </div>\n    `,n=window.ymaps.templateLayoutFactory.createClass(o,{build:function(){this.constructor.superclass.build.call(this),this.element=geByClass1("address_layout",this.getParentElement()),this.applyElementOffset(),this.arrowElement=geByClass1("arrow",this.element);var e=geByClass1("feature_intro_tt_hide",this.element);addEvent(e,"click",this.onCloseClick.bind(this))},applyElementOffset:function(){var e=-(this.element.offsetWidth/2-10),t=-this.element.offsetHeight-24;Object(a.setStyle)(this.element,{top:t,left:e})},clear:function(){this.constructor.superclass.clear.call(this)},onSublayoutSizeChange:function(){if(n.superclass.onSublayoutSizeChange.apply(this,arguments),!this.element)return!1;this.events.fire("shapechange")},onCloseClick:function(e){return this.events.fire("userclose"),!1},getShape:function(){var e=null;return this.element&&(e=new window.ymaps.shape.Rectangle(e=new window.ymaps.geometry.pixel.Rectangle([[0,0],[-this.element.offsetWidth,-this.element.offsetHeight]]))),e}});return n}function g(e){var t=getLang("global_more_details"),o="";return o=e?`\n      {% for geoObject in properties.geoObjects %}\n        <div class="address_row">\n          <div class="address_layout_content_row address_layout_content_name">$[geoObject.properties.name]</div>\n          <div class="address_layout_content_row address_layout_content_address">\n            $[geoObject.properties.address_balloon]\n          </div>\n          <div class="address_layout_content_row address_layout_content_time">$[geoObject.properties.timeStatus]</div>\n          <a class="address_layout_content_more$[geoObject.properties.moreClass]" onclick="Addresses.showMoreBalloon($[geoObject.properties.address_id])">${t}</a>\n        </div>\n      {% endfor %}\n      `:`\n    <div class="address_layout_content_row address_layout_content_name">$[properties.name]</div>\n    <div class="address_layout_content_row address_layout_content_address">\n    $[properties.address_balloon]\n    </div>\n    <div class="address_layout_content_row address_layout_content_time">$[properties.timeStatus]</div>\n    <a class="address_layout_content_more$[properties.moreClass]" onclick="Addresses.showMoreBalloon($[properties.address_id])">${t}</a>\n    `,window.ymaps.templateLayoutFactory.createClass(o)}function m(e){return e||(e=24),{type:"Circle",coordinates:[e/2,e/2],radius:e}}function f(e){return e||(e=24),[-e/4,-e]}function _(e,t){var o;if(e.icon){if(o={iconLayout:u(e.icon),iconShape:m(),iconOffset:f()},!c||!c.no_balloon){var a=p(),s=g();Object.assign(o,{balloonLayout:a,balloonContentLayout:s,hideIconOnBalloonOpen:!1,balloonAutoPan:!0})}}else{o={iconLayout:"default#image",iconImageHref:Object(n.isRetina)()>1?"/images/map/marker_2x.png":"/images/map/marker.png",iconImageOffset:[-8,-23],iconImageSize:[26,23]}}return new window.ymaps.Placemark([e.latitude,e.longitude],{address_id:e.id,name:e.title,address:e.address,metro_class:e.metro_class,metro:e.metro,timeStatus:e.time_status_html,address_balloon:e.address_balloon,moreClass:e.moreClass},o)}function v(){e.addSmallControls();var t=[];for(var o in cur.addresses)cur.addresses[o]&&(t[o]=_(cur.addresses[o]));var a={clusterDisableClickZoom:!1,groupByCoordinates:!1,clusterBalloonContentLayout:g(1),clusterBalloonLayout:p(1)};if((l=new window.ymaps.Clusterer(a)).createCluster=function(e,t){var o,a=window.ymaps.Clusterer.prototype.createCluster.call(this,e,t),n=t.length,s=24;n<10?s=24:n<100?s=26:n<1e3?s=34:n<1e4?(s=28,n=Math.floor(n/1e3)+"K"):n<1e5?(n=Math.floor(n/1e3)+"K",s=34):(s=34,n="99K"),o=" cluster_"+s,a.properties.set({countClass:o,count:n});var r=(d||(d=window.ymaps.templateLayoutFactory.createClass('<div class="circle_cluster_layout$[properties.countClass]"><span class="counter">$[properties.count]</span></div>')),d);return a.options.set("iconLayout",r),a.options.set("hasBalloon",!1),a.options.set("iconShape",m(s)),a.options.set("iconOffset",f(s)),a},l.add(t),e.getMap().geoObjects.add(l),"yandex2"===cur.mapProvider){var n=e.getMap().geoObjects.getBounds();if(r){var s=new window.vkMaps.LatLonPoint(r.latitude,r.longitude);e.setCenter(s),e.getMap().setZoom(14)}else e.getMap().setBounds(n,{checkZoomRange:!0}).then((function(){var t=e.getMap().getZoom();if(t>17)e.getMap().setZoom(17);else if(t<10){var o=new window.vkMaps.LatLonPoint(i.latitude,i.longitude);e.setCenter(o),e.getMap().setZoom(14)}}))}}function y(){var e,a,n,s,r;if((e=t).getMap().behaviors.disable("drag"),e.getMap().behaviors.disable("dblClickZoom"),e.getMap().behaviors.disable("rightMouseButtonMagnifier"),e.getMap().behaviors.disable("scrollZoom"),o){n=t,s=u((a=o).icon),r=new window.ymaps.Placemark([a.latitude,a.longitude],{},{iconLayout:s,iconShape:m(),iconOffset:f()}),n.getMap().geoObjects.add(r);var i=t.getMap().geoObjects.getBounds();t.getMap().setBounds(i,{checkZoomRange:!0}).then((function(){t.getMap().getZoom()>17?t.getMap().setZoom(17):t.getMap().getZoom()<10&&t.getMap().setZoom(10)}))}}function h(e){(e=ge(e))&&(addClass(e,"highlighted"),setTimeout((function(){removeClass(e,"highlighted")}),1500))}return{getMap:function(){return e.getMap()},showMoreBalloon:function(e){var t=ge("address"+e),o=geByClass1("address_time_more_lnk",t);if(o){var a=geByClass1("address_time_more_lnk",domPN(domPN(o)));if(isVisible(a)){var n=geByClass1("address_more",domPN(domPN(o)));isVisible(n)||(val(o,getLang("global_min")),show(n))}var s=getXY(t,!0)[1];s<0||s>lastWindowHeight-200?animate(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+s-50},300,h.pbind(t)):h(t)}},showMore:function(e){var t=geByClass1("address_more",domPN(domPN(e)));isVisible(t)?(val(e,getLang("global_more_details")),hide(t)):(val(e,getLang("global_min")),show(t))},initBox:function(t,o,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!a&&geByClass("group_info_row map"))return setTimeout((function(){s.initBox(t,o,1,n)}),window.browser.msie?5e3:1e3),!1;c=n,r=o,i=t;var l=cur.mapProvider,d=cur.mapProviders,u="addresses_map_";n.base_map_container_id&&(u=n.base_map_container_id);var p=u+l;for(var g in d)if(d[g]){var m=d[g];g!=l&&isArray(m)&&isVisible(u+m)&&hide(u+m),isVisible(u+l)||show(p)}var f={provider:l,lngcode:getLang("wall_google_maps_lang")};(e=new window.vkMaps.VKMap(p,f)).isLoaded(l)?v():e.load.addHandler(v,this),window.wkcur.onHide=function(){e.removeMap()}},initInfo:function(e){o=e;var a={provider:"yandex2",lngcode:getLang("wall_google_maps_lang")};(t=new window.vkMaps.VKMap("group_info_map_yandex2",a)).isLoaded("yandex2")?y():t.load.addHandler(y,this)}}}();window.Addresses=s;try{window.stManager.done(window.jsc("web/addresses.js"))}catch(e){}},89:function(e,t,o){e.exports=o("4+DJ")}});